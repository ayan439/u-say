try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1fa79a84-fc76-40b4-bb56-f51d4cfb6688",e._sentryDebugIdIdentifier="sentry-dbid-1fa79a84-fc76-40b4-bb56-f51d4cfb6688")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18522],{107:(e,t,s)=>{var a=s(50117),r=s(94277),i=Object.prototype.hasOwnProperty;e.exports=r(function(e,t,s){i.call(e,s)?e[s].push(t):a(e,s,[t])})},11927:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var a=s(80263),r=s(53434),i=s.n(r),n=s(47041),l=s(35831),o=s(30519),c=s(64720),d=s(72195),u=s(86058),m=s(75419),g=s(4860),p=s(80100),h=s(93426);let x=e=>{let{name:t,unit:s,value:r,isAfterToday:i,tooltipFormatter:n}=e,l="percentage"===s?Number(r).toFixed(2):Number(r);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:t}),i?(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:"No data yet"}):(0,a.jsx)("p",{className:"text-xl",children:void 0!==n?n(l):l})]})},y=e=>{var t;let{attribute:s,attributeMeta:r,sumValue:i,tooltipFormatter:n,unit:l}=e,o=Number(null!=(t=null==r?void 0:r.value)?t:0),c=(o/i*100).toFixed(1);return(0,a.jsxs)("div",{className:"flex items-center justify-between","data-sentry-component":"AttributeContent","data-sentry-source-file":"UsageChartTooltips.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 w-[175px]",children:[(0,a.jsx)("div",{className:(0,p.cn)("w-3 h-3 rounded-full border",h.hs[s.color].marker)}),(0,a.jsxs)("p",{className:"text-xs prose",children:[s.name," (",c,"%):"," "]})]}),(0,a.jsx)("p",{className:"text-xs tabular-nums",children:void 0!==n?n(o):"".concat(o).concat("hours"===l?" H":"")})]},s.name)},b=e=>{let{attributes:t,values:s,isAfterToday:r,tooltipFormatter:i,unit:n}=e,l=s.reduce((e,t)=>e+Number(t.value),0);return(0,a.jsx)(a.Fragment,{children:r?(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:"No data yet"}):(0,a.jsx)("div",{className:"space-y-1 pb-1",children:t.flatMap(e=>{var t;let r=s.find(t=>t.dataKey===e.key);return 0===Number(null!=(t=null==r?void 0:r.value)?t:0)?[]:(0,a.jsx)(y,{attribute:e,attributeMeta:r,sumValue:l,tooltipFormatter:i,unit:n},e.name)})})})},f=e=>{let{data:t,name:s,attributes:r,unit:y,yLimit:f,yLeftMargin:j=10,yFormatter:_,yMin:v,tooltipFormatter:S}=e,N=[null!=v?v:0,Math.max(null!=v?v:0,null!=f?f:0)];return(0,a.jsx)("div",{className:"w-full h-[200px]","data-sentry-component":"UsageBarChart","data-sentry-source-file":"UsageBarChart.tsx",children:(0,a.jsx)(n.u,{width:"100%",height:200,"data-sentry-element":"ResponsiveContainer","data-sentry-source-file":"UsageBarChart.tsx",children:(0,a.jsxs)(l.X,{data:t,margin:{top:0,right:0,left:j,bottom:0},"data-sentry-element":"ComposedChart","data-sentry-source-file":"UsageBarChart.tsx",children:[(0,a.jsx)(o.d,{vertical:!1,strokeDasharray:"3 3",className:"stroke-border-stronger","data-sentry-element":"CartesianGrid","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(c.W,{dataKey:"periodStartFormatted","data-sentry-element":"XAxis","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(d.h,{width:40,axisLine:!1,tickLine:{stroke:"none"},domain:N,tickFormatter:_,"data-sentry-element":"YAxis","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(u.m,{content:e=>{let{active:t,payload:n}=e;if(!t||!n||!n.length)return null;{let e=i()(n[0].payload.period_start),t=e.startOf("day").isAfter(i()().startOf("day"));return(0,a.jsxs)("div",{className:(0,p.cn)("border bg-surface-100 rounded-md px-2 py-2",r.length>1&&!t?"w-[250px]":"w-[170px]"),children:[r.length>1?(0,a.jsx)(b,{attributes:r,values:n,isAfterToday:t,tooltipFormatter:S,unit:y}):(0,a.jsx)(x,{name:s,unit:y,value:n[0].value,tooltipFormatter:S,isAfterToday:t}),(0,a.jsx)("p",{className:"text-xs text-foreground-light mt-1",children:e.format("DD MMM YYYY")})]})}},"data-sentry-element":"Tooltip","data-sentry-source-file":"UsageBarChart.tsx"}),null==r?void 0:r.map(e=>(0,a.jsx)(m.y,{dataKey:e.key,stackId:"a",children:t.map(t=>(0,a.jsx)(g.f,{className:h.hs[e.color].bar},"".concat(t.period_start)))},e.key))]})})})}},16113:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/org/[slug]/usage",function(){return s(65138)}])},38985:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(86848).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},65138:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ev});var a=s(80263),r=s(60045),i=s(53434),n=s.n(i),l=s(52555),o=s.n(l),c=s(53239),d=s(22891),u=s(37873),m=s(44168),g=s(96521),p=s(39624),h=s(30691),x=s(53931),y=s(64634),b=s(37115),f=s(96698),j=s(80090),_=s(78633),v=s(76174),S=s(23892),N=s(99779),A=s(80100),k=s(29244),E=s(44725),I=s(47873),C=s(31669);let T=e=>{let{title:t,description:s,className:r}=e;return(0,a.jsx)("div",{className:(0,A.cn)("mx-auto flex flex-col gap-10 py-14",r),"data-sentry-component":"SectionHeader","data-sentry-source-file":"SectionHeader.tsx",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl",children:t}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:s})]})})};var P=s(93426),O=s(60656),R=s(28651),w=s(64778),L=s(83994),M=s(85039),D=s(30404),U=s(86510),B=s(21650);let G=e=>{let{section:t,includedInPlan:s,children:r}=e,{name:i,description:n,links:l}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"SectionContent.tsx",children:(0,a.jsx)("div",{className:"mx-auto flex flex-col gap-10 py-8 md:py-16",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsxs)("div",{className:"sticky top-32 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-base capitalize",children:i}),!1===s&&(0,a.jsx)(B.E,{children:"Not included"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:n.split("\n").map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-foreground-light pr-8",children:e},"desc-".concat(t)))})]}),l&&l.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-mono uppercase text-foreground-lighter mb-2",children:"More information"}),l.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(o(),{href:e.url,target:"_blank",rel:"noreferrer",children:(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 text-foreground-light hover:text-foreground transition",children:[(0,a.jsx)("p",{className:"text-sm",children:e.name}),(0,a.jsx)(U.A,{size:16,strokeWidth:1.5})]})})},e.url))]})]})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-7 space-y-6",children:r})]})})}),(0,a.jsx)(u.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"SectionContent.tsx"})]})};var H=s(107),z=s.n(H),q=s(2657);let F=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}),Y=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function X(e,t){if(!e||!e.usages.length)return[];let s=z()(e.usages.filter(e=>t(e.metric)),"date"),a=[];return Object.entries(s).forEach(e=>{let[t,s]=e,r={period_start:t,periodStartFormatted:n()(t).format("DD MMM")};for(let e of s)if(r[e.metric.toLowerCase()]=e.usage_original,e.breakdown)for(let[t,s]of Object.entries(e.breakdown))r[t.toLowerCase()]=s;a.push(r)}),a}var K=s(11927);let Z=e=>{var t,s,r,i,n,l,d,u,g,p,h,y,b;let{slug:f,projectRef:j,attribute:_,usage:v,usageMeta:S,chartMeta:k,subscription:E,error:I,isLoading:C,isError:T,isSuccess:P,currentBillingCycleSelected:U}=e,B=function(e,t,s){var a;let{billingAll:r}=(0,q.x)(["billing:all"]);return r?t?(null==t||null==(a=t.plan)?void 0:a.id)==="pro"&&(null==t?void 0:t.usage_billing_enabled)===!1?"/org/".concat(e,"/billing#cost-control"):"/org/".concat(e,"/billing?panel=subscriptionPlan&source=usage").concat(s):"/org/".concat(e,"/billing"):"/support/new?orgSlug=".concat(e,"&projectRef=no-project&category=Plan_upgrade&subject=").concat("Enquiry to upgrade plan for organization","&message=").concat(encodeURIComponent("Organization Slug: ".concat(e,"\nRequested plan: <Specify which plan to upgrade to: Pro | Team | Enterprise>")))}(null!=f?f:"",E,_.key),H=(null!=(r=null==S?void 0:S.usage)?r:0)/(null!=(i=null==S?void 0:S.pricing_free_units)?i:0),z=(null!=(n=null==S?void 0:S.usage)?n:0)-(null!=(l=null==S?void 0:S.pricing_free_units)?l:0),X=null==E?void 0:E.usage_billing_enabled,Z=X?"text-amber-900":"text-red-900",V=(0,c.useMemo)(()=>{var e,t;return null!=(t=null==(e=k[_.key])?void 0:e.data)?t:[]},[_.key,k]),W=void 0===j&&U&&!1===X&&H>=M.xx,$=(0,c.useMemo)(()=>{var e,t;return null!=(t=null==(e=_.attributes)?void 0:e.map(e=>V.some(t=>0!==Number(t[e.key]))).some(e=>!!e))&&t},[_.attributes,V]);return(0,a.jsx)("div",{id:_.anchor,className:"scroll-my-12","data-sentry-component":"AttributeUsage","data-sentry-source-file":"AttributeUsage.tsx",children:(0,a.jsxs)(G,{section:_,"data-sentry-element":"SectionContent","data-sentry-source-file":"AttributeUsage.tsx",children:[C&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Ay,{}),(0,a.jsx)(x.Ay,{className:"w-3/4"}),(0,a.jsx)(x.Ay,{className:"w-1/2"})]}),T&&(0,a.jsx)(m.A,{subject:"Failed to retrieve usage data",error:I}),P&&(0,a.jsx)(a.Fragment,{children:!S||(null==S?void 0:S.available_in_plan)?(0,a.jsxs)(a.Fragment,{children:[!j&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("p",{className:"text-sm",children:[_.name," usage"]}),W&&(0,a.jsxs)(D.m_,{children:[(0,a.jsx)(D.k$,{asChild:!0,children:H>=1?(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px] cursor-help",children:[(0,a.jsx)(O.A,{size:14,strokeWidth:2,className:Z}),(0,a.jsx)("p",{className:"text-sm ".concat(Z),children:"Exceeded limit"})]}):H>=M.xx&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px] cursor-help",children:[(0,a.jsx)(O.A,{size:14,strokeWidth:2,className:"text-amber-900"}),(0,a.jsx)("p",{className:"text-sm text-amber-900",children:"Approaching limit"})]})}),(0,a.jsxs)(D.ZI,{side:"bottom",children:[(0,a.jsx)("p",{children:"Exceeding your plans included usage will lead to restrictions to your project."}),(0,a.jsx)("p",{children:"Upgrade to a usage-based plan or disable the spend cap to avoid restrictions."})]})]})]})}),U&&S&&!S.unlimited&&(0,a.jsx)(L.A,{type:"horizontal",barClass:(0,A.cn)(H>=1?X?"bg-foreground-light":"bg-red-900":!1===X&&H>=M.xx?"bg-amber-900":"bg-foreground-light"),bgClass:"bg-surface-300",value:null!=(d=null==S?void 0:S.usage)?d:0,max:(null==S?void 0:S.pricing_free_units)||1}),(0,a.jsxs)("div",{children:[S&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==E||null==(t=E.plan)?void 0:t.name," Plan"]}),S.unlimited?(0,a.jsx)("p",{className:"text-xs",children:"Unlimited"}):(0,a.jsx)("p",{className:"text-xs",children:"bytes"===_.unit||"gigabytes"===_.unit?"".concat(null!=(u=S.pricing_free_units)?u:0," GB"):(null!=(g=S.pricing_free_units)?g:0).toLocaleString()})]}),U&&S&&(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:[_.chartPrefix||"Used "," in period"]}),(0,a.jsx)("p",{className:"text-xs",children:"bytes"===_.unit||"gigabytes"===_.unit?"".concat((null!=(p=null==S?void 0:S.usage)?p:0).toFixed(2)," GB"):(null!=(h=null==S?void 0:S.usage)?h:0).toLocaleString()})]}),U&&(null!=(y=null==S?void 0:S.pricing_free_units)?y:0)>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-t py-1",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Overage in period"}),(0,a.jsx)("p",{className:"text-xs",children:(null!=(b=null==S?void 0:S.pricing_free_units)?b:0)===-1||z<0?"0".concat("bytes"===_.unit||"gigabytes"===_.unit?" GB":""):"bytes"===_.unit||"gigabytes"===_.unit?"".concat(z.toFixed(2)," GB"):z.toLocaleString()})]})]})]}),null==(s=_.additionalInfo)?void 0:s.call(_,v),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:[_.chartPrefix||""," ",_.name," ",_.chartSuffix||"per day"]}),_.chartDescription.split("\n").map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:e},"para-".concat(t)))]}),k[_.key].isLoading?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Ay,{}),(0,a.jsx)(x.Ay,{className:"w-3/4"}),(0,a.jsx)(x.Ay,{className:"w-1/2"})]}):V.length>0&&$?(0,a.jsx)(K.A,{name:"".concat(_.chartPrefix||""," ").concat(_.name),unit:_.unit,attributes:_.attributes,data:V,yLeftMargin:k[_.key].margin,yFormatter:e=>((e,t)=>{if("string"==typeof e)return e;if("bytes"===t){let t=(e=>{if(0===e||void 0===e)return"0 bytes";let t=Math.floor(Math.log(e)/Math.log(1024)),s=Y[t],a=2;return["bytes","KB","MB"].includes(s)?a=0:["GB"].includes(s)&&(a=1),parseFloat((e/Math.pow(1024,t)).toFixed(a))+" "+s})(e).replace(/\s/g,"");return"0bytes"===t?"0":t}return"gigabytes"===t?F.format(e)+"GB":F.format(e)})(e,_.unit),tooltipFormatter:e=>((e,t)=>{if("string"==typeof e)return e;if("bytes"===t){let t=(e=>{if(0===e||void 0===e)return"0 bytes";let t=Math.floor(Math.log(e)/Math.log(1024)),s=Y[t];return parseFloat((e/Math.pow(1024,t)).toFixed(3))+" "+s})(e).replace(/\s/g,"");return"0bytes"===t?"0":t}return"gigabytes"===t?F.format(e)+"GB":F.format(e)})(e,_.unit)}):(0,a.jsx)(w.A,{children:(0,a.jsx)(w.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(R.A,{className:"text-foreground-light mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No data in period"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"May take up to 24 hours to show"})]})})})]}):(0,a.jsx)(w.A,{children:(0,a.jsx)(w.A.Content,{children:(0,a.jsxs)("div",{className:"flex w-full items-center flex-col justify-center space-y-2 md:flex-row md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Not included in plan"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You need to be on a higher plan in order to use this feature."})})]}),(0,a.jsx)(N.$,{type:"primary",asChild:!0,children:(0,a.jsx)(o(),{href:B,children:"Upgrade plan"})})]})})})})]})})};var V=s(6436),W=s(20033),$=s(60793),Q=s(4969);let J=e=>{var t;let{attribute:s,subscription:r,usage:i,currentBillingCycleSelected:n}=e,l=(0,c.useMemo)(()=>null==i?void 0:i.usages.find(e=>e.metric===y.Lb.DATABASE_SIZE),[i]),d=(0,c.useMemo)(()=>null==l?void 0:l.project_allocations.some(e=>e.usage>.5*1e9),[l]);return(0,a.jsx)("div",{id:s.anchor,className:"scroll-my-12","data-sentry-component":"DatabaseSizeUsage","data-sentry-source-file":"DatabaseSizeUsage.tsx",children:(0,a.jsx)(G,{section:s,"data-sentry-element":"SectionContent","data-sentry-source-file":"DatabaseSizeUsage.tsx",children:(0,a.jsxs)("div",{className:"space-y-4",children:[n&&d&&(0,a.jsxs)(W.Fc,{variant:"warning",children:[(0,a.jsx)($.HV,{}),(0,a.jsx)(W.XL,{children:"Projects exceeding quota"}),(0,a.jsx)(W.TN,{children:"You have projects that are exceeding 0.5 GB of database size. Reduce the database size or upgrade to a paid plan."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("p",{className:"text-sm",children:[s.name," usage"]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==r||null==(t=r.plan)?void 0:t.name," Plan"]}),(0,a.jsx)("p",{className:"text-xs",children:"0.5 GB per project"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Max database size"}),(0,a.jsx)("p",{className:"text-xs",children:(null==l?void 0:l.usage)?(0,V.z3)(null==l?void 0:l.usage_original):"-"})]})]}),n?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)("p",{className:"text-sm",children:"Current database size per project"})}),(null==l?void 0:l.project_allocations.length)===0&&(0,a.jsx)(w.A,{children:(0,a.jsx)(w.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"No active projects"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have any active projects in this organization."})]})})}),null==l?void 0:l.project_allocations.map((e,t)=>(0,a.jsxs)("div",{className:t!==l.project_allocations.length-1?"border-b pb-2":"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-foreground-light flex items-center gap-2",children:e.name}),(0,a.jsx)(N.$,{asChild:!0,type:"default",size:"tiny",children:(0,a.jsx)(o(),{href:"/project/".concat(e.ref,"/reports/database#database-size-report"),children:"Manage Database Size"})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center h-6 gap-3",children:[(0,a.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-foreground font-semibold font-mono -mt-[2px]",children:(0,V.z3)(e.usage)})," ","Database Size"]}),(0,a.jsx)(Q.I,{side:"top",children:(0,a.jsxs)("p",{children:[(0,V.z3)(e.usage)," GB database size as reported by Postgres."]})})]})})]},"usage-project-".concat(e.ref)))]}):(0,a.jsx)(w.A,{children:(0,a.jsx)(w.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"Data not available"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Switch to current billing cycle to see current database size per project."})]})})})]})})})};var ee=s(79050),et=s(21890);let es=e=>{var t,s;let{slug:r,projectRef:i,attribute:n,subscription:l,usage:d,currentBillingCycleSelected:u}=e,{data:g,isError:p,isLoading:h,isSuccess:b,error:f}=(0,et.C0)({slug:r},{enabled:u}),j=(0,c.useMemo)(()=>(null==g?void 0:g.pages.flatMap(e=>e.projects))||[],[null==g?void 0:g.pages]),_=(0,c.useMemo)(()=>b?j.filter(e=>{let t=e.is_branch&&e.databases.some(e=>{var t;return(null!=(t=e.disk_volume_size_gb)?t:8)>8}),s=e.status!==M.BU.INACTIVE,a=e.databases.every(e=>"AWS"===e.cloud_provider);return(!e.is_branch||t)&&s&&a}).filter(e=>e.ref===i||!i):[],[b,j,i]),v=(0,c.useMemo)(()=>_.some(e=>e.databases.some(e=>"READ_REPLICA"===e.type||e.disk_volume_size_gb&&e.disk_volume_size_gb>8)),[_]),S=null==d?void 0:d.usages.find(e=>e.metric===y.Lb.DISK_SIZE_GB_HOURS_GP3),A=null==d?void 0:d.usages.find(e=>e.metric===y.Lb.DISK_SIZE_GB_HOURS_IO2);return(0,a.jsx)("div",{id:n.anchor,className:"scroll-my-12","data-sentry-component":"DiskUsage","data-sentry-source-file":"DiskUsage.tsx",children:(0,a.jsxs)(G,{section:n,"data-sentry-element":"SectionContent","data-sentry-source-file":"DiskUsage.tsx",children:[h&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Ay,{}),(0,a.jsx)(x.Ay,{className:"w-3/4"}),(0,a.jsx)(x.Ay,{className:"w-1/2"})]}),p&&(0,a.jsx)(m.A,{subject:"Failed to retrieve usage data",error:f}),b&&(0,a.jsxs)("div",{className:"space-y-4",children:[u&&(null==l?void 0:l.usage_billing_enabled)===!1&&v&&(0,a.jsxs)(W.Fc,{variant:"warning",children:[(0,a.jsx)($.HV,{}),(0,a.jsx)(W.XL,{children:"Projects exceeding quota"}),(0,a.jsx)(W.TN,{children:"You have projects that are exceeding 8 GB of provisioned disk size, but do not allow any overages with the Spend Cap on. Reduce the disk size or disable the spend cap."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("p",{className:"text-sm",children:[n.name," usage"]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==l||null==(t=l.plan)?void 0:t.name," Plan"]}),(0,a.jsx)("p",{className:"text-xs",children:"8 GB GP3 disk per project"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Overages in period"}),(0,a.jsxs)("p",{className:"text-xs",children:[(null!=(s=null==S?void 0:S.usage)?s:0).toLocaleString()," GP3 GB-Hrs",(null==A?void 0:A.usage)?" / ".concat(A.usage.toLocaleString()," IO2 GB-Hrs"):""]})]})]}),u?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Current disk size per project"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Breakdown of disk per project. Head to your project's disk management section to see database size used."})]}),0===_.length&&(0,a.jsx)(w.A,{children:(0,a.jsx)(w.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"No active projects"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have any active projects in this organization."})]})})}),_.map((e,t)=>{let s=e.databases.filter(e=>"PRIMARY"===e.type).reduce((e,t)=>{var s;return e+(null!=(s=t.disk_volume_size_gb)?s:8)},0),r=e.databases.filter(e=>"PRIMARY"!==e.type),i=r.reduce((e,t)=>{var s;return e+(null!=(s=t.disk_volume_size_gb)?s:8)},0);return(0,a.jsxs)("div",{className:t!==_.length-1?"border-b pb-2":"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-foreground-light flex items-center gap-2",children:e.name}),(0,a.jsx)(N.$,{asChild:!0,type:"default",size:"tiny",children:(0,a.jsx)(o(),{href:"/project/".concat(e.ref,"/settings/compute-and-disk"),children:"Manage Disk"})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center h-6 gap-3",children:[(0,a.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-foreground font-semibold -mt-[2px]",children:(0,a.jsx)(ee.Ay,{value:s+i,style:{lineHeight:.8},className:"font-mono"})})," ","GB Disk provisioned"]}),(0,a.jsxs)(Q.I,{side:"top",children:[(0,a.jsxs)("p",{children:[s," GB for Primary Database"]}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[i," GB for ",r.length," Read"," ",1===r.length?"Replica":"Replicas"]}),(0,a.jsx)("p",{className:"mt-1",children:"Read replicas have their own disk and use 25% more disk to account for WAL files."})]})]})]})})]},"usage-project-".concat(e.ref))})]}):(0,a.jsx)(w.A,{children:(0,a.jsx)(w.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"Data not available"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Switch to current billing cycle to see current disk size per project."})]})})})]})]})})},ea=e=>{let{orgSlug:t,projectRef:s,categoryKey:r,chartMeta:i,subscription:n,currentBillingCycleSelected:l}=e,{data:o,error:c,isLoading:d,isError:m,isSuccess:g}=(0,C.n)({orgSlug:t}),p=(0,P.rj)(n).find(e=>e.key===r);return p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"UsageSection.tsx",children:(0,a.jsx)(T,{title:p.name,description:p.description,className:"pb-0","data-sentry-element":"SectionHeader","data-sentry-source-file":"UsageSection.tsx"})}),p.attributes.map(e=>"diskSize"===e.key?(0,a.jsx)(es,{slug:t,projectRef:s,attribute:e,subscription:n,currentBillingCycleSelected:l,usage:o},e.name):e.key===y.Lb.DATABASE_SIZE?(0,a.jsx)(J,{slug:t,projectRef:s,attribute:e,subscription:n,currentBillingCycleSelected:l,usage:o},e.name):(0,a.jsx)(Z,{slug:t,projectRef:s,attribute:e,usage:o,usageMeta:null==o?void 0:o.usages.find(t=>t.metric===e.key),chartMeta:i,subscription:n,error:c,isLoading:d,isError:m,isSuccess:g,currentBillingCycleSelected:l},e.name))]}):null},er=e=>{let{orgSlug:t,projectRef:s,subscription:r,startDate:i,endDate:n,currentBillingCycleSelected:l,orgDailyStats:o,isLoadingOrgDailyStats:c}=e,d={[y.Lb.MONTHLY_ACTIVE_USERS]:{data:X(o,e=>e===y.Lb.MONTHLY_ACTIVE_USERS),margin:18,isLoading:c},[y.Lb.MONTHLY_ACTIVE_SSO_USERS]:{data:X(o,e=>e===y.Lb.MONTHLY_ACTIVE_SSO_USERS),margin:20,isLoading:c},[y.Lb.STORAGE_IMAGES_TRANSFORMED]:{data:X(o,e=>e===y.Lb.STORAGE_IMAGES_TRANSFORMED),margin:0,isLoading:c},[y.Lb.FUNCTION_INVOCATIONS]:{data:X(o,e=>e===y.Lb.FUNCTION_INVOCATIONS),margin:26,isLoading:c},[y.Lb.REALTIME_MESSAGE_COUNT]:{data:X(o,e=>e===y.Lb.REALTIME_MESSAGE_COUNT),margin:38,isLoading:c},[y.Lb.REALTIME_PEAK_CONNECTIONS]:{data:X(o,e=>e===y.Lb.REALTIME_PEAK_CONNECTIONS),margin:0,isLoading:c}};return(0,a.jsx)(ea,{orgSlug:t,projectRef:s,categoryKey:"activity",chartMeta:d,subscription:r,currentBillingCycleSelected:l,"data-sentry-element":"UsageSection","data-sentry-component":"Activity","data-sentry-source-file":"Activity.tsx"})},ei=e=>{let{orgDailyStats:t,isLoadingOrgDailyStats:s}=e,r=Object.values(y.Fg).map(e=>e.toLowerCase()),{billingAll:i}=(0,q.x)(["billing:all"]),n=X(t,e=>e.toString().startsWith("COMPUTE")),l={[y.Fg.COMPUTE_HOURS_BRANCH]:"blue",[y.Fg.COMPUTE_HOURS_XS]:"white",[y.Fg.COMPUTE_HOURS_SM]:"green",[y.Fg.COMPUTE_HOURS_MD]:"dark-green",[y.Fg.COMPUTE_HOURS_L]:"yellow",[y.Fg.COMPUTE_HOURS_XL]:"dark-yellow",[y.Fg.COMPUTE_HOURS_2XL]:"orange",[y.Fg.COMPUTE_HOURS_4XL]:"dark-orange",[y.Fg.COMPUTE_HOURS_8XL]:"red",[y.Fg.COMPUTE_HOURS_12XL]:"dark-red",[y.Fg.COMPUTE_HOURS_16XL]:"purple",[y.Fg.COMPUTE_HOURS_24XL]:"purple",[y.Fg.COMPUTE_HOURS_24XL_OPTIMIZED_CPU]:"purple",[y.Fg.COMPUTE_HOURS_24XL_OPTIMIZED_MEMORY]:"purple",[y.Fg.COMPUTE_HOURS_24XL_HIGH_MEMORY]:"purple",[y.Fg.COMPUTE_HOURS_48XL]:"purple",[y.Fg.COMPUTE_HOURS_48XL_OPTIMIZED_CPU]:"purple",[y.Fg.COMPUTE_HOURS_48XL_OPTIMIZED_MEMORY]:"purple",[y.Fg.COMPUTE_HOURS_48XL_HIGH_MEMORY]:"purple"},o=Object.keys(y.Fg).map(e=>({key:e.toLowerCase(),color:l[e]||"white",name:(0,y.pc)(e)})),d=(0,c.useMemo)(()=>r.filter(e=>n.some(t=>t[e])),[n]),u=(0,c.useMemo)(()=>d.length>0,[d]);return(0,a.jsx)("div",{id:"compute",className:"scroll-my-12","data-sentry-component":"Compute","data-sentry-source-file":"Compute.tsx",children:(0,a.jsxs)(G,{section:{name:"Compute Hours",description:"Amount of hours your projects were active. Each project is a dedicated server and database.\nPaid plans come with $10 in Compute Credits to cover one project running on Micro Compute or parts of any compute add-on.\nBilling is based on the sum of Compute Hours used. Paused projects do not count towards usage.",links:i?[{name:"Compute Add-ons",url:"".concat(M.aq,"/guides/platform/compute-add-ons")},{name:"Usage-billing for Compute",url:"".concat(M.aq,"/guides/platform/manage-your-usage/compute")}]:[]},"data-sentry-element":"SectionContent","data-sentry-source-file":"Compute.tsx",children:[s&&(0,a.jsx)(x.yV,{}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-1",children:[n.length>0&&(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("p",{className:"text-sm",children:"Compute Hours usage"})})}),d.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b last:border-b-0 py-1 last:py-0",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,a.jsx)("span",{className:"font-medium",children:(0,y.pc)(e.toUpperCase())})," ","Compute Hours usage in period"]}),(0,a.jsxs)("p",{className:"text-sm",children:[n.reduce((t,s)=>{var a;return t+(null!=(a=s[e])?a:0)},0)," hours"]})]},e))]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Compute Hours usage per day"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"The data refreshes every hour."})]}),n.length>0&&u?(0,a.jsx)(K.A,{name:"Compute Hours usage",unit:"hours",attributes:o,data:n,yMin:24}):(0,a.jsx)(w.A,{children:(0,a.jsx)(w.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(R.A,{className:"text-foreground-light mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No data in period"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"May take up to one hour to show"})]})})})]})]})})},en=e=>{let{orgSlug:t,projectRef:s,subscription:r,currentBillingCycleSelected:i,orgDailyStats:n,isLoadingOrgDailyStats:l}=e,o={[y.Lb.EGRESS]:{data:X(n,e=>e===y.Lb.EGRESS),margin:16,isLoading:l},[y.Lb.CACHED_EGRESS]:{data:X(n,e=>e===y.Lb.CACHED_EGRESS),margin:16,isLoading:l}};return(0,a.jsx)(ea,{orgSlug:t,projectRef:s,categoryKey:"egress",chartMeta:o,subscription:r,currentBillingCycleSelected:i,"data-sentry-element":"UsageSection","data-sentry-component":"Egress","data-sentry-source-file":"Egress.tsx"})},el=e=>{let{orgSlug:t,projectRef:s,subscription:r,currentBillingCycleSelected:i,orgDailyStats:n,isLoadingOrgDailyStats:l}=e,o={[y.Lb.STORAGE_SIZE]:{isLoading:l,margin:14,data:X(n,e=>e===y.Lb.STORAGE_SIZE)}};return(0,a.jsx)(ea,{orgSlug:t,projectRef:s,categoryKey:"sizeCount",chartMeta:o,subscription:r,currentBillingCycleSelected:i,"data-sentry-element":"UsageSection","data-sentry-component":"SizeAndCounts","data-sentry-source-file":"SizeAndCounts.tsx"})},eo=[{key:y.Lb.DATABASE_SIZE,name:"Database Size",units:"bytes",anchor:"dbSize",category:"Database",unitName:"GB",tip:"Database size refers to the actual amount of space used by all your database objects, as reported by Postgres. This measurement reflects your current database size at this moment. Free Plan projects are limited to 0.5 GB Database Size each and are monitored across the entire billing period."},{key:y.Lb.EGRESS,name:"Egress",units:"bytes",anchor:"egress",category:"Database",unitName:"GB"},{key:y.Lb.CACHED_EGRESS,name:"Cached Egress",units:"bytes",anchor:"cachedEgress",category:"Database",unitName:"GB"},{key:y.Lb.MONTHLY_ACTIVE_USERS,name:"Monthly Active Users",units:"absolute",anchor:"mau",category:"Authentication",unitName:"MAU"},{key:y.Lb.MONTHLY_ACTIVE_SSO_USERS,name:"Monthly Active SSO Users",units:"absolute",anchor:"mauSso",category:"Authentication",unitName:"MAU"},{key:y.Lb.MONTHLY_ACTIVE_THIRD_PARTY_USERS,name:"Monthly Active Third-Party Users",units:"absolute",category:"Authentication",unitName:"MAU"},{key:y.Lb.STORAGE_SIZE,name:"Storage Size",units:"bytes",anchor:"storageSize",category:"Storage",unitName:"GB"},{key:y.Lb.STORAGE_IMAGES_TRANSFORMED,name:"Storage Image Transformations",units:"absolute",anchor:"storageImageTransformations",category:"Storage"},{key:y.Lb.REALTIME_PEAK_CONNECTIONS,name:"Realtime Concurrent Peak Connections",units:"absolute",anchor:"realtimePeakConnections",category:"Realtime"},{key:y.Lb.REALTIME_MESSAGE_COUNT,name:"Realtime Messages",units:"absolute",anchor:"realtimeMessageCount",category:"Realtime"},{key:y.Lb.FUNCTION_INVOCATIONS,name:"Edge Function Invocations",units:"absolute",anchor:"funcInvocations",category:"Edge Functions"},{key:y.Lb.DISK_SIZE_GB_HOURS_GP3,name:"Disk Size",anchor:"diskSize",units:"absolute",unitName:"GB-Hrs",category:"Database",tip:"Each project gets provisioned with 8 GB of GP3 disk for free. When you get close to the disk size limit, we autoscale your disk by 1.5x. Each GB of provisioned disk size beyond 8 GB incurs a GB-Hr every hour. Each extra GB is billed at $0.125/month ($0.000171/GB-Hr), prorated down to the hour.",docLink:{title:"Read more",url:"".concat(M.aq,"/guides/platform/manage-your-usage/disk-size")}},{key:y.Lb.DISK_SIZE_GB_HOURS_IO2,name:"Disk Size IO2",anchor:"diskSize",units:"absolute",unitName:"GB-Hrs",category:"Database"},{key:y.Lb.DISK_IOPS_IO2,name:"Disk IOPS IO2",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:y.Lb.DISK_IOPS_GP3,name:"Disk IOPS GP3",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:y.Lb.DISK_THROUGHPUT_GP3,name:"Disk Throughput",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:y.Lb.LOG_DRAIN_EVENTS,name:"Log Drain Events",units:"absolute",category:"Database"}];var ec=s(86541),ed=s(76196),eu=s(28243),em=s(74381);let eg=e=>{var t;let{slug:s,metric:r,usage:i,subscription:n,relativeToSubscription:l,className:d}=e,u=i.usages.find(e=>e.metric===r.key),m=(0,c.useMemo)(()=>{var e,t,s,a;return u?l&&!1===u.available_in_plan?"Unavailable in plan":u.cost&&u.cost>0||!l||u.unlimited||0===u.pricing_free_units?"bytes"===r.units||"gigabytes"===r.units?"".concat(null!=(e=u.usage.toLocaleString())?e:0," GB"):u.usage.toLocaleString()+(r.unitName?" ".concat(r.unitName):""):"bytes"===r.units||"gigabytes"===r.units?"".concat(null!=(s=u.usage.toLocaleString())?s:0," / ").concat(null!=(a=u.pricing_free_units)?a:0," GB"):"".concat(u.usage.toLocaleString()," / ").concat(null==(t=u.pricing_free_units)?void 0:t.toLocaleString())+(r.unitName?" ".concat(r.unitName):""):""},[u,l,r]),g=(0,c.useMemo)(()=>u&&u.project_allocations?u.project_allocations.sort((e,t)=>t.usage-e.usage):[],[u]);if(!u)return null;let p=0===u.usage?0:u.usage/(null!=(t=u.pricing_free_units)?t:0),h=(null==n?void 0:n.usage_billing_enabled)===!0,x=!1==!!u.unlimited,y=x&&p>=.8,b=l&&x&&p>=1,f=(0,em.mX)(u.metric),j=0===u.usage||0===u.pricing_free_units?"":p<.01?"(<1%)":"(".concat((+(100*p).toFixed(0)).toLocaleString(),"%)");return(0,a.jsxs)(eu.jc,{openDelay:50,closeDelay:200,"data-sentry-element":"HoverCard","data-sentry-component":"BillingMetric","data-sentry-source-file":"BillingMetric.tsx",children:[(0,a.jsx)(eu.d0,{asChild:!0,"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"BillingMetric.tsx",children:(0,a.jsxs)("div",{className:(0,A.cn)("flex items-center justify-between",d),children:[r.anchor?(0,a.jsxs)(o(),{href:"/org/".concat(s,"/usage#").concat(r.anchor),className:"block w-full group",children:[(0,a.jsxs)("div",{className:"group flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:r.name}),u.available_in_plan&&(0,a.jsx)("span",{className:"text-foreground-muted transition inline-block group-hover:transform group-hover:translate-x-0.5",children:(0,a.jsx)(ed.A,{strokeWidth:1.5,size:16,className:"transition"})})]}),(0,a.jsx)("span",{className:"text-sm",children:m}),"\xa0",l&&u.cost&&u.cost>0?(0,a.jsxs)("span",{className:"text-sm",translate:"no",children:["(",(0,V.vv)(u.cost),")"]}):u.available_in_plan&&!u.unlimited&&l?(0,a.jsx)("span",{className:"text-sm",children:j}):null]}):(0,a.jsxs)("div",{className:"block w-full",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light flex space-x-1",children:r.name}),(0,a.jsx)("span",{className:"text-sm",children:m}),"\xa0",l&&u.cost&&u.cost>0?(0,a.jsxs)("span",{className:"text-sm",translate:"no",children:["(",(0,V.vv)(u.cost),")"]}):u.available_in_plan&&!u.unlimited&&l?(0,a.jsx)("span",{className:"text-sm",children:j}):null]}),u.available_in_plan?(0,a.jsx)("div",{children:l&&!u.unlimited?(0,a.jsxs)("svg",{className:"h-8 w-8 -rotate-90 transform",children:[(0,a.jsx)("circle",{cx:15,cy:15,r:12,fill:"transparent",stroke:"currentColor",strokeWidth:4,className:"text-background-surface-300"}),(0,a.jsx)("circle",{cx:15,cy:15,r:12,fill:"transparent",stroke:"currentColor",strokeDasharray:75.398,strokeDashoffset:"calc(75.39822 - ".concat(p<1?100*p:100," / 100 * 75.39822)"),strokeWidth:4,className:h?"text-gray-dark-800":b?"text-red-900":y?"text-yellow-1000":"text-gray-dark-800"})]}):null}):(0,a.jsx)("div",{children:(0,a.jsx)(ec.I,{source:"billingBreakdownUsage".concat(r.anchor),children:"Upgrade"})})]})}),u.available_in_plan&&(0,a.jsx)(eu.Et,{side:"bottom",align:"end",className:"w-[500px]",animate:"slide-in",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium",translate:"no",children:u.unit_price_desc}),r.tip&&(0,a.jsx)("div",{className:"my-2",children:(0,a.jsxs)("p",{className:"text-sm",children:[r.tip," ",r.docLink&&(0,a.jsx)(o(),{href:r.docLink.url,target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:r.docLink.title})]})}),!1===n.usage_billing_enabled&&l&&(y||b)&&(0,a.jsx)("div",{className:"my-2",children:(0,a.jsx)("p",{className:"text-sm",children:"Exceeding your plans included usage will lead to restrictions to your project. Upgrade to a usage-based plan or disable the spend cap to avoid restrictions."})}),g&&g.length>0&&(0,a.jsxs)("table",{className:"list-disc w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:"Project"}),(0,a.jsx)("th",{className:"text-right",children:"Usage"})]})}),(0,a.jsxs)("tbody",{children:[g.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{className:"text-right",children:(0,em.pK)(u.metric,e)})]},"".concat(u.metric,"_").concat(e.ref))),(0,a.jsx)("tr",{})]}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"py-2 border-t text-left",children:["Total",f&&(0,a.jsxs)("span",{children:[" (",f,")"]})]}),(0,a.jsxs)("td",{className:"py-2 border-t text-right",children:[(0,em.pK)(u.metric,{usage:u.usage_original})," "]})]})})]})]})})]})},ep=e=>{let{slug:t,metric:s,usage:r,relativeToSubscription:i,className:n}=e,l=r.usages.find(e=>e.metric===s.key),d=(0,c.useMemo)(()=>{var e,t,s,a,r;return(null==l?void 0:l.pricing_free_units)?"".concat(null!=(t=null==l||null==(e=l.usage)?void 0:e.toLocaleString())?t:0," / ").concat(null!=(s=null==l?void 0:l.pricing_free_units)?s:0," hours"):"".concat(null!=(r=null==l||null==(a=l.usage)?void 0:a.toLocaleString())?r:0," hours")},[l]),u=(0,c.useMemo)(()=>l&&l.project_allocations?l.project_allocations.sort((e,t)=>t.usage-e.usage):[],[l]);return(0,a.jsxs)(eu.jc,{openDelay:50,closeDelay:200,"data-sentry-element":"HoverCard","data-sentry-component":"ComputeMetric","data-sentry-source-file":"ComputeMetric.tsx",children:[(0,a.jsx)(eu.d0,{asChild:!0,"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{className:n,children:[(0,a.jsx)(o(),{href:"/org/".concat(t,"/usage#").concat(s.anchor),"data-sentry-element":"Link","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{className:"group flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:s.name}),(0,a.jsx)(ed.A,{strokeWidth:1.5,size:16,className:"transition","data-sentry-element":"ChevronRight","data-sentry-source-file":"ComputeMetric.tsx"})]})}),(0,a.jsx)("span",{className:"text-sm",children:d}),"\xa0",i&&(null==l?void 0:l.cost)&&l.cost>0?(0,a.jsxs)("span",{className:"text-sm",translate:"no",children:["(",(0,V.vv)(null==l?void 0:l.cost),")"]}):null]})}),(0,a.jsx)(eu.Et,{side:"bottom",align:"end",className:"w-[500px]",animate:"slide-in","data-sentry-element":"HoverCardContent","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{className:"text-sm text-foreground space-y-2",children:[(0,a.jsx)("p",{className:"font-medium",translate:"no",children:null==l?void 0:l.unit_price_desc}),(0,a.jsx)("div",{className:"my-2",children:(null==l?void 0:l.metric)===y.Fg.COMPUTE_HOURS_BRANCH?(0,a.jsxs)("p",{className:"text-sm",children:["Each Preview branch is a separate environment with all Supabase services (Database, Auth, Storage, etc.)."," ",(0,a.jsx)(o(),{href:"".concat(M.aq,"/guides/platform/manage-your-usage/branching"),target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:"Read more"})]}):(0,a.jsxs)("p",{className:"text-sm",children:["Every project is a dedicated server and database. For every hour your project is active, it incurs compute costs based on the compute size of your project. Paused projects do not incur compute costs."," ",(0,a.jsx)(o(),{href:"".concat(M.aq,"/guides/platform/manage-your-usage/compute"),target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:"Read more"})]})}),l&&u.length>0&&(0,a.jsxs)("table",{className:"list-disc w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:"Project"}),(0,a.jsx)("th",{className:"text-right",children:"Usage"})]})}),(0,a.jsxs)("tbody",{children:[u.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{className:"text-right",children:(0,em.pK)(l.metric,e)})]},"".concat(l.metric,"_").concat(e.ref))),(0,a.jsx)("tr",{})]}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 border-t text-left",children:"Total (Hours)"}),(0,a.jsx)("td",{className:"py-2 border-t text-right",children:(0,em.pK)(l.metric,{usage:l.usage_original})})]})})]})]})})]})},eh=[y.Lb.DISK_IOPS_IO2,y.Lb.DISK_IOPS_GP3,y.Lb.DISK_SIZE_GB_HOURS_GP3,y.Lb.DISK_SIZE_GB_HOURS_IO2,y.Lb.DISK_THROUGHPUT_GP3],ex=e=>{var t,s;let{orgSlug:r,projectRef:i,subscription:n,startDate:l,endDate:o,currentBillingCycleSelected:u}=e,g=(0,d.dv)("md"),p=null==n?void 0:n.usage_billing_enabled,{billingAll:h}=(0,q.x)(["billing:all"]),{data:b,error:f,isLoading:j,isError:_,isSuccess:v}=(0,C.n)({orgSlug:r,projectRef:i,start:!u&&l?new Date(l):void 0,end:!u&&o?new Date(o):void 0}),S=u&&!i,N=S&&!!(null==b?void 0:b.usages.find(e=>{var t;return!e.metric.startsWith("COMPUTE_")&&!e.unlimited&&e.usage>(null!=(t=null==e?void 0:e.pricing_free_units)?t:0)})),k=(0,c.useMemo)(()=>b?eo.filter(e=>b.usages.some(t=>t.metric===e.key)).filter(e=>{if(!eh.includes(e.key))return!0;let t=b.usages.find(t=>t.metric===e.key);return t&&t.usage>0}).slice().sort((e,t)=>{var s,a,r,i;let n=b.usages.find(t=>t.metric===e.key),l="number"!=typeof n?(null!=(s=null==n?void 0:n.usage)?s:0)/(null!=(a=null==n?void 0:n.pricing_free_units)?a:0):0,o=b.usages.find(e=>e.metric===t.key),c="number"!=typeof o?(null!=(r=null==o?void 0:o.usage)?r:0)/(null!=(i=null==o?void 0:o.pricing_free_units)?i:0):0;return Number(null==o?void 0:o.available_in_plan)-Number(null==n?void 0:n.available_in_plan)||c-l}):[],[b]),E=((null==b?void 0:b.usages)||[]).filter(e=>e.metric.startsWith("COMPUTE")).map(e=>e.metric);return(0,a.jsx)("div",{id:"summary","data-sentry-component":"TotalUsage","data-sentry-source-file":"TotalUsage.tsx",children:(0,a.jsxs)(G,{section:{name:"Usage Summary",description:p?"Your plan includes a limited amount of usage. If exceeded, you will be charged for the overages. It may take up to 1 hour to refresh.":"Your plan includes a limited amount of usage. If exceeded, you may experience restrictions, as you are currently not billed for overages. It may take up to 1 hour to refresh.",links:h?[{name:"How billing works",url:"".concat(M.aq,"/guides/platform/billing-on-supabase")},{name:"Supabase Plans",url:"https://supabase.com/pricing"}]:[]},"data-sentry-element":"SectionContent","data-sentry-source-file":"TotalUsage.tsx",children:[j&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Ay,{}),(0,a.jsx)(x.Ay,{className:"w-3/4"}),(0,a.jsx)(x.Ay,{className:"w-1/2"})]}),_&&(0,a.jsx)(m.A,{subject:"Failed to retrieve usage data",error:f}),v&&n&&(0,a.jsxs)("div",{children:[S&&(0,a.jsx)("p",{className:"text-sm",children:N?N&&(null==n||null==(t=n.plan)?void 0:t.id)==="free"?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==n?void 0:n.plan.name})," Plan quota in this billing cycle. Upgrade your plan to continue using Supabase without restrictions."]}):N&&(null==n?void 0:n.usage_billing_enabled)===!1&&(null==n||null==(s=n.plan)?void 0:s.id)==="pro"?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==n?void 0:n.plan.name})," Plan quota in this billing cycle. Disable your spend cap to continue using Supabase without restrictions."]}):N&&(null==n?void 0:n.usage_billing_enabled)===!0?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==n?void 0:n.plan.name})," Plan quota in this billing cycle and will be charged for over-usage."]}):(0,a.jsxs)("span",{children:["You have not exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==n?void 0:n.plan.name})," Plan quota in this billing cycle."]}):(0,a.jsxs)("span",{children:["You have not exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==n?void 0:n.plan.name})," Plan quota in this billing cycle."]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 mt-3 gap-[1px] bg-border",children:[k.map((e,t)=>(0,a.jsx)("div",{className:(0,A.cn)("col-span-2 md:col-span-1 bg-sidebar space-y-4 py-4"),children:(0,a.jsx)(eg,{idx:t,slug:r,metric:e,usage:b,subscription:n,relativeToSubscription:S,className:(0,A.cn)(t%2==0?"md:pr-4":"md:pl-4")})},e.key)),E.map((e,t)=>(0,a.jsx)("div",{className:(0,A.cn)("col-span-2 md:col-span-1 bg-sidebar space-y-4 py-4"),children:(0,a.jsx)(ep,{slug:r,metric:{key:e,name:(0,y.pc)(e)+" Compute Hours",units:"hours",anchor:"compute",category:"Compute",unitName:"GB"},relativeToSubscription:S,usage:b,className:(0,A.cn)((t+k.length)%2==0?"md:pr-4":"md:pl-4")})},e)),!g&&(k.length+E.length)%2==1&&(0,a.jsx)("div",{className:"col-span-2 md:col-span-1 bg-sidebar"})]})]})]})})};var ey=s(23850);let eb=()=>{let{slug:e,projectRef:t}=(0,d.g)(),[s,i]=(0,c.useState)(),[l,C]=(0,ey.ZA)("projectRef"),[T,P]=(0,c.useState)(!1),{can:O,isLoading:R}=(0,j.Qp)(r.aG.BILLING_READ,"stripe.subscriptions"),{data:w,error:L,isLoading:M,isError:D,isSuccess:U}=(0,f.j5)({orgSlug:e}),{data:B}=(0,b.wT)({ref:null!=l?l:void 0}),G=(0,c.useMemo)(()=>{var e;return n().unix(null!=(e=null==w?void 0:w.current_period_start)?e:0).utc()},[w]),H=(0,c.useMemo)(()=>{var e;return n().unix(null!=(e=null==w?void 0:w.current_period_end)?e:0).utc()},[w]),z=(0,c.useMemo)(()=>null==s||!s.period_start||null==s||!s.period_end||n()(s.period_start.date).isSame(G)&&n()(s.period_end.date).isSame(H),[s,G,H]),q=(0,c.useMemo)(()=>{var e,t;if(null==s||null==(e=s.period_start)?void 0:e.date)return new Date(null==s||null==(t=s.period_start)?void 0:t.date).toISOString().slice(0,-5)+"Z"},[s,w]),F=(0,c.useMemo)(()=>{var e,t;return(null==s||null==(e=s.period_end)?void 0:e.date)&&n()(s.period_end.date).isAfter(n()())?n()().endOf("day").toISOString().slice(0,-5)+"Z":(null==s||null==(t=s.period_end)?void 0:t.date)?new Date(s.period_end.date).toISOString().slice(0,-5)+"Z":void 0},[s,w]),{data:Y,error:X,isLoading:K,isError:Z}=(0,y.Ym)({orgSlug:e,projectRef:t,startDate:q,endDate:F});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Usage.tsx",children:(0,a.jsx)(u.Uw,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"Usage.tsx",children:(0,a.jsx)(u.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"Usage.tsx",children:"Usage"})})}),(0,a.jsx)("div",{className:"sticky top-0 border-b bg-sidebar z-[1]",children:(0,a.jsx)(u.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Usage.tsx",children:(0,a.jsxs)("div",{className:"py-4 flex items-center space-x-4",children:[M||R?(0,a.jsxs)("div",{className:"flex lg:items-center items-start gap-3 flex-col lg:flex-row lg:justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Ay,{className:"w-48"}),(0,a.jsx)(x.Ay,{className:"w-48"})]}),(0,a.jsx)(x.Ay,{className:"w-[280px]"})]}):O?null:(0,a.jsx)(p.A,{resourceText:"view organization usage"}),D&&(0,a.jsx)(m.A,{className:"w-full",subject:"Failed to retrieve usage data",error:L}),U&&(0,a.jsxs)("div",{className:"flex lg:items-center items-start gap-3 flex-col lg:flex-row lg:justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{onChange:i,value:_.L3[0].key,options:[..._.L3,..._.PJ],loading:M,currentBillingPeriodStart:null==w?void 0:w.current_period_start,currentBillingPeriodEnd:null==w?void 0:w.current_period_end,className:"!w-48"}),(0,a.jsx)(h.S,{open:T,setOpen:P,selectedRef:l,onSelect:e=>{C(e.ref)},renderTrigger:()=>(0,a.jsx)(N.$,{block:!0,type:"default",role:"combobox",size:"tiny",className:"justify-between w-[180px]",iconRight:(0,a.jsx)(v.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),children:B?null==B?void 0:B.name:"All projects"}),renderRow:e=>{let t=l===e.ref;return(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsx)("span",{className:(0,A.cn)("truncate",t?"max-w-60":"max-w-64"),children:e.name}),t&&(0,a.jsx)(S.A,{size:16})]})},renderActions:()=>(0,a.jsx)(k.L$,{children:(0,a.jsxs)(k.h_,{className:"cursor-pointer flex items-center justify-between w-full",onSelect:()=>{P(!1),C(null)},onClick:()=>{P(!1),C(null)},children:["All projects",!l&&(0,a.jsx)(S.A,{size:16})]})})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("p",{className:(0,A.cn)("text-sm transition",M&&"opacity-50"),children:["Organization is on the"," ",(0,a.jsxs)("span",{className:"font-medium text-brand",children:[w.plan.name," Plan"]})]}),(0,a.jsx)("span",{className:"text-border-stronger",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,a.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:[G.format("DD MMM YYYY")," -"," ",H.format("DD MMM YYYY")]})]})]})]})})}),Z&&(0,a.jsx)(u.eh,{children:(0,a.jsx)(u.gu,{isFullWidth:!0,className:"pb-0",children:(0,a.jsx)(m.A,{error:X,subject:"Failed to retrieve usage statistics for organization"})})}),B?(0,a.jsx)(u.eh,{className:"mt-5",children:(0,a.jsx)(E.Z,{type:"default",title:"Usage filtered by project",description:(0,a.jsxs)("div",{children:["You are currently viewing usage for the"," ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:(null==B?void 0:B.name)||l})," ","project. Supabase uses"," ",(0,a.jsx)(o(),{href:"/docs/guides/platform/billing-on-supabase#organization-based-billing",target:"_blank",children:"organization-level billing"})," ",'and quotas. For billing purposes, we sum up usage from all your projects. To view your usage quota, set the project filter above back to "All Projects".']})})}):(0,a.jsx)(u.eh,{id:"restriction",className:"mt-5",children:(0,a.jsx)(I.R,{})}),(0,a.jsx)(ex,{orgSlug:e,projectRef:l,subscription:w,startDate:q,endDate:F,currentBillingCycleSelected:z,"data-sentry-element":"TotalUsage","data-sentry-source-file":"Usage.tsx"}),(null==w?void 0:w.plan.id)!=="free"&&(0,a.jsx)(ei,{orgDailyStats:Y,isLoadingOrgDailyStats:K}),(0,a.jsx)(en,{orgSlug:e,projectRef:l,subscription:w,currentBillingCycleSelected:z,orgDailyStats:Y,isLoadingOrgDailyStats:K,"data-sentry-element":"Egress","data-sentry-source-file":"Usage.tsx"}),(0,a.jsx)(el,{orgSlug:e,projectRef:l,subscription:w,currentBillingCycleSelected:z,orgDailyStats:Y,isLoadingOrgDailyStats:K,"data-sentry-element":"SizeAndCounts","data-sentry-source-file":"Usage.tsx"}),(0,a.jsx)(er,{orgSlug:e,projectRef:l,subscription:w,startDate:q,endDate:F,currentBillingCycleSelected:z,orgDailyStats:Y,isLoadingOrgDailyStats:K,"data-sentry-element":"Activity","data-sentry-source-file":"Usage.tsx"})]})};var ef=s(10508),ej=s(33132);let e_=()=>(0,a.jsx)(eb,{"data-sentry-element":"Usage","data-sentry-component":"OrgUsage","data-sentry-source-file":"usage.tsx"});e_.getLayout=e=>(0,a.jsx)(ef.A,{children:(0,a.jsx)(ej.A,{children:e})});let ev=e_},78633:(e,t,s)=>{"use strict";s.d(t,{Cb:()=>d,L3:()=>u,PJ:()=>m,wG:()=>c});var a=s(80263),r=s(48510),i=s(28009),n=s(38985),l=s(85024),o=s(53407);let c={API:{label:"All API usage",icon:e=>(0,a.jsx)(i.A,{size:16,className:e}),key:"api"},API_DATABASE:{label:"Database API",icon:e=>(0,a.jsx)(n.A,{size:16,className:e}),key:"api_database"},API_AUTH:{label:"Authentication",icon:e=>(0,a.jsx)(r.Nj,{size:16,className:e}),key:"api_auth"},API_STORAGE:{label:"Storage",icon:e=>(0,a.jsx)(r.wc,{size:16,className:e}),key:"api_storage"},API_REALTIME:{label:"Realtime",icon:e=>(0,a.jsx)(r.Se,{size:16,className:e}),key:"api_realtime"},INSTANCE:{label:"Instance health",icon:e=>(0,a.jsx)(l.A,{size:16,className:e}),key:"instance"},SUPAVISOR:{label:"Supavisor",icon:e=>(0,a.jsx)(o.A,{size:16,className:e}),key:"supavisor"}},d=[{key:"avg_cpu_usage",label:"Average CPU % Usage",provider:"infra-monitoring",category:c.INSTANCE},{key:"max_cpu_usage",label:"Max CPU % Usage",provider:"infra-monitoring",category:c.INSTANCE},{key:"disk_io_consumption",label:"Disk IO % Consumed",provider:"infra-monitoring",category:c.INSTANCE},{key:"disk_io_budget",label:"Disk IO % Remaining",provider:"infra-monitoring",category:c.INSTANCE},{key:"ram_usage",label:"Memory % Usage",provider:"infra-monitoring",category:c.INSTANCE},{key:"total_realtime_egress",label:"Realtime Connection Egress",provider:"daily-stats",category:c.API},{key:"total_realtime_requests",label:"Realtime Connection Requests",provider:"daily-stats",category:c.API_REALTIME},{key:"total_realtime_ingress",label:"Realtime Connection Ingress",provider:"daily-stats",category:c.API_REALTIME},{key:"total_rest_ingress",label:"API Ingress",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_egress",label:"API Egress",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_requests",label:"API Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_get_requests",label:"API GET Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_post_requests",label:"API POST Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_patch_requests",label:"API PATCH Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_delete_requests",label:"API DELETE Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_options_requests",label:"API OPTIONS Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_auth_billing_period_mau",label:"Auth Monthly Active User",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_billing_period_sso_mau",label:"Auth Monthly Active SSO User",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_ingress",label:"Auth Ingress",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_egress",label:"Auth Egress",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_requests",label:"Auth Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_get_requests",label:"Auth GET Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_post_requests",label:"Auth POST Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_patch_requests",label:"Auth PATCH Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_options_requests",label:"Auth OPTIONS Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_storage_ingress",label:"Storage Ingress",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_egress",label:"Storage Egress",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_image_render_count",label:"Storage Image Transformations",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_requests",label:"Storage Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_get_requests",label:"Storage GET Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_post_requests",label:"Storage POST Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_delete_requests",label:"Storage DELETE Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_options_requests",label:"Storage OPTIONS Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_auth_delete_requests",label:"Auth DELETE Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_egress",label:"All Egress",provider:"daily-stats",category:c.API},{key:"total_get_requests",label:"All GET Requests",provider:"daily-stats",category:c.API},{key:"total_cached_egress",label:"All Cached Egress",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_patch_requests",label:"Storage PATCH Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_requests",label:"All Requests",provider:"daily-stats",category:c.API},{key:"total_patch_requests",label:"All PATCH Requests",provider:"daily-stats",category:c.API},{key:"total_post_requests",label:"All POST Requests",provider:"daily-stats",category:c.API},{key:"total_ingress",label:"All Ingress",provider:"daily-stats",category:c.API},{key:"total_delete_requests",label:"All DELETE Requests",provider:"daily-stats",category:c.API},{key:"total_options_requests",label:"All OPTIONS Requests",provider:"daily-stats",category:c.API},{key:"total_supavisor_egress_bytes",label:"Shared Pooler Egress",provider:"daily-stats",category:c.SUPAVISOR}],u=[{key:"currentBillingCycle",label:"Current billing cycle",interval:"1d"},{key:"previousBillingCycle",label:"Previous billing cycle",interval:"1d"}],m=[{key:"7d",label:"Last 7 days",interval:"1d"},{key:"30d",label:"Last 30 days",interval:"1d"},{key:"startMonth",label:"This month",interval:"1d"}]},85024:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(86848).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},86541:(e,t,s)=>{"use strict";s.d(t,{I:()=>u,W:()=>d});var a=s(80263),r=s(52555),i=s.n(r),n=s(27695),l=s(2657),o=s(84512),c=s(99779);let d="<Specify which plan to upgrade to: Pro | Team | Enterprise>",u=e=>{var t;let{source:s,type:r="default",plan:u,href:m,disabled:g,children:p}=e,{data:h}=(0,o.s)(),x=null!=(t=null==h?void 0:h.slug)?t:"_",{billingAll:y}=(0,l.x)(["billing:all"]),b="Name: ".concat(null==h?void 0:h.name,"\nSlug: ").concat(null==h?void 0:h.slug,"\nRequested plan: ").concat(null!=u?u:d),f=y?null!=m?m:"/org/".concat(x,"/billing?panel=subscriptionPlan").concat(s?"&source=".concat(s):""):"",j=p||"Upgrade to ".concat(u),_=y?(0,a.jsx)(i(),{href:f,children:j}):(0,a.jsx)(n.Y,{queryParams:{orgSlug:x,category:"Plan_upgrade",subject:"Enquiry to upgrade ".concat(u?"to ".concat(u," "):"","plan for organization"),message:b},children:j});return(0,a.jsx)(c.$,{asChild:!0,type:r,disabled:g,"data-sentry-element":"Button","data-sentry-component":"UpgradePlanButton","data-sentry-source-file":"UpgradePlanButton.tsx",children:_})}},93426:(e,t,s)=>{"use strict";s.d(t,{hs:()=>o,rj:()=>c});var a=s(80263),r=s(58375),i=s(64634),n=s(85039),l=s(44725);let o={white:{bar:"fill-foreground",marker:"bg-foreground"},green:{bar:"fill-green-800",marker:"bg-green-800"},"dark-green":{bar:"fill-green-1000",marker:"bg-green-1000"},blue:{bar:"fill-blue-900",marker:"bg-blue-900"},yellow:{bar:"fill-yellow-800",marker:"bg-yellow-800"},"dark-yellow":{bar:"fill-yellow-1000",marker:"bg-yellow-1000"},orange:{bar:"fill-orange-800",marker:"bg-orange-800"},"dark-orange":{bar:"fill-orange-1000",marker:"bg-orange-1100"},teal:{bar:"fill-teal-600",marker:"bg-teal-700"},red:{bar:"fill-red-800",marker:"bg-red-800"},"dark-red":{bar:"fill-red-1000",marker:"bg-red-1000"},purple:{bar:"fill-purple-900",marker:"bg-purple-900"}},c=e=>[{key:"egress",name:"Egress",description:"Amount of data transmitted over all network connections",attributes:[{anchor:"egress",key:i.Lb.EGRESS,attributes:[{key:i.K5.AUTH,name:"Auth Egress",color:"yellow"},{key:i.K5.REST,name:"PostgREST Egress",color:"green"},{key:i.K5.STORAGE,name:"Storage Egress",color:"blue"},{key:i.K5.REALTIME,name:"Realtime Egress",color:"orange"},{key:i.K5.FUNCTIONS,name:"Functions Egress",color:"purple"},{key:i.K5.SUPAVISOR,name:"Shared Pooler Egress",color:"red"},{key:i.K5.LOGDRAIN,name:"Logdrain Egress",color:"teal"}],name:"Egress",unit:"bytes",description:"Contains any outgoing traffic including Database, Storage, Realtime, Auth, API, Edge Functions, Pooler and Log Drains.\nBilling is based on the total sum of uncached egress in GB throughout your billing period.\nEgress via cache hits is billed separately.",chartDescription:"The breakdown of different egress types is inclusive of cached egress, even though it is billed separately. The data refreshes every hour.",links:[{name:"Documentation",url:"".concat(n.aq,"/guides/platform/manage-your-usage/egress")}]},{anchor:"cachedEgress",key:i.Lb.CACHED_EGRESS,attributes:[{key:i.Lb.CACHED_EGRESS.toLowerCase(),color:"white"}],name:"Cached Egress",unit:"bytes",description:"Contains any outgoing traffic that is served from a cache hit. Includes API, Storage and Edge Functions.\nBilling is based on the total sum of cached egress in GB throughout your billing period.",chartDescription:"The data refreshes every hour.",links:[{name:"Documentation",url:"".concat(n.aq,"/guides/platform/manage-your-usage/egress")}]}]},{key:"sizeCount",name:"Database & Storage Size",description:"Amount of resources your project is consuming",attributes:[(null==e?void 0:e.plan.id)==="free"?{anchor:"dbSize",key:i.Lb.DATABASE_SIZE,attributes:[{key:i.Lb.DATABASE_SIZE.toLowerCase(),color:"white"}],name:"Database size",chartPrefix:"Average",unit:"bytes",description:"Database size refers to the actual amount of space used by all your database objects, as reported by Postgres.",links:[{name:"Documentation",url:"".concat(n.aq,"/guides/platform/database-size")}],chartDescription:"The data refreshes every hour.",additionalInfo:t=>{var s,n,o,c;let d=null==t?void 0:t.usages.find(e=>e.metric===i.Lb.DATABASE_SIZE),u="number"!=typeof d?(null!=(n=null==d?void 0:d.usage)?n:0)/(null!=(o=null==d?void 0:d.pricing_free_units)?o:0):0,m=d&&(null!=(c=null==d?void 0:d.pricing_free_units)?c:0)>0,g=m&&u>=r.x,p=m&&u>=1,h=null==d?void 0:d.capped,x=(null==e||null==(s=e.plan)?void 0:s.name)==="Free";return(0,a.jsx)("div",{children:(g||p)&&h&&(0,a.jsx)(l.Z,{type:p?"danger":"warning",title:p?"Exceeding database size limit":"Nearing database size limit",children:(0,a.jsx)("div",{className:"flex w-full items-center flex-col justify-center space-y-2 md:flex-row md:justify-between",children:(0,a.jsxs)("div",{children:["When you reach your database size limit, your project can go into read-only mode."," ",x?"Please upgrade your Plan.":"Disable your spend cap to scale seamlessly, and pay for over-usage beyond your Plan's quota."]})})})})}}:{anchor:"diskSize",key:"diskSize",attributes:[],name:"Disk size",chartPrefix:"Average",unit:"bytes",description:"Each Supabase project comes with a dedicated disk. Each project gets 8 GB of disk for free. Billing is based on the provisioned disk size. Disk automatically scales up when you get close to it's size.\nEach hour your project is using more than 8 GB of GP3 disk, it incurs the overages in GB-Hrs, i.e. a 16 GB disk incurs 8 GB-Hrs every hour. Extra disk size costs $0.125/GB/month ($0.000171/GB-Hr).",links:[{name:"Documentation",url:"".concat(n.aq,"/guides/platform/manage-your-usage/disk-size")},{name:"Disk Management",url:"".concat(n.aq,"/guides/platform/database-size#disk-management")}],chartDescription:""},{anchor:"storageSize",key:i.Lb.STORAGE_SIZE,attributes:[{key:i.Lb.STORAGE_SIZE.toLowerCase(),color:"white"}],name:"Storage Size",chartPrefix:"Average",unit:"bytes",description:"Sum of all objects in your storage buckets.\nBilling is prorated down to the hour and will be displayed GB-Hrs.",chartDescription:"The data refreshes every hour.",links:[{name:"Storage",url:"".concat(n.aq,"/guides/storage")}]}]},{key:"activity",name:"Activity",description:"Usage statistics that reflect the activity of your project",attributes:[{anchor:"mau",key:i.Lb.MONTHLY_ACTIVE_USERS,attributes:[{key:i.Lb.MONTHLY_ACTIVE_USERS.toLowerCase(),color:"white"}],name:"Monthly Active Users",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"Users who log in or refresh their token count towards MAU.\nBilling is based on the sum of distinct users requesting your API throughout the billing period. Resets every billing cycle.",chartDescription:"The data is refreshed over a period of 24 hours and resets at the beginning of every billing period.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"Auth",url:"".concat(n.aq,"/guides/auth")}]},{anchor:"mauSso",key:i.Lb.MONTHLY_ACTIVE_SSO_USERS,attributes:[{key:i.Lb.MONTHLY_ACTIVE_SSO_USERS.toLowerCase(),color:"white"}],name:"Monthly Active SSO Users",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"SSO users who log in or refresh their token count towards SSO MAU.\nBilling is based on the sum of distinct Single Sign-On users requesting your API throughout the billing period. Resets every billing cycle.",chartDescription:"The data refreshes over a period of 24 hours and resets at the beginning of every billing period.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"SSO with SAML 2.0",url:"".concat(n.aq,"/guides/auth/sso/auth-sso-saml")}]},{anchor:"storageImageTransformations",key:i.Lb.STORAGE_IMAGES_TRANSFORMED,attributes:[{key:i.Lb.STORAGE_IMAGES_TRANSFORMED.toLowerCase(),color:"white"}],name:"Storage Image Transformations",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"We count all images that were transformed in the billing period, ignoring any transformations.\nUsage example: You transform one image with four different size transformations and another image with just a single transformation. It counts as two, as only two images were transformed.\nBilling is based on the count of (origin) images that used transformations throughout the billing period. Resets every billing cycle.",chartDescription:"The data refreshes every 24 hours.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"Documentation",url:"".concat(n.aq,"/guides/storage/image-transformations")}]},{anchor:"funcInvocations",key:i.Lb.FUNCTION_INVOCATIONS,attributes:[{key:i.Lb.FUNCTION_INVOCATIONS.toLowerCase(),color:"white"}],name:"Edge Function Invocations",unit:"absolute",description:"Every serverless function invocation independent of response status is counted.\nBilling is based on the sum of all invocations throughout your billing period.",chartDescription:"The data refreshes every hour.",links:[{name:"Edge Functions",url:"".concat(n.aq,"/guides/functions")}]},{anchor:"realtimeMessageCount",key:i.Lb.REALTIME_MESSAGE_COUNT,attributes:[{key:i.Lb.REALTIME_MESSAGE_COUNT.toLowerCase(),color:"white"}],name:"Realtime Messages",unit:"absolute",description:"Count of messages going through Realtime. Includes database changes, broadcast and presence. \nUsage example: If you do a database change and 5 clients listen to that change via Realtime, that's 5 messages. If you broadcast a message and 4 clients listen to that, that's 5 messages (1 message sent, 4 received).\nBilling is based on the total amount of messages throughout your billing period.",chartDescription:"The data refreshes every hour.",links:[{name:"Realtime Quotas",url:"".concat(n.aq,"/guides/realtime/quotas")}]},{anchor:"realtimePeakConnections",key:i.Lb.REALTIME_PEAK_CONNECTIONS,attributes:[{key:i.Lb.REALTIME_PEAK_CONNECTIONS.toLowerCase(),color:"white"}],name:"Realtime Concurrent Peak Connections",chartPrefix:"Max",unit:"absolute",description:"Total number of successful connections. Connections attempts are not counted towards usage.\nBilling is based on the maximum amount of concurrent peak connections throughout your billing period.",chartDescription:"The data refreshes every hour.",links:[{name:"Realtime Quotas",url:"".concat(n.aq,"/guides/realtime/quotas")}]}]}]},96521:(e,t,s)=>{"use strict";s.d(t,{A:()=>g,U:()=>m});var a=s(80263),r=s(53434),i=s.n(r),n=s(76174),l=s(53239),o=s(85039),c=s(21162),d=s(99779),u=s(80100);let m=e=>{var t;let{onChange:s,value:r,options:m,className:g,loading:p,currentBillingPeriodStart:h,currentBillingPeriodEnd:x,footer:y}=e,[b,f]=(0,l.useState)(r);(0,l.useEffect)(()=>{S(r)},[p]);let j=i()().startOf("month").format(o.DX),_=i()().add(1,"month").startOf("month").format(o.DX),v=i()().format(o.DX);function S(e){switch(f(e),e){case"currentBillingCycle":s({period_start:{date:i().unix(null!=h?h:0).format(o.DX),time_period:"1d"},period_end:{date:i().unix(null!=x?x:0).format(o.DX),time_period:"today"},interval:"1d"});break;case"previousBillingCycle":s({period_start:{date:i().unix(null!=h?h:0).subtract(1,"month").format(o.DX),time_period:"1d"},period_end:{date:i().unix(null!=h?h:0).format(o.DX),time_period:"today"},interval:"1d"});break;case"10m":s({period_start:{date:i()().subtract(10,"minutes").format(o.DX),time_period:"1d"},period_end:{date:v,time_period:"today"},interval:"1m"});break;case"30m":s({period_start:{date:i()().subtract(30,"minutes").format(o.DX),time_period:"1d"},period_end:{date:v,time_period:"today"},interval:"1m"});break;case"1d":s({period_start:{date:i()().subtract(24,"hour").format(o.DX),time_period:"1d"},period_end:{date:v,time_period:"today"},interval:"1h"});break;case"3h":s({period_start:{date:i()().subtract(3,"hour").format(o.DX),time_period:"3h"},period_end:{date:v,time_period:"today"},interval:"5m"});break;case"1h":s({period_start:{date:i()().subtract(1,"hour").format(o.DX),time_period:"1h"},period_end:{date:v,time_period:"today"},interval:"1m"});break;case"7d":s({period_start:{date:i()().subtract(7,"day").format(o.DX),time_period:"7d"},period_end:{date:v,time_period:"today"},interval:"1d"});break;case"30d":s({period_start:{date:i()().subtract(30,"day").format(o.DX),time_period:"30d"},period_end:{date:v,time_period:"today"},interval:"1d"});break;case"60d":s({period_start:{date:i()().subtract(60,"day").format(o.DX),time_period:"60d"},period_end:{date:v,time_period:"today"},interval:"3d"});break;case"startMonth":s({period_start:{date:j,time_period:"startMonth"},period_end:{date:_,time_period:"endMonth"},interval:"1d"});break;default:console.warn("Unknown period encountered: ".concat(e))}}return(0,a.jsxs)(c.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"DateRangePicker","data-sentry-source-file":"DateRangePicker.tsx",children:[(0,a.jsx)(c.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"DateRangePicker.tsx",children:(0,a.jsx)(d.$,{type:"default",iconRight:(0,a.jsx)(n.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"DateRangePicker.tsx",children:(0,a.jsx)("span",{children:b&&(null==(t=m.find(e=>e.key===b))?void 0:t.label)})})}),(0,a.jsxs)(c.SQ,{side:"bottom",align:"start",className:(0,u.cn)(!y&&"w-36",g),"data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"DateRangePicker.tsx",children:[(0,a.jsx)(c.Hr,{value:b,onValueChange:e=>S(e),"data-sentry-element":"DropdownMenuRadioGroup","data-sentry-source-file":"DateRangePicker.tsx",children:m.map(e=>(0,a.jsx)(c.Ht,{value:e.key,children:e.label},e.key))}),!!y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.mB,{}),y]})]})]})},g=m}},e=>{e.O(0,[60858,15599,16110,44952,36538,43833,81285,90042,35831,47992,76984,72391,74004,40545,596,10508,18822,90636,46593,38792],()=>e(e.s=16113)),_N_E=e.O()}]);