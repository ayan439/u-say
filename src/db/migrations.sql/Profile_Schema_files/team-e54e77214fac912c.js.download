try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="91735604-0dfa-48d6-8ce7-4562ecd20de9",e._sentryDebugIdIdentifier="sentry-dbid-91735604-0dfa-48d6-8ce7-4562ecd20de9")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91562],{107:(e,t,r)=>{var l=r(50117),n=r(94277),a=Object.prototype.hasOwnProperty;e.exports=n(function(e,t,r){a.call(e,r)?e[r].push(t):l(e,r,[t])})},13916:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var l=r(80263),n=r(53239),a=r(30404),s=r(21162),i=r(80100);let o=(0,n.forwardRef)((e,t)=>{let{...r}=e;return(0,l.jsxs)(a.m_,{children:[(0,l.jsx)(a.k$,{asChild:!0,children:(0,l.jsx)(s._2,{ref:t,...r,className:(0,i.cn)(r.className,"!pointer-events-auto"),onClick:e=>{!r.disabled&&r.onClick&&r.onClick(e)},children:r.children})}),r.disabled&&void 0!==r.tooltip.content.text&&(0,l.jsx)(a.ZI,{...r.tooltip.content,children:r.tooltip.content.text})]})});o.displayName="DropdownMenuItemTooltip"},25392:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(86848).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},31647:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});var l=r(80263),n=r(53239),a=r(80100);let s=n.forwardRef((e,t)=>{let{className:r,containerClassName:s,children:i,stickyLastColumn:o,...d}=e,c=n.useRef(null),{hasHorizontalScroll:u,canScrollLeft:m,canScrollRight:f}=(e=>{let[t,r]=n.useState(!1),[l,a]=n.useState(!1),[s,i]=n.useState(!1);return n.useEffect(()=>{let l=e.current;if(!l)return;let n=()=>{let e=l.scrollWidth>l.clientWidth;if(r(e),e){let e=l.scrollLeft>0,t=l.scrollLeft<l.scrollWidth-l.clientWidth;a(e),i(t)}else a(!1),i(!1)},s=()=>{if(t){let e=l.scrollLeft>0,t=l.scrollLeft<l.scrollWidth-l.clientWidth;a(e),i(t)}};return n(),l.addEventListener("scroll",s),window.addEventListener("resize",n),()=>{l.removeEventListener("scroll",s),window.removeEventListener("resize",n)}},[e,t]),{hasHorizontalScroll:t,canScrollLeft:l,canScrollRight:s}})(c),p=(0,a.cn)("[&_td:last-child]:before:absolute [&_td:last-child]:before:top-0 [&_td:last-child]:before:-left-6","[&_td:last-child]:before:bottom-0 [&_td:last-child]:before:w-6 [&_td:last-child]:before:bg-gradient-to-l","[&_td:last-child]:before:from-black/5 dark:[&_td:last-child]:before:from-black/20 [&_td:last-child]:before:to-transparent","[&_td:last-child]:before:opacity-0 [&_td:last-child]:before:transition-all [&_td:last-child]:before:duration-400","[&_td:last-child]:before:easing-[0.24, 0.25, 0.05, 1] [&_td:last-child]:before:z-[60]","[&_th:last-child]:before:absolute [&_th:last-child]:before:top-0 [&_th:last-child]:before:-left-6","[&_th:last-child]:before:bottom-0 [&_th:last-child]:before:w-6 [&_th:last-child]:before:bg-gradient-to-l","[&_th:last-child]:before:from-black/5 dark:[&_th:last-child]:before:from-black/20 [&_th:last-child]:before:to-transparent","[&_th:last-child]:before:opacity-0 [&_th:last-child]:before:transition-all [&_th:last-child]:before:duration-400","[&_th:last-child]:before:easing-[0.24, 0.25, 0.05, 1] [&_th:last-child]:before:z-[60]");return(0,l.jsxs)("div",{className:(0,a.cn)(s,"relative"),children:[(0,l.jsx)("div",{className:(0,a.cn)("absolute inset-0 pointer-events-none z-50","before:absolute before:top-0 before:right-0 before:bottom-0 before:w-6 before:bg-gradient-to-l before:from-black/5 dark:before:from-black/20 before:to-transparent before:opacity-0 before:transition-all before:duration-400 before:easing-[0.24, 0.25, 0.05, 1]","after:absolute after:top-0 after:left-0 after:bottom-0 after:w-6 after:bg-gradient-to-r after:from-black/5 dark:after:from-black/20 after:to-transparent after:opacity-0 after:transition-all after:duration-400 after:easing-[0.24, 0.25, 0.05, 1]",u&&"hover:before:opacity-100 hover:after:opacity-100",f&&"before:opacity-100",m&&"after:opacity-100")}),(0,l.jsx)("div",{ref:c,className:(0,a.cn)("w-full overflow-auto",o&&["[&_tr>*:last-child]:sticky [&_tr>*:last-child]:z-50 [&_tr>*:last-child]:right-0","[&_tr:hover>*:last-child]:bg-transparent","[&_th>*:last-child]:bg-surface-100",p],u&&"[&_tr:hover>td:last-child]:!bg-surface-200",f&&"[&_td]:before:opacity-100 [&_tr>*:last-child]:before:opacity-100 [&_th:last-child]:before:opacity-100",r),...d,children:i})]})});s.displayName="ShadowScrollArea"},32149:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});var l=r(56947),n=r(24523),a=r(19965);async function s(e,t){let{slug:r}=e;if(!r)throw Error("slug is required");let[l,a]=await Promise.all([(0,n.Jt)("/platform/organizations/{slug}/members",{params:{path:{slug:r}},signal:t}),(0,n.Jt)("/platform/organizations/{slug}/members/invitations",{params:{path:{slug:r}},signal:t})]),{data:s,error:i}=l,{data:o,error:d}=a;return i&&(0,n.H4)(i),d&&(0,n.H4)(d),[...s,...o.invitations.map(e=>({...{invited_at:e.invited_at,invited_id:e.id,mfa_enabled:!1,username:e.invited_email.slice(0,1),primary_email:e.invited_email},role_ids:[e.role_id]}))]}let i=function(e){let{slug:t}=e,{enabled:r=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.I)({queryKey:a.O.members(t),queryFn:e=>{let{signal:r}=e;return s({slug:t},r)},enabled:r&&void 0!==t,...n})}},33132:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var l=r(80263),n=r(86510),a=r(77477),s=r(29805),i=r(6637),o=r(74763),d=r(84512),c=r(9497),u=r(98174),m=r(80100),f=r(20033),p=r(99779);let h=e=>{let{children:t}=e,{data:r}=(0,d.s)(),c=(0,o.X)({installationId:null==r?void 0:r.partner_id},{enabled:(null==r?void 0:r.managed_by)===u.Kf.VERCEL_MARKETPLACE}),h=(0,i.x)({organizationSlug:null==r?void 0:r.slug},{enabled:(null==r?void 0:r.managed_by)===u.Kf.AWS_MARKETPLACE}),{data:x,isSuccess:g}=(null==r?void 0:r.managed_by)===u.Kf.AWS_MARKETPLACE?h:c;return(0,l.jsxs)("div",{className:(0,m.cn)("h-full w-full flex flex-col overflow-hidden"),"data-sentry-component":"OrganizationLayoutContent","data-sentry-source-file":"OrganizationLayout.tsx",children:[r&&(null==r?void 0:r.managed_by)!=="supabase"&&(0,l.jsxs)(f.Fc,{variant:"default",className:"flex items-center gap-4 border-t-0 border-x-0 rounded-none",children:[(0,l.jsx)(a.A,{organization:r,showTooltip:!1,size:"medium"}),(0,l.jsxs)(f.XL,{className:"flex-1",children:["This organization is managed by ",s.N[r.managed_by],"."]}),(0,l.jsx)(p.$,{asChild:!0,type:"default",iconRight:(0,l.jsx)(n.A,{}),disabled:!g,children:(0,l.jsx)("a",{href:null==x?void 0:x.url,target:"_blank",rel:"noopener noreferrer",children:"Manage"})})]}),(0,l.jsx)("main",{className:"h-full w-full overflow-y-auto flex flex-col",children:t})]})},x=(0,c.r)(e=>{let{children:t}=e;return(0,l.jsx)(h,{"data-sentry-element":"OrganizationLayoutContent","data-sentry-component":"OrganizationLayout","data-sentry-source-file":"OrganizationLayout.tsx",children:t})})},36409:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o});var l=r(17702),n=r(24523),a=r(34983),s=r(4359);async function i(e,t,r){let{limit:l=100,page:a=0,sort:s="name_asc",search:i=""}=e,o=0===i.length?void 0:i,{data:d,error:c}=await (0,n.Jt)("/platform/projects",{params:{query:{limit:l,offset:a*l,sort:s,search:o}},signal:t,headers:{...r,Version:"2"}});return c&&(0,n.H4)(c),d}let o=function(e){let{limit:t=100,sort:r="name_asc",search:n}=e,{enabled:o=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{profile:c}=(0,a.xc)();return(0,l.q)({queryKey:s.g.infiniteList({limit:t,sort:r,search:n}),queryFn:e=>{let{signal:l,pageParam:a}=e;return i({limit:t,page:a,sort:r,search:n},l)},enabled:o&&void 0!==c,staleTime:18e5,getNextPageParam(e,r){let l=r.length;if(!(l*t>=e.pagination.count))return l},...d})}},37873:(e,t,r)=>{"use strict";r.d(t,{BS:()=>i,Dm:()=>c,HJ:()=>j,Rf:()=>g,Uw:()=>d,Vw:()=>_,Xr:()=>b,aw:()=>h,bV:()=>s,cJ:()=>f,dX:()=>u,eh:()=>o,fh:()=>y,gu:()=>m,sZ:()=>p,tn:()=>v,xp:()=>x});var l=r(80263),n=r(53239),a=r(80100);let s="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-10",o=(0,n.forwardRef)((e,t)=>{let{className:r,bottomPadding:n,size:s="default",...o}=e;return(0,l.jsx)("div",{ref:t,...o,className:(0,a.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[s],i,n&&"pb-16",r)})}),d=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("header",{...n,ref:t,className:(0,a.cn)("w-full","flex-col gap-3 py-6",r)})}),c=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("h1",{ref:t,...n,className:(0,a.cn)(r)})}),u=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("p",{ref:t,...n,className:(0,a.cn)("text-sm text-foreground-light",r)})}),m=(0,n.forwardRef)((e,t)=>{let{className:r,isFullWidth:n,topPadding:s,...i}=e;return(0,l.jsx)("div",{ref:t,...i,className:(0,a.cn)("flex flex-col first:pt-12 py-6",n?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",r)})}),f=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,...n,className:(0,a.cn)("w-full h-px bg-border",r)})}),p=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("h3",{ref:t,...n,className:(0,a.cn)("text-foreground text-xl",r)})}),h=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("p",{ref:t,...n,className:(0,a.cn)("text-sm text-foreground-light",r)})}),x=(0,n.forwardRef)((e,t)=>{let{className:r,children:n,title:s,...i}=e;return(0,l.jsxs)("div",{ref:t,...i,className:(0,a.cn)("col-span-4 xl:col-span-5 prose text-sm",r),children:[s&&(0,l.jsx)("h2",{children:s}),n]})}),g=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,...n,className:(0,a.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",r)})}),v=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,...n,className:(0,a.cn)("flex flex-col gap-3 items-center",r)})}),j=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,...n,className:(0,a.cn)("flex w-full items-center",r)})}),y=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,...n,className:(0,a.cn)("flex flex-row gap-3",r)})}),b=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,...n,className:(0,a.cn)("flex flex-col gap-3","min-w-[420px]",r)})}),_=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,...n,className:(0,a.cn)(s,i,"my-8 flex flex-col gap-8",r)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",f.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",x.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",v.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",y.displayName="ScaffoldActionsGroup",_.displayName="ScaffoldContainerLegacy",p.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},57125:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var l=r(80263),n=r(98103),a=r(61113),s=r(86510),i=r(52555),o=r.n(i),d=r(53239),c=r(99779);let u=(0,d.forwardRef)((e,t)=>{let{icon:r,title:i,description:u,url:m,urlLabel:f="Read more",defaultVisibility:p=!1,hideCollapse:h=!1,button:x,className:g="",block:v=!1}=e,[j,y]=(0,d.useState)(p);return(0,l.jsx)("div",{ref:t,role:"alert",className:"".concat(v?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(g),children:(0,l.jsxs)("div",{className:"flex flex-col px-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[r&&(0,l.jsx)("span",{className:"text-foreground-lighter",children:r}),(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsx)("h5",{className:"text-foreground",children:i})})]}),u&&!h?(0,l.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>y(!j),children:j?(0,l.jsx)(n.A,{size:14,strokeWidth:1.5}):(0,l.jsx)(a.A,{size:14,strokeWidth:1.5})}):null]}),(u||m||x)&&(0,l.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(j?"mt-3":""),style:{maxHeight:500*!!j},children:[(0,l.jsx)("div",{className:"text-foreground-light text-sm",children:u}),m&&(0,l.jsx)("div",{children:(0,l.jsx)(c.$,{asChild:!0,type:"default",icon:(0,l.jsx)(s.A,{}),children:(0,l.jsx)(o(),{href:m,target:"_blank",rel:"noreferrer",children:f})})}),x&&(0,l.jsx)("div",{children:x})]})]})})});u.displayName="InformationBox";let m=u},67537:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/org/[slug]/team",function(){return r(69602)}])},69602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>tt});var l=r(80263),n=r(31092),a=r(53239),s=r(22891),i=r(37873),o=r(41273),d=r(94240),c=r(36409),u=r(85039),m=r(44725),f=r(64758),p=r(32981),h=r(60045),x=r(52555),g=r.n(x),v=r(87494),j=r(73969),y=r(10663),b=r(23729),_=r(57125),w=r(30691),N=r(86541),S=r(32144),R=r(80251),I=r(24523),C=r(19965),A=r(87834);async function z(e){let{slug:t,email:r,roleId:l,projects:n}=e,a={email:r,role_id:l};void 0!==n&&(a.role_scoped_projects=n);let{data:s,error:i}=await (0,I.bE)("/platform/organizations/{slug}/members/invitations",{params:{path:{slug:t}},body:a});return i&&(0,I.H4)(i),s}let k=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,S.jE)();return(0,R.n)({mutationFn:e=>z(e),async onSuccess(t,r,n){let{slug:a}=r;await Promise.all([l.invalidateQueries({queryKey:A.O.rolesV2(a)}),l.invalidateQueries({queryKey:C.O.members(a)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,l){void 0===t?j.oR.error("Failed to update member role: ".concat(e.message)):t(e,r,l)},...r})};var T=r(32149),M=r(96698),E=r(80090),q=r(2657),L=r(84512),O=r(34983),B=r(95137),F=r(65887),D=r(72608),P=r(66329),Q=r(27371),K=r(99779),H=r(44053);let U=(e,t,r)=>{let{permissions:l,organizationSlug:n}=(0,E.GU)(r,e,void 0!==r&&void 0!==e),a=[],s=[];return t&&e&&t.forEach(e=>{(0,E.IT)(l,h.aG.CREATE,"auth.subject_roles",{resource:{role_id:e.id}},n)&&a.push(e.id),(0,E.IT)(l,h.aG.DELETE,"auth.subject_roles",{resource:{role_id:e.id}},n)&&s.push(e.id)}),{rolesAddable:a,rolesRemovable:s}},V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(e=>{var r;let[l]=null!=(r=e.role_ids)?r:[],n=t.find(e=>e.id===l);return(null==n?void 0:n.name)==="Owner"&&!e.invited_at}).length>1},W=()=>{var e,t;let{slug:r}=(0,s.g)(),{profile:n}=(0,O.xc)(),{data:i}=(0,L.s)(),{permissions:o}=(0,E.GU)(),{organizationMembersCreate:c}=(0,q.x)(["organization_members:create"]),[m,f]=(0,a.useState)(!1),[x,S]=(0,a.useState)(!1),{data:R}=(0,T.Q)({slug:r}),{data:I,isSuccess:C}=(0,d.KQ)({slug:r}),A=null!=(e=null==I?void 0:I.org_scoped_roles)?e:[],z=null==i?void 0:i.plan,V=(0,M.cC)(r),W=null==R?void 0:R.find(e=>e.gotrue_id===(null==n?void 0:n.gotrue_id)),G=1===(null!=(t=null==W?void 0:W.role_ids)?t:[]).length&&A.some(e=>e.id===(null==W?void 0:W.role_ids[0])),{rolesAddable:$}=U(null==i?void 0:i.slug,A,null!=o?o:[]),J=G&&$.length>0&&A.some(e=>{let{id:t}=e;return(0,E.IT)(o,h.aG.CREATE,"user_invites",{resource:{role_id:t}},null==i?void 0:i.slug)}),{mutate:X,isLoading:Y}=k(),Z=y.Ik({email:y.Yj().email("Must be a valid email address").min(1,"Email is required"),role:y.Yj().min(1,"Role is required"),applyToOrg:y.zM(),projectRef:y.Yj()}),ee=(0,v.mN)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,p.u)(Z),defaultValues:{email:"",role:"",applyToOrg:!0,projectRef:""}}),{applyToOrg:et,projectRef:er}=ee.watch(),el=async e=>{if(!r)return console.error("Slug is required");if((null==n?void 0:n.id)===void 0)return console.error("Profile ID required");let t=A.find(e=>"Developer"===e.name),l=(null!=R?R:[]).find(t=>t.primary_email===e.email.toLowerCase());if(void 0!==l)if(l.invited_id)return(0,j.oR)("User has already been invited to this organization");else return(0,j.oR)("User is already in this organization");X({slug:r,email:e.email.toLowerCase(),roleId:Number(e.role),...!e.applyToOrg&&e.projectRef?{projects:[e.projectRef]}:{}},{onSuccess:()=>{var e;j.oR.success("Successfully sent invitation to new member"),f(!m),ee.reset({email:"",role:null!=(e=null==t?void 0:t.id.toString())?e:"",applyToOrg:!0,projectRef:""})}})};return(0,a.useEffect)(()=>{if(C&&m){let e=A.find(e=>"Developer"===e.name);void 0!==e&&ee.setValue("role",e.id.toString())}},[C,m]),(0,l.jsxs)(B.lG,{open:m,onOpenChange:f,"data-sentry-element":"Dialog","data-sentry-component":"InviteMemberButton","data-sentry-source-file":"InviteMemberButton.tsx",children:[(0,l.jsx)(B.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsx)(b.G,{type:"primary",disabled:!J,className:"pointer-events-auto flex-grow md:flex-grow-0",onClick:()=>f(!0),tooltip:{content:{side:"bottom",text:c?J?void 0:"You need additional permissions to invite a member to this organization":"Inviting members is currently disabled"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"InviteMemberButton.tsx",children:"Invite member"})}),(0,l.jsxs)(B.Cf,{size:"medium","data-sentry-element":"DialogContent","data-sentry-source-file":"InviteMemberButton.tsx",children:[(0,l.jsx)(B.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsx)(B.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"InviteMemberButton.tsx",children:"Invite a member to this organization"})}),(0,l.jsx)(B.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"InviteMemberButton.tsx"}),(0,l.jsx)(F.lV,{...ee,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsxs)("form",{id:"organization-invitation",className:"flex flex-col gap-y-4",onSubmit:ee.handleSubmit(el),children:[(0,l.jsxs)(B.OO,{className:"flex flex-col gap-y-4 pb-2","data-sentry-element":"DialogSection","data-sentry-source-file":"InviteMemberButton.tsx",children:[V&&(0,l.jsx)(F.zB,{name:"applyToOrg",control:ee.control,render:e=>{let{field:t}=e;return(0,l.jsx)(H.M,{layout:"flex",label:"Apply role to all projects in the organization",children:(0,l.jsx)(F.MJ,{children:(0,l.jsx)(D.d,{checked:t.value,onCheckedChange:e=>ee.setValue("applyToOrg",e)})})})}}),(0,l.jsx)(F.zB,{name:"role",control:ee.control,render:e=>{var t,r;let{field:n}=e;return(0,l.jsx)(H.M,{label:"Member role",children:(0,l.jsx)(F.MJ,{children:(0,l.jsxs)(P.l6,{value:n.value,onValueChange:e=>ee.setValue("role",e),children:[(0,l.jsx)(P.bq,{className:"text-sm capitalize",children:null!=(r=null==(t=A.find(e=>e.id===Number(n.value)))?void 0:t.name)?r:"Unknown"}),(0,l.jsx)(P.gC,{children:(0,l.jsx)(P.s3,{children:A.map(e=>{let t=$.includes(e.id);return(0,l.jsxs)(P.eb,{value:e.id.toString(),className:"text-sm [&>span:nth-child(2)]:w-full [&>span:nth-child(2)]:flex [&>span:nth-child(2)]:items-center [&>span:nth-child(2)]:justify-between",disabled:!t,children:[(0,l.jsx)("span",{children:e.name}),!t&&(0,l.jsx)("span",{children:"Additional permissions required to assign role"})]},e.id)})})})]})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"InviteMemberButton.tsx"}),!et&&(0,l.jsx)(F.zB,{name:"projectRef",control:ee.control,render:e=>{let{field:t}=e;return(0,l.jsx)(H.M,{label:"Select a project",description:"You can assign roles to multiple projects once the invite is accepted",children:(0,l.jsx)(F.MJ,{children:(0,l.jsx)(w.S,{fetchOnMount:!0,sameWidthAsTrigger:!0,checkPosition:"left",selectedRef:er,open:x,setOpen:S,searchPlaceholder:"Search project...",onSelect:e=>t.onChange(e.ref),onInitialLoad:e=>{var r,l;return t.onChange(null!=(l=null==(r=e[0])?void 0:r.ref)?l:"")}})})})}}),(0,l.jsx)(F.zB,{name:"email",control:ee.control,render:e=>{let{field:t}=e;return(0,l.jsx)(H.M,{label:"Email address",children:(0,l.jsx)(F.MJ,{children:(0,l.jsx)(Q.p,{autoFocus:!0,...t,autoComplete:"off",disabled:Y,placeholder:"Enter email address"})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"InviteMemberButton.tsx"}),(0,l.jsx)(_.A,{defaultVisibility:!1,title:"Single Sign-on (SSO) login option available",hideCollapse:!1,description:(0,l.jsxs)("div",{className:"space-y-4 mb-1",children:[(0,l.jsx)("p",{children:"Supabase offers single sign-on (SSO) as a login option to provide additional account security for your team. This allows company administrators to enforce the use of an identity provider when logging into Supabase."}),(0,l.jsx)("p",{children:"This is only available for organizations on Team Plan or above."}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(K.$,{asChild:!0,type:"default",children:(0,l.jsx)(g(),{href:"".concat(u.aq,"/guides/platform/sso"),target:"_blank",rel:"noreferrer",children:"Learn more"})}),((null==z?void 0:z.id)==="free"||(null==z?void 0:z.id)==="pro")&&(0,l.jsx)(N.I,{source:"inviteMemberSSO",plan:"Team"})]})]}),"data-sentry-element":"InformationBox","data-sentry-source-file":"InviteMemberButton.tsx"})]}),(0,l.jsx)(B.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"InviteMemberButton.tsx"}),(0,l.jsx)(B.OO,{className:"pt-0","data-sentry-element":"DialogSection","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsx)(K.$,{block:!0,htmlType:"submit",loading:Y,"data-sentry-element":"Button","data-sentry-source-file":"InviteMemberButton.tsx",children:"Send invitation"})})]})})]})]})};var G=r(62284),$=r(12123),J=r(44168),X=r(53931),Y=r(53667),Z=r.n(Y),ee=r(78039),et=r(18985),er=r(78511),el=r(30404),en=r(13031),ea=r(23892),es=r(68152),ei=r(25392),eo=r(74310),ed=r(77477),ec=r(96422),eu=r(56947),em=r(4359);async function ef(e){let{signal:t,headers:r}=e,{data:l,error:n}=await (0,I.Jt)("/platform/projects",{signal:t,headers:r});return n&&(0,I.H4)(n),{projects:l}}let ep=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{profile:r}=(0,O.xc)();return(0,eu.I)({queryKey:em.g.list(),queryFn:e=>{let{signal:t}=e;return ef({signal:t})},enabled:e&&void 0!==r,staleTime:18e5,...t})};var eh=r(77192),ex=r(80100),eg=r(21650),ev=r(28243),ej=r(97757),ey=r(16488);function eb(e){let t=new Date(e);return!((new Date().valueOf()-t.valueOf())/1e3/60/60<24)}var e_=r(77444);let ew=(0,r(86848).A)("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);var eN=r(33922),eS=r(13916);async function eR(e){let{slug:t,id:r}=e,{error:l}=await (0,I.yH)("/platform/organizations/{slug}/members/invitations/{id}",{params:{path:{slug:t,id:r}}});return l&&(0,I.H4)(l),!0}let eI=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,S.jE)();return(0,R.n)({mutationFn:e=>eR(e),async onSuccess(t,r,n){let{slug:a,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries({queryKey:A.O.rolesV2(a)}),l.invalidateQueries({queryKey:C.O.members(a)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,l){void 0===t?j.oR.error("Failed to delete invitation: ".concat(e.message)):t(e,r,l)},...r})};async function eC(e){let{slug:t,gotrueId:r}=e,{data:l,error:n}=await (0,I.yH)("/platform/organizations/{slug}/members/{gotrue_id}",{params:{path:{slug:t,gotrue_id:r}}});return n&&(0,I.H4)(n),l}let eA=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,S.jE)();return(0,R.n)({mutationFn:e=>eC(e),async onSuccess(t,r,n){let{slug:a}=r;await Promise.all([l.invalidateQueries({queryKey:C.O.members(a)}),l.invalidateQueries({queryKey:C.O.roles(a)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,l){void 0===t?j.oR.error("Failed to remove member: ".concat(e.message)):t(e,r,l)},...r})};var ez=r(95742),ek=r(21162),eT=r(68421),eM=r(80814),eE=r(22238),eq=r(28202);let eL=()=>{var e,t;let r=(0,eM.useRouter)(),{slug:n}=(0,s.g)(),{profile:i}=(0,O.xc)(),{data:o}=(0,L.s)(),{organizationMembersDelete:c}=(0,q.x)(["organization_members:delete"]),[u,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[h,x]=(0,eq.U)(s.rS.LAST_VISITED_ORGANIZATION,""),{refetch:g}=(0,eE.Ad)(),{data:v}=(0,T.Q)({slug:n}),{data:y}=(0,d.KQ)({slug:n}),_=null!=(t=null==y?void 0:y.org_scoped_roles)?t:[],w=null==v?void 0:v.find(e=>e.gotrue_id===(null==i?void 0:i.gotrue_id)),N=null==w||null==(e=w.role_ids)?void 0:e[0],S=_.find(e=>e.id===N),R=(null==S?void 0:S.name)==="Administrator",I=null==o?void 0:o.is_owner,C=!I||I&&V(v,_),{mutate:A}=eA({onSuccess:async()=>{m(!1),p(!1),await g(),j.oR.success("Successfully left ".concat(null==o?void 0:o.name)),x(""),r.push("/organizations")},onError:e=>{m(!1),j.oR.error("Failed to leave organization: ".concat(null==e?void 0:e.message))}}),z=async()=>n?i?void(m(!0),A({slug:n,gotrueId:i.gotrue_id})):console.error("Profile is required"):console.error("Org slug is required");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.G,{type:"default",disabled:!C||!c||u,onClick:()=>p(!0),tooltip:{content:{side:"bottom",text:C?c?void 0:"Unable to leave organization":"An organization requires at least 1 owner"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"LeaveTeamButton.tsx",children:"Leave team"}),(0,l.jsx)(eT.A,{size:"medium",visible:f,title:"Confirm to leave organization",confirmLabel:"Leave",variant:"warning",alert:{title:"All of your user content will be permanently removed.",description:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Leaving the organization will delete all of your saved content in the projects of the organization, which includes:"}),(0,l.jsxs)("ul",{className:"list-disc pl-4",children:[(0,l.jsxs)("li",{children:["SQL snippets ",(0,l.jsx)("span",{className:"text-foreground",children:"(both private and shared)"})]}),(0,l.jsx)("li",{children:"Custom reports"}),(0,l.jsx)("li",{children:"Log Explorer queries"})]}),(I||R)&&(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("p",{children:(0,l.jsx)("span",{className:"text-foreground",children:"Leaving won't remove your payment method or stop payments."})}),(0,l.jsxs)("ul",{className:"list-disc pl-4",children:[(0,l.jsx)("li",{children:"The current payment method will remain active and may still be charged after you leave."}),(0,l.jsx)("li",{children:"The billing address will remain unchanged."})]})]})]})},onCancel:()=>p(!1),onConfirm:()=>z(),"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"LeaveTeamButton.tsx",children:(0,l.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to leave this organization? This is permanent."})})]})};var eO=r(84305),eB=r.n(eO),eF=r(65346),eD=r(20033),eP=r(60793),eQ=r(61548),eK=r(29244);async function eH(e){let{slug:t,gotrueId:r,roleId:l,projects:n}=e,a={role_id:l};void 0!==n&&(a.role_scoped_projects=n);let{data:s,error:i}=await (0,I.F6)("/platform/organizations/{slug}/members/{gotrue_id}",{params:{path:{slug:t,gotrue_id:r}},body:a,headers:{Version:"2"}});return i&&(0,I.H4)(i),s}let eU=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,S.jE)();return(0,R.n)({mutationFn:e=>eH(e),async onSuccess(t,r,n){let{slug:a,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries({queryKey:A.O.rolesV2(a)}),l.invalidateQueries({queryKey:C.O.members(a)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,l){void 0===t?j.oR.error("Failed to update member role: ".concat(e.message)):t(e,r,l)},...r})};async function eV(e){let{slug:t,gotrueId:r,roleId:l}=e,{data:n,error:a}=await (0,I.yH)("/platform/organizations/{slug}/members/{gotrue_id}/roles/{role_id}",{params:{path:{slug:t,gotrue_id:r,role_id:l}}});return a&&(0,I.H4)(a),n}let eW=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,S.jE)();return(0,R.n)({mutationFn:e=>eV(e),async onSuccess(t,r,n){let{slug:a,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries({queryKey:A.O.rolesV2(a)}),l.invalidateQueries({queryKey:C.O.members(a)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,l){void 0===t?j.oR.error("Failed to unassign member role: ".concat(e.message)):t(e,r,l)},...r})};async function eG(e){let{slug:t,gotrueId:r,roleId:l,roleName:n,projects:a}=e,{data:s,error:i}=await (0,I.yJ)("/platform/organizations/{slug}/members/{gotrue_id}/roles/{role_id}",{params:{path:{slug:t,gotrue_id:r,role_id:l}},body:{name:n,role_scoped_projects:a}});return i&&(0,I.H4)(i),s}let e$=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,S.jE)();return(0,R.n)({mutationFn:e=>eG(e),async onSuccess(t,r,n){let{slug:a,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries({queryKey:A.O.rolesV2(a)}),l.invalidateQueries({queryKey:C.O.members(a)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,l){void 0===t?j.oR.error("Failed to update member role: ".concat(e.message)):t(e,r,l)},...r})};var eJ=r(107),eX=r.n(eJ);let eY=(e,t,r)=>{let{org_scoped_roles:l,project_scoped_roles:n}=t;return e.role_ids.map(e=>{let t=l.find(t=>t.id===e);if(void 0!==t)return{ref:void 0,roleId:t.id};let a=n.find(t=>t.id===e);if(void 0!==a){var s;return(null!=(s=null==a?void 0:a.project_ids)?s:[]).map(e=>r.find(t=>t.id===e)).map(e=>({ref:null==e?void 0:e.ref,projectId:null==e?void 0:e.id,roleId:a.id,baseRoleId:a.base_role_id}))}}).filter(Boolean).flat().filter(e=>"baseRoleId"in e?void 0!==e.ref:e)},eZ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,l=[],n=[],a=[];return e.forEach(e=>{let r=t.find(t=>e.ref===t.ref);void 0===r?l.push(e):r.roleId!==e.roleId&&a.push({ref:r.ref,originalRole:e.roleId,originalBaseRole:e.baseRoleId,updatedRole:r.roleId})}),t.forEach(t=>{void 0===e.find(e=>t.ref===e.ref)&&n.push(t)}),{removed:l.map(e=>{var t;return{...e,projectId:null==(t=r.find(t=>t.ref===e.ref))?void 0:t.id}}),added:n.map(e=>{var t;return{...e,projectId:null==(t=r.find(t=>t.ref===e.ref))?void 0:t.id}}),updated:a.map(e=>{var t;return{...e,projectId:null==(t=r.find(t=>t.ref===e.ref))?void 0:t.id}})}},e0=e=>{var t,r;let{visible:n,member:i,projectsRoleConfiguration:o,onClose:c}=e,{slug:u}=(0,s.g)(),m=(0,S.jE)(),{data:f}=(0,L.s)(),p=(0,M.cC)(u),{data:h}=(0,d.KQ)({slug:null==f?void 0:f.slug}),{data:x}=ep({enabled:p&&n}),g=null!=(t=null==x?void 0:x.projects)?t:[],[v,y]=(0,a.useState)(!1),{mutateAsync:b}=eU(),{mutateAsync:_}=eW({onError:()=>{}}),{mutateAsync:w}=e$(),N=null!=(r=null==h?void 0:h.org_scoped_roles)?r:[],{org_scoped_roles:R,project_scoped_roles:I}=null!=h?h:{org_scoped_roles:[],project_scoped_roles:[]},z=(null!=g?g:[]).filter(e=>e.organization_id===(null==f?void 0:f.id)),k=eZ(void 0!==h?eY(i,h,null!=g?g:[]):[],o,null!=g?g:[]),T=async()=>{if(void 0===u)return console.error("Slug is required");y(!0);let e=i.gotrue_id,t=i.role_ids.map(e=>[...R,...I].find(t=>t.id===e)).map(e=>(null==e?void 0:e.project_ids)?{...e,project_ids:e.project_ids.filter(e=>z.some(t=>e===t.id))}:e).filter(Boolean);if(1===o.length&&void 0===o[0].ref)try{await b({slug:u,gotrueId:e,roleId:o[0].roleId}),j.oR.success("Successfully updated role for ".concat(i.username)),c(!0)}catch(e){j.oR.error("Failed to update role: ".concat(e.message))}finally{y(!1);return}let{toRemove:r,toAssign:l,toUpdate:n}=((e,t)=>{let{removed:r,added:l,updated:n}=t,a=[],s=[],i=[],o=eX()(l,"roleId"),d=eX()(r,"roleId"),c=eX()(n,"originalRole"),u=eX()(n,"updatedRole"),m=e.filter(e=>{var t;return(null!=(t=null==e?void 0:e.project_ids)?t:[]).length>0}).map(e=>e.base_role_id);return e.forEach(e=>{var t,s,m,f,p,h,x,g;let v=e.project_ids;if(null===v)return a.push(e.id);let j=v.every(e=>{let t=r.map(e=>e.projectId).some(t=>t===e),l=n.map(e=>e.projectId).some(t=>t===e);return t||l}),y=l.some(t=>t.roleId===e.base_role_id),b=n.some(t=>t.updatedRole===e.base_role_id);if(j&&!y&&!b)return a.push(e.id);let _=null!=(p=null==(t=o[e.base_role_id])?void 0:t.map(e=>e.projectId))?p:[],w=null!=(h=null==(s=d[e.id])?void 0:s.map(e=>e.projectId))?h:[],N=null!=(x=null==(m=c[e.id])?void 0:m.map(e=>e.projectId))?x:[],S=null!=(g=null==(f=u[e.base_role_id])?void 0:f.map(e=>e.projectId))?g:[],R=v.filter(e=>!w.includes(e)).filter(e=>!N.includes(e)).concat(_).concat(S);eB()(v,R)||i.push({roleId:e.id,projectIds:R.sort((e,t)=>e-t)})}),Object.keys(o).forEach(e=>{m.includes(Number(e))||s.push({roleId:Number(e),projectIds:o[e].map(e=>e.projectId).sort((e,t)=>e-t)})}),Object.keys(u).forEach(e=>{m.includes(Number(e))||s.push({roleId:Number(e),projectIds:u[e].map(e=>e.projectId).sort((e,t)=>e-t)})}),{toRemove:a.sort((e,t)=>e-t),toAssign:s,toUpdate:i}})(t,k);try{for(let{roleId:t,projectIds:r}of l)await b({slug:u,gotrueId:e,roleId:t,projects:r.map(e=>{var t;return null==g||null==(t=g.find(t=>t.id===e))?void 0:t.ref}),skipInvalidation:!0});for(let t of r)await _({slug:u,gotrueId:e,roleId:t,skipInvalidation:!0});for(let{roleId:t,projectIds:r}of n){var a;await w({slug:u,gotrueId:e,roleId:t,roleName:null==(a=I.find(e=>e.id===t))?void 0:a.name,projects:r.map(e=>{var t;return null==g||null==(t=g.find(t=>t.id===e))?void 0:t.ref}),skipInvalidation:!0})}await Promise.all([m.invalidateQueries({queryKey:A.O.rolesV2(u)}),m.invalidateQueries({queryKey:C.O.members(u)})]),j.oR.success("Successfully updated role for ".concat(i.username)),c(!0)}catch(e){j.oR.error("Failed to update role: ".concat(e.message))}finally{y(!1);return}};return(0,l.jsx)(eT.A,{size:"medium",visible:n,loading:v,title:"Confirm to change roles of member",confirmLabel:"Update roles",confirmLabelLoading:"Updating",onCancel:()=>c(),onConfirm:T,"data-sentry-element":"ConfirmationModal","data-sentry-component":"UpdateRolesConfirmationModal","data-sentry-source-file":"UpdateRolesConfirmationModal.tsx",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,l.jsxs)("p",{className:"text-sm text-foreground-light",children:["You are making the following changes to the role of"," ",(0,l.jsx)("span",{className:"text-foreground",children:i.username})," in the organization"," ",(0,l.jsx)("span",{className:"text-foreground",children:null==f?void 0:f.name}),":"]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[0!==k.removed.length&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm",children:["Removing ",k.removed.length," role",k.removed.length>1?"s":""," for user:"]}),(0,l.jsx)("ul",{className:"list-disc pl-6",children:k.removed.map((e,t)=>{var r,n,a;let s=null!=(r=R.find(t=>t.id===e.roleId))?r:I.find(t=>t.id===e.roleId),i=z.find(t=>t.ref===e.ref),o=(null!=(n=null==s?void 0:s.name)?n:"Unknown").split("_")[0];return(0,l.jsxs)("li",{className:"text-sm text-foreground-light",children:[(0,l.jsx)("span",{className:"text-foreground",children:o})," on"," ",(0,l.jsx)("span",{className:void 0!==i?"text-foreground":"",children:null!=(a=null==i?void 0:i.name)?a:"organization"})]},"update-".concat(t))})})]}),0!==k.added.length&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm",children:["Adding ",k.added.length," role",k.added.length>1?"s":""," for user:"]}),(0,l.jsx)("ul",{className:"list-disc pl-6",children:k.added.map((e,t)=>{var r;let n=N.find(t=>t.id===e.roleId),a=z.find(t=>t.ref===e.ref);return(0,l.jsxs)("li",{className:"text-sm text-foreground-light",children:[(0,l.jsx)("span",{className:"text-foreground",children:null==n?void 0:n.name})," on"," ",(0,l.jsx)("span",{className:void 0!==a?"text-foreground":"",children:null!=(r=null==a?void 0:a.name)?r:"organization"})]},"update-".concat(t))})})]}),0!==k.updated.length&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm",children:["Updating ",k.updated.length," role",k.updated.length>1?"s":""," for user:"]}),(0,l.jsx)("ul",{className:"list-disc pl-6",children:k.updated.map((e,t)=>{var r,n,a,s;let i=null!=(r=R.find(t=>t.id===e.originalRole))?r:I.find(t=>t.id===e.originalRole),o=R.find(t=>t.id===e.updatedRole),d=z.find(t=>t.ref===e.ref),c=(null!=(n=null==i?void 0:i.name)?n:"Unknown").split("_")[0];return(0,l.jsxs)("li",{className:"text-sm text-foreground-light",children:["From ",(0,l.jsx)("span",{className:"text-foreground",children:c})," to"," ",(0,l.jsx)("span",{className:"text-foreground",children:null!=(a=null==o?void 0:o.name)?a:"Unknown"})," on"," ",(0,l.jsx)("span",{className:void 0!==d?"text-foreground":"",children:null!=(s=null==d?void 0:d.name)?s:"organization"})]},"update-".concat(t))})})]})]}),(0,l.jsx)("p",{className:"text-sm text-foreground",children:"By changing the role of this member their permissions will change."})]})})},e1=e=>{var t,r,n,i,c;let{visible:m,member:f,onClose:p}=e,{slug:h}=(0,s.g)(),{data:x}=(0,L.s)(),g=(0,M.cC)(h),{data:v,isSuccess:j}=(0,d.KQ)({slug:h}),{data:y}=ep({enabled:g&&m}),_=null!=(n=null==y?void 0:y.projects)?n:[],{data:w}=(0,ez.m)(),N=null!=(i=null==v?void 0:v.org_scoped_roles)?i:[],S=null!=(c=null==v?void 0:v.project_scoped_roles)?c:[],{rolesAddable:R,rolesRemovable:I}=U(null==x?void 0:x.slug,N.concat(S),null!=w?w:[]),C=N.every(e=>!R.includes(e.id)),[A,z]=(0,a.useState)(!1),[k,T]=(0,a.useState)(!1),[E,q]=(0,a.useState)([]),O=void 0!==v?eY(f,v,null!=_?_:[]):[],B=1===O.length&&N.find(e=>e.id===O[0].roleId)?"org-scope":"project-scope",F=(null!=_?_:[]).filter(e=>e.organization_id===(null==x?void 0:x.id)),Q=1===E.length&&(null==(t=E[0])?void 0:t.ref)===void 0,H=E.length>0,V=null==(r=N.find(e=>"Developer"===e.name))?void 0:r.id,W=F.filter(e=>!E.some(t=>t.ref===e.ref)),G=F.length-W.length,$=O.length!==W.length,J=eB()(E,O),X=e=>{q(E.concat({ref:e,roleId:null!=V?V:N[0].id})),T(!1)};return(0,a.useEffect)(()=>{m&&j&&q(eY(f,v,null!=_?_:[]))},[m,j]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eF.cj,{open:m,onOpenChange:()=>p(),"data-sentry-element":"Sheet","data-sentry-source-file":"UpdateRolesPanel.tsx",children:(0,l.jsx)(eF.h,{showClose:!1,size:"default",className:(0,ex.cn)("bg-surface-200 p-0 flex flex-row gap-0 !min-w-[400px]"),"data-sentry-element":"SheetContent","data-sentry-source-file":"UpdateRolesPanel.tsx",children:(0,l.jsxs)("div",{className:(0,ex.cn)("flex flex-col grow w-full"),children:[(0,l.jsxs)(eF.Fm,{className:(0,ex.cn)("py-3 flex flex-row justify-between gap-x-4 items-center border-b"),"data-sentry-element":"SheetHeader","data-sentry-source-file":"UpdateRolesPanel.tsx",children:[(0,l.jsxs)("p",{className:"truncate",title:"Manage access for ".concat(f.username),children:["Manage access for ",f.username]}),(0,l.jsx)(o.A,{href:"".concat(u.aq,"/guides/platform/access-control"),"data-sentry-element":"DocsButton","data-sentry-source-file":"UpdateRolesPanel.tsx"})]}),(0,l.jsxs)(eF.Xc,{className:"h-full overflow-auto flex flex-col gap-y-4","data-sentry-element":"SheetSection","data-sentry-source-file":"UpdateRolesPanel.tsx",children:[g&&(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)(D.d,{disabled:C,checked:Q,onCheckedChange:e=>{let t=null!=V?V:N[0].id;e?"org-scope"===B?q(O):q([{ref:void 0,roleId:t}]):"project-scope"===B?q(O):q(F.map(e=>({ref:e.ref,projectId:e.id,roleId:t})))}}),(0,l.jsx)("p",{className:"text-sm",children:"Apply roles to all projects in the organization"})]}),0===E.length&&(0,l.jsxs)(eD.Fc,{children:[(0,l.jsx)(eP.id,{}),(0,l.jsx)(eD.XL,{children:"Team members need to be assigned at least one role"}),(0,l.jsx)(eD.TN,{children:"You may not remove all roles from a team member"})]}),!Q&&E.length>0&&E.length!==F.length&&(0,l.jsxs)(eD.Fc,{children:[(0,l.jsx)(eD.XL,{children:$?"This member will only have access to ".concat(G," project").concat(G>1?"s":""):"This member only has access to ".concat(G," project").concat(G>1?"s":"")}),(0,l.jsxs)(eD.TN,{children:[f.username," ",$?"will":"does"," not have access to the following ",W.length," project",W.length>1?"s":"",":",(0,l.jsx)("ul",{className:"list-disc pl-6",children:W.map(e=>(0,l.jsx)("li",{children:e.name},e.id))})]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-y-2",children:E.sort((e,t)=>{var r,l;return(null!=(r=null==e?void 0:e.projectId)?r:0)-(null!=(l=null==t?void 0:t.projectId)?l:0)}).map(e=>{var t,r,n,a,s;let i=void 0===e.ref?"All projects":null==_||null==(t=_.find(t=>t.ref===e.ref))?void 0:t.name,o=N.find(t=>void 0!==e.baseRoleId?t.id===e.baseRoleId:t.id===e.roleId),d=I.includes(null!=(r=null==o?void 0:o.id)?r:0);return(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:i}),(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[C?(0,l.jsxs)(el.m_,{children:[(0,l.jsx)(el.k$,{asChild:!0,children:(0,l.jsx)("div",{className:"flex items-center justify-between rounded-md border border-button bg-button px-3 py-2 text-sm h-10 w-56 text-foreground-light",children:null!=(n=null==o?void 0:o.name)?n:"Unknown"})}),(0,l.jsx)(el.ZI,{side:"bottom",children:"Additional permissions required to update role"})]}):(0,l.jsxs)(P.l6,{value:(null!=(a=null==e?void 0:e.baseRoleId)?a:e.roleId).toString(),onValueChange:t=>((e,t)=>{void 0!==t.ref?q(E.map(r=>r.ref===t.ref?{ref:r.ref,projectId:r.projectId,roleId:Number(e)}:r)):q([{ref:void 0,roleId:Number(e)}])})(t,e),children:[(0,l.jsx)(P.bq,{className:(0,ex.cn)("text-sm h-10 w-56",(null==o?void 0:o.name)===void 0&&"text-foreground-light"),children:null!=(s=null==o?void 0:o.name)?s:"Please select a role"}),(0,l.jsx)(P.gC,{children:(0,l.jsx)(P.s3,{children:(null!=N?N:[]).map(e=>{let t=R.includes(e.id);return(0,l.jsx)(P.eb,{value:e.id.toString(),className:"text-sm hover:bg-selection cursor-pointer",disabled:!t,children:e.name},e.id)})})})]}),!Q&&(0,l.jsx)(b.G,{type:"text",disabled:!d,className:"px-1",icon:(0,l.jsx)(es.A,{}),onClick:()=>(e=>{void 0!==e&&q(E.filter(t=>t.ref!==e))})(null==e?void 0:e.ref),tooltip:{content:{side:"bottom",text:d?"Remove access to project":"Additional permission required to remove role from member"}}})]})]},"".concat(e.ref,"-").concat(e.roleId))})}),!Q&&(0,l.jsxs)(eQ.AM,{open:k,onOpenChange:T,modal:!1,children:[(0,l.jsx)(eQ.Wv,{asChild:!0,children:(0,l.jsx)(K.$,{type:"default",className:"w-min",children:"Add project"})}),(0,l.jsx)(eQ.hl,{className:"p-0",side:"bottom",align:"start",children:(0,l.jsxs)(eK.uB,{children:[(0,l.jsx)(eK.G7,{placeholder:"Find project..."}),(0,l.jsxs)(eK.oI,{children:[(0,l.jsx)(eK.xL,{children:"No projects found"}),(0,l.jsx)(eK.L$,{children:(0,l.jsx)(ej.FK,{className:(_||[]).length>7?"h-[210px]":"",children:F.map(e=>{let t=E.some(t=>t.ref===e.ref);return(0,l.jsxs)(eK.h_,{disabled:t,className:"cursor-pointer w-full justify-between",onSelect:()=>X(e.ref),onClick:()=>X(e.ref),children:[(0,l.jsx)("p",{className:"truncate",children:e.name}),t&&(0,l.jsx)("p",{className:"w-[45%] text-right",children:"Already assigned"})]},e.ref)})})})]})]})})]})]}),(0,l.jsxs)(eF.XW,{className:"flex items-center !justify-end px-5 py-4 w-full border-t","data-sentry-element":"SheetFooter","data-sentry-source-file":"UpdateRolesPanel.tsx",children:[(0,l.jsx)(K.$,{type:"default",disabled:!1,onClick:()=>p(),"data-sentry-element":"Button","data-sentry-source-file":"UpdateRolesPanel.tsx",children:"Cancel"}),(0,l.jsx)(K.$,{loading:!1,disabled:!H||J,onClick:()=>{z(!0)},"data-sentry-element":"Button","data-sentry-source-file":"UpdateRolesPanel.tsx",children:"Save roles"})]})]})})}),(0,l.jsx)(e0,{visible:A,member:f,projectsRoleConfiguration:E,onClose:e=>{z(!1),e&&p()},"data-sentry-element":"UpdateRolesConfirmationModal","data-sentry-source-file":"UpdateRolesPanel.tsx"})]})},e2=e=>{var t,r,n,i,o,c;let{member:u}=e,{slug:m}=(0,s.g)(),{profile:f}=(0,O.xc)(),[p,x]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),y=(0,q.x)("organization_members:delete"),{data:_}=(0,L.s)(),{data:w}=(0,ez.m)(),{data:N}=(0,d.KQ)({slug:m}),{data:S}=(0,T.Q)({slug:m}),{data:R}=ep({enabled:(0,M.cC)(m)}),I=null!=(r=null==R?void 0:R.projects)?r:[],C=u.gotrue_id==(null==f?void 0:f.gotrue_id),A=null!=(n=null==N?void 0:N.org_scoped_roles)?n:[],z=null!=(i=null==N?void 0:N.project_scoped_roles)?i:[],B=!!u.invited_id,F=null==S?void 0:S.find(e=>e.gotrue_id===(null==f?void 0:f.gotrue_id)),D=1===(null!=(o=null==F?void 0:F.role_ids)?o:[]).length&&A.some(e=>e.id===(null==F?void 0:F.role_ids[0])),{rolesRemovable:P}=U(null==_?void 0:_.slug,A.concat(z),null!=w?w:[]),Q=null!=(c=null==(t=u.role_ids)?void 0:t[0])?c:-1,H=u.role_ids.every(e=>P.includes(e)),{can:V}=(0,E.Qp)(h.aG.CREATE,"user_invites",{resource:{role_id:Q}}),{can:W}=(0,E.Qp)(h.aG.DELETE,"user_invites",{resource:{role_id:Q}}),{mutate:G,isLoading:$}=eA({onSuccess:()=>{j.oR.success("Successfully removed ".concat(u.primary_email)),v(!1)}}),{mutate:J,isLoading:X}=k({onSuccess:()=>{j.oR.success("Resent the invitation.")},onError:e=>{j.oR.error("Failed to resend invitation: ".concat(e.message))}}),{mutate:Y,isLoading:Z}=eI(),ee=$||Z||X;return C?(0,l.jsx)("div",{className:"flex items-center justify-end",children:(0,l.jsx)(eL,{})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-end gap-x-2",children:[(0,l.jsx)(b.G,{type:"default",disabled:B||!H,onClick:()=>x(!0),tooltip:{content:{side:"bottom",text:B?"Role can only be changed after the user has accepted the invite":H?void 0:"You need additional permissions to manage this team member"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"MemberActions.tsx",children:"Manage access"}),(0,l.jsxs)(ek.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"MemberActions.tsx",children:[(0,l.jsx)(ek.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"MemberActions.tsx",children:(0,l.jsx)(K.$,{type:"text",className:"px-1.5",disabled:ee,loading:ee,icon:(0,l.jsx)(e_.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"MemberActions.tsx"})}),(0,l.jsx)(ek.SQ,{side:"bottom",align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"MemberActions.tsx",children:(0,l.jsx)(l.Fragment,{children:B?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eS.x,{className:"gap-x-2",disabled:!(V&&D),onClick:()=>(e=>{var t;let r=(null!=(t=null==e?void 0:e.role_ids)?t:[])[0],l=e.invited_id;return m?l?void Y({slug:m,id:l,skipInvalidation:!0},{onSuccess:()=>{if(!e.primary_email)return j.oR.error("Email is required");let t=z.find(e=>e.id===r);if(void 0!==t){var l;let r=(null!=(l=null==t?void 0:t.project_ids)?l:[]).map(e=>{var t;return null==I||null==(t=I.find(t=>t.id===e))?void 0:t.ref}).filter(Boolean);J({slug:m,email:e.primary_email,roleId:t.base_role_id,projects:r})}else J({slug:m,email:e.primary_email,roleId:r})}}):console.error("Member invited ID is required"):console.error("Slug is required")})(u),tooltip:{content:{side:"left",text:"Additional permissions required to resend invitation"}},children:[(0,l.jsx)(ew,{size:14}),(0,l.jsx)("p",{children:"Resend invitation"})]}),(0,l.jsx)(ek.mB,{}),(0,l.jsxs)(eS.x,{className:"gap-x-2",disabled:!(W&&D),onClick:()=>(e=>{let t=e.invited_id;return m?t?void Y({slug:m,id:t},{onSuccess:()=>j.oR.success("Successfully revoked the invitation.")}):console.error("Member invited ID is required"):console.error("Slug is required")})(u),tooltip:{content:{side:"left",text:"Additional permissions required to cancel invitation"}},children:[(0,l.jsx)(eN.A,{size:14}),(0,l.jsx)("p",{children:"Cancel invitation"})]})]}):y&&(0,l.jsxs)(eS.x,{className:"gap-x-2",disabled:!H,onClick:()=>v(!0),tooltip:{content:{side:"left",text:"Additional permissions required to remove member"}},children:[(0,l.jsx)(eN.A,{size:12}),(0,l.jsx)("p",{children:"Remove member"})]})})})]})]}),(0,l.jsx)(eT.A,{size:"large",visible:g,loading:$,title:"Confirm to remove member",confirmLabel:"Remove",variant:"warning",alert:{title:"All user content from this member will be permanently removed.",description:(0,l.jsxs)("div",{children:["Removing a member will delete all of the user's saved content in all projects of this organization, which includes:",(0,l.jsxs)("ul",{className:"list-disc pl-4 my-2",children:[(0,l.jsxs)("li",{children:["SQL snippets"," ",(0,l.jsxs)("span",{className:"text-foreground",children:["(both ",(0,l.jsx)("span",{className:"underline",children:"private"})," and"," ",(0,l.jsx)("span",{className:"underline",children:"shared"})," snippets)"]})]}),(0,l.jsx)("li",{children:"Custom reports"}),(0,l.jsx)("li",{children:"Log Explorer queries"})]}),(0,l.jsx)("p",{className:"mt-4 text-foreground-lighter",children:"If you'd like to retain the member's shared SQL snippets, right click on them and \"Duplicate query\" in the SQL Editor before removing this member."})]})},onCancel:()=>v(!1),onConfirm:()=>{m?u.gotrue_id?G({slug:m,gotrueId:u.gotrue_id}):console.error("gotrue_id is required"):console.error("slug is required")},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"MemberActions.tsx",children:(0,l.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to remove"," ",(0,l.jsx)("span",{className:"text-foreground",children:u.primary_email})," from"," ",(0,l.jsx)("span",{className:"text-foreground",children:null==_?void 0:_.name}),"?"]})}),(0,l.jsx)(e1,{visible:p,member:u,onClose:()=>x(!1),"data-sentry-element":"UpdateRolesPanel","data-sentry-source-file":"MemberActions.tsx"})]})},e4={vercel:"vercel-marketplace"},e3=e=>{var t,r,n,a,i,o,c;let{member:u}=e,{slug:m}=(0,s.g)(),{profile:f}=(0,O.xc)(),{data:p}=(0,L.s)(),h=(0,M.cC)(m),{data:x,isLoading:v}=(0,d.KQ)({slug:null==p?void 0:p.slug}),j=(null!=(n=null==x?void 0:x.project_scoped_roles)?n:[]).length>0,{data:y}=ep({enabled:h}),b=null!=(a=null==y?void 0:y.projects)?a:[],_=null==b?void 0:b.filter(e=>e.organization_id===(null==p?void 0:p.id)),w=!!u.invited_id,N=u.username===u.primary_email,S=!!(null==(t=u.primary_email)?void 0:t.endsWith("customer.fly.io")),R=w||N||S?void 0:(0,eh.By)(u.username),I=u.role_ids.filter(e=>{var t,r,l;let n=[...null!=(t=null==x?void 0:x.org_scoped_roles)?t:[],...null!=(r=null==x?void 0:x.project_scoped_roles)?r:[]].find(t=>t.id===e);return(null==n?void 0:n.project_ids)!==null&&0===(null!=(l=null==n?void 0:n.project_ids)?l:[]).map(e=>{var t,r;return null!=(r=null==b||null==(t=b.find(t=>t.id===e))?void 0:t.name)?r:""}).filter(e=>e.length>0).length}).length>0;return(0,l.jsxs)(er.Hj,{"data-sentry-element":"TableRow","data-sentry-component":"MemberRow","data-sentry-source-file":"MemberRow.tsx",children:[(0,l.jsx)(er.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"MemberRow.tsx",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)(ec.p,{alt:null!=(o=null!=(i=u.primary_email)?i:u.username)?o:"",src:R,className:"border rounded-full w-[32px] h-[32px] md:w-[40px] md:h-[40px]",placeholder:(0,l.jsx)("div",{className:(0,ex.cn)("w-[32px] h-[32px] md:w-[40px] md:h-[40px]","bg-surface-100 border border-overlay rounded-full text-foreground-lighter flex items-center justify-center"),children:(0,l.jsx)(en.A,{size:20,strokeWidth:1.5})}),"data-sentry-element":"ProfileImage","data-sentry-source-file":"MemberRow.tsx"}),(0,l.jsxs)("div",{className:"flex item-center gap-x-2",children:[(0,l.jsx)("p",{className:"text-foreground-light truncate",children:u.primary_email}),u.gotrue_id===(null==f?void 0:f.gotrue_id)&&(0,l.jsx)(eg.E,{color:"scale",children:"You"})]}),(null==(r=u.metadata)?void 0:r.origin)&&(0,l.jsx)(ed.A,{organization:{managed_by:null!=(c=e4[u.metadata.origin])?c:"supabase"},tooltipText:"This user is managed by Vercel Marketplace."})]})}),(0,l.jsxs)(er.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"MemberRow.tsx",children:[w&&u.invited_at&&(0,l.jsx)(eg.E,{variant:eb(u.invited_at)?"destructive":"warning",children:eb(u.invited_at)?"Expired":"Invited"}),u.is_sso_user&&(0,l.jsx)(eg.E,{variant:"default",children:"SSO"})]}),(0,l.jsx)(er.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"MemberRow.tsx",children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:u.mfa_enabled?(0,l.jsx)(ea.A,{className:"text-brand",strokeWidth:2,size:20}):(0,l.jsx)(es.A,{className:"text-foreground-light",strokeWidth:1.5,size:20})})}),(0,l.jsx)(er.nA,{className:"max-w-64","data-sentry-element":"TableCell","data-sentry-source-file":"MemberRow.tsx",children:v?(0,l.jsx)(ey.A,{className:"w-32"}):I?(0,l.jsx)(ei.A,{strokeWidth:1.5,size:20}):u.role_ids.map(e=>{var t,r,n,a,s;let i=(null!=(t=null==x?void 0:x.org_scoped_roles)?t:[]).find(t=>t.id===e),o=(null!=(r=null==x?void 0:x.project_scoped_roles)?r:[]).find(t=>t.id===e),d=i||o,c=(null!=(n=null==d?void 0:d.name)?n:"").split("_")[0],u=(null==d?void 0:d.project_ids)===null?null!=(a=null==_?void 0:_.map(e=>e.name))?a:[]:(null!=(s=null==d?void 0:d.project_ids)?s:[]).map(e=>{var t,r;return null!=(r=null==_||null==(t=_.find(t=>t.id===e))?void 0:t.name)?r:""}).filter(e=>e.length>0);return(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsx)("p",{children:c}),j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:""}),1===u.length?(0,l.jsx)("span",{className:"text-foreground truncate",title:u[0],children:u[0]}):(0,l.jsxs)(ev.jc,{openDelay:200,children:[(0,l.jsx)(ev.d0,{asChild:!0,children:(0,l.jsx)("span",{className:"text-foreground",children:(null==d?void 0:d.project_ids)===null?"Organization":"".concat(u.length," project").concat(u.length>1?"s":"")})}),(0,l.jsxs)(ev.Et,{className:"p-0",children:[(0,l.jsxs)("p",{className:"p-2 text-xs",children:[c," role applies to ",u.length," project",u.length>1?"s":""]}),(0,l.jsx)("div",{className:"border-t flex flex-col py-1",children:(0,l.jsx)(ej.FK,{className:(0,ex.cn)(u.length>5?"h-[130px]":""),children:u.map(e=>{var t;let r=null==_||null==(t=_.find(t=>t.name===e))?void 0:t.ref;return(0,l.jsxs)(g(),{href:"/project/".concat(r),className:"px-2 py-1 group hover:bg-surface-300 hover:text-foreground transition flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-xs truncate max-w-[60%]",children:e}),(0,l.jsxs)("span",{className:"text-xs text-foreground flex items-center gap-x-1 opacity-0 group-hover:opacity-100 transition",children:["Go to project",(0,l.jsx)(eo.A,{size:14})]})]},e)})})})]})]})]})]},"role-".concat(e))})}),(0,l.jsx)(er.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"MemberRow.tsx",children:(0,l.jsx)(e2,{member:u,"data-sentry-element":"MemberActions","data-sentry-source-file":"MemberRow.tsx"})})]})},e5=e=>{var t,r,n;let{searchString:i}=e,{slug:o}=(0,s.g)(),{profile:c}=(0,O.xc)(),{data:f=[],error:p,isLoading:h,isError:x,isSuccess:g}=(0,T.Q)({slug:o}),{data:v,error:j,isSuccess:y,isError:b}=(0,d.KQ)({slug:o}),_=(0,a.useMemo)(()=>i?f.filter(e=>{var t,r;return e.invited_at?null==(t=e.primary_email)?void 0:t.includes(i):e.gotrue_id?e.username.includes(i)||(null==(r=e.primary_email)?void 0:r.includes(i)):void 0}):f,[f,i]),[[w],N]=Z()(_,e=>e.gotrue_id===(null==c?void 0:c.gotrue_id)),S=N.sort((e,t)=>{var r,l;return(null!=(r=e.primary_email)?r:"").localeCompare(null!=(l=t.primary_email)?l:"")}),R=f.find(e=>e.gotrue_id===(null==c?void 0:c.gotrue_id)),I=(null!=(r=null==v?void 0:v.org_scoped_roles)?r:[]).map(e=>e.id).includes(null!=(n=null==R||null==(t=R.role_ids)?void 0:t[0])?n:-1);return(0,l.jsxs)(l.Fragment,{children:[h&&(0,l.jsx)(X.yV,{}),x&&(0,l.jsx)(J.A,{error:p,subject:"Failed to retrieve organization members"}),b&&(0,l.jsx)(J.A,{error:j,subject:"Failed to retrieve organization roles"}),g&&(0,l.jsx)("div",{className:"rounded w-full overflow-hidden overflow-x-scroll",children:(0,l.jsx)(ee.Zp,{children:(0,l.jsx)(et.A,{active:!_,children:(0,l.jsxs)(er.XI,{children:[(0,l.jsx)(er.A0,{children:(0,l.jsxs)(er.Hj,{children:[(0,l.jsx)(er.nd,{children:"User"},"header-user"),(0,l.jsx)(er.nd,{className:"w-24"},"header-status"),(0,l.jsx)(er.nd,{className:"text-center w-32",children:"Enabled MFA"},"header-mfa"),(0,l.jsxs)(er.nd,{className:"flex items-center space-x-1",children:[(0,l.jsx)("span",{children:"Role"}),(0,l.jsxs)(el.m_,{children:[(0,l.jsx)(el.k$,{asChild:!0,children:(0,l.jsx)(K.$,{asChild:!0,type:"text",className:"px-1",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(u.aq,"/guides/platform/access-control"),children:(0,l.jsx)(G.A,{size:14,className:"text-foreground-light"})})})}),(0,l.jsx)(el.ZI,{side:"bottom",children:"How to configure access control?"})]})]},"header-role"),(0,l.jsx)(er.nd,{},"header-action")]})}),(0,l.jsx)(er.BF,{children:[...y&&g&&!I?[(0,l.jsx)(er.Hj,{children:(0,l.jsx)(er.nA,{colSpan:12,className:"!p-0",children:(0,l.jsx)(m.Z,{type:"note",title:"You are currently assigned with project scoped roles in this organization",description:"All the members within the organization will not be visible to you",className:"m-0 bg-alternative border-0 rounded-none"})})},"project-scope-notice")]:[],...w?[(0,l.jsx)(e3,{member:w},w.gotrue_id)]:[],...S.map(e=>(0,l.jsx)(e3,{member:e},e.gotrue_id)),...i.length>0&&0===_.length?[(0,l.jsx)(er.Hj,{className:"bg-panel-secondary-light",children:(0,l.jsx)(er.nA,{colSpan:12,children:(0,l.jsxs)("div",{className:"flex items-center space-x-3 opacity-75",children:[(0,l.jsx)($.A,{size:16,strokeWidth:2}),(0,l.jsxs)("p",{className:"text-foreground-light",children:['No users matched the search query "',i,'"']})]})})},"no-results")]:[],(0,l.jsx)(er.Hj,{className:"bg-panel-secondary-light",children:(0,l.jsx)(er.nA,{colSpan:12,children:(0,l.jsxs)("p",{className:"text-foreground-light",children:[i?"".concat(_.length," of "):"",f.length||"0"," ",1==f.length?"user":"users"]})})},"footer")]})]})})})})]})},e6=()=>{var e,t;let{slug:r}=(0,s.g)(),[p,h]=(0,a.useState)(""),{data:x}=(0,d.KQ)({slug:r}),g=(null!=(e=null==x?void 0:x.project_scoped_roles)?e:[]).length>0,{data:v}=(0,c.Q)({}),j=null!=(t=null==v?void 0:v.pages[0].pagination.count)?t:0;return(0,l.jsxs)(i.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-component":"TeamSettings","data-sentry-source-file":"TeamSettings.tsx",children:[(0,l.jsx)(i.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"TeamSettings.tsx",children:"Team"}),(0,l.jsxs)(i.tn,{"data-sentry-element":"ScaffoldFilterAndContent","data-sentry-source-file":"TeamSettings.tsx",children:[(0,l.jsxs)(i.HJ,{className:"w-full flex-col md:flex-row gap-2 justify-between","data-sentry-element":"ScaffoldActionsContainer","data-sentry-source-file":"TeamSettings.tsx",children:[(0,l.jsx)(f.p,{size:"tiny",autoComplete:"off",icon:(0,l.jsx)(n.A,{size:12}),value:p,onChange:e=>h(e.target.value),name:"email",id:"email",placeholder:"Filter members","data-sentry-element":"Input","data-sentry-source-file":"TeamSettings.tsx"}),(0,l.jsxs)(i.fh,{className:"w-full md:w-auto","data-sentry-element":"ScaffoldActionsGroup","data-sentry-source-file":"TeamSettings.tsx",children:[(0,l.jsx)(o.A,{href:"".concat(u.aq,"/guides/platform/access-control"),"data-sentry-element":"DocsButton","data-sentry-source-file":"TeamSettings.tsx"}),(0,l.jsx)(W,{"data-sentry-element":"InviteMemberButton","data-sentry-source-file":"TeamSettings.tsx"})]})]}),g&&j>1e3&&(0,l.jsx)(m.Z,{type:"warning",className:"mb-0",title:"This page may not render properly due to the number of projects your account has access to",description:"We're actively looking into optimizing this page and will make things available as soon as we can!"}),(0,l.jsx)(i.Rf,{className:"w-full","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"TeamSettings.tsx",children:(0,l.jsx)(e5,{searchString:p,"data-sentry-element":"MembersView","data-sentry-source-file":"TeamSettings.tsx"})})]})]})};var e8=r(10508),e7=r(33132),e9=r(37383);let te=()=>{let{isLoading:e}=(0,ez.m)(),{data:t}=(0,L.s)();return void 0===t&&e?(0,l.jsx)(e9.A,{"data-sentry-element":"LogoLoader","data-sentry-component":"OrgTeamSettings","data-sentry-source-file":"team.tsx"}):(0,l.jsx)(e6,{"data-sentry-element":"TeamSettings","data-sentry-component":"OrgTeamSettings","data-sentry-source-file":"team.tsx"})};te.getLayout=e=>(0,l.jsx)(e8.A,{children:(0,l.jsx)(e7.A,{children:e})});let tt=te},74310:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(86848).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},77444:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(86848).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},78039:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>i,wL:()=>u});var l=r(80263),n=r(53239),a=r(80100);let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,a.cn)("overflow-hidden rounded-lg border bg-surface-100 text-card-foreground shadow-sm",r),...n})});s.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",r),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("h3",{ref:t,className:(0,a.cn)("text-xs font-mono uppercase",r),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-foreground-muted",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,a.cn)("py-4 px-6 border-b last:border-none",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,a.cn)(" flex items-center py-4 px-6",r),...n})});u.displayName="CardFooter"},78511:(e,t,r)=>{"use strict";r.d(t,{A0:()=>o,BF:()=>d,Gg:()=>c,Hj:()=>u,XI:()=>i,nA:()=>f,nd:()=>m,r6:()=>p});var l=r(80263),n=r(53239),a=r(80100),s=r(31647);let i=n.forwardRef((e,t)=>{let{className:r,containerProps:n,...i}=e;return(0,l.jsx)(s.x,{...n,children:(0,l.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...i})})});i.displayName="Table";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b [&>tr]:bg-200",r),...n})});o.displayName="TableHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...n})});d.displayName="TableBody";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,a.cn)("bg-primary font-medium text-primary-foreground",r),...n})});c.displayName="TableFooter";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("tr",{ref:t,className:(0,a.cn)("border-b [&>td]:hover:bg-surface-200 data-[state=selected]:bg-muted",r),...n})});u.displayName="TableRow";let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("th",{ref:t,className:(0,a.cn)("h-10 px-4 text-left align-middle heading-meta whitespace-nowrap text-foreground-lighter [&:has([role=checkbox])]:pr-0",r),...n})});m.displayName="TableHead";let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("td",{ref:t,className:(0,a.cn)("transition-colors p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});f.displayName="TableCell";let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,l.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-foreground-muted",r),...n})});p.displayName="TableCaption"},86541:(e,t,r)=>{"use strict";r.d(t,{I:()=>u,W:()=>c});var l=r(80263),n=r(52555),a=r.n(n),s=r(27695),i=r(2657),o=r(84512),d=r(99779);let c="<Specify which plan to upgrade to: Pro | Team | Enterprise>",u=e=>{var t;let{source:r,type:n="default",plan:u,href:m,disabled:f,children:p}=e,{data:h}=(0,o.s)(),x=null!=(t=null==h?void 0:h.slug)?t:"_",{billingAll:g}=(0,i.x)(["billing:all"]),v="Name: ".concat(null==h?void 0:h.name,"\nSlug: ").concat(null==h?void 0:h.slug,"\nRequested plan: ").concat(null!=u?u:c),j=g?null!=m?m:"/org/".concat(x,"/billing?panel=subscriptionPlan").concat(r?"&source=".concat(r):""):"",y=p||"Upgrade to ".concat(u),b=g?(0,l.jsx)(a(),{href:j,children:y}):(0,l.jsx)(s.Y,{queryParams:{orgSlug:x,category:"Plan_upgrade",subject:"Enquiry to upgrade ".concat(u?"to ".concat(u," "):"","plan for organization"),message:v},children:y});return(0,l.jsx)(d.$,{asChild:!0,type:n,disabled:f,"data-sentry-element":"Button","data-sentry-component":"UpgradePlanButton","data-sentry-source-file":"UpgradePlanButton.tsx",children:b})}},87834:(e,t,r)=>{"use strict";r.d(t,{O:()=>l});let l={rolesV2:e=>["organization-members",e,"roles-v2"],invitations:e=>["organization-members",e,"invitations"],invitation:(e,t)=>["organization-members",e,"invitations",t],token:(e,t)=>["organization-members",e,"token",t]}},94240:(e,t,r)=>{"use strict";r.d(t,{KQ:()=>o});var l=r(56947),n=r(24523),a=r(87834);let s=["Owner","Administrator","Developer","Read-only"];async function i(e,t){let{slug:r}=e;if(!r)throw Error("slug is required");let{data:l,error:a}=await (0,n.Jt)("/platform/organizations/{slug}/roles",{params:{path:{slug:r}},signal:t});return a&&(0,n.H4)(a),l}let o=function(e){let{slug:t}=e,{enabled:r=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.I)({queryKey:a.O.rolesV2(t),queryFn:e=>{let{signal:r}=e;return i({slug:t},r)},enabled:r&&void 0!==t,select:e=>({...e,org_scoped_roles:e.org_scoped_roles.sort((e,t)=>s.indexOf(e.name)-s.indexOf(t.name))}),...n})}},98103:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(86848).A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])}},e=>{e.O(0,[60858,15599,16110,44952,36538,43833,76984,72391,74004,40545,596,10508,90636,46593,38792],()=>e(e.s=67537)),_N_E=e.O()}]);