try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4416b288-a42b-46aa-a1e4-ee6b4abf4ee5",e._sentryDebugIdIdentifier="sentry-dbid-4416b288-a42b-46aa-a1e4-ee6b4abf4ee5")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51775],{57320:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/storage/files",function(){return a(62485)}])},62485:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Q});var l=a(80263),s=a(31092),n=a(96040),r=a(53239),i=a(22891),d=a(37873),c=a(53931),o=a(78960),u=a(11164),m=a(65802),x=a(85039),y=a(6436),b=a(51537),h=a(21162),f=a(99779),j=a(78039),p=a(64758),k=a(62230),g=a(67203),T=a(58970),B=a(50488),w=a(29556),N=a(62941),v=a(80100),C=a(78511);let z=(0,r.createContext)(null),_=e=>{let{scrollContainerProps:t,containerProps:a,data:s,children:n,overscan:i=5,estimateSize:d,getItemKey:c,...o}=e,u=(0,r.useRef)(null),m=(0,r.useCallback)((e,t)=>c?c(e,t):t,[c]),x=(0,r.useCallback)(e=>{let t=s[e];return t?m(t,e):e},[s,m]),y=(0,N.Te)({count:s.length,getScrollElement:()=>u.current,overscan:i,estimateSize:d,getItemKey:x}),b=y.getVirtualItems(),h=y.getTotalSize(),f=b.length>0?b[0].start:0,j=b.length>0?h-b[b.length-1].end:0,p=(0,r.useMemo)(()=>({virtualizer:y,virtualItems:b,data:s,paddingTop:f,paddingBottom:j,getRowKey:m}),[y,b,s,f,j,m]),k=(0,r.useMemo)(()=>({...a,className:(0,v.cn)("overflow-visible",null==a?void 0:a.className)}),[a]),{className:g,...T}=null!=t?t:{};return(0,l.jsx)("div",{ref:u,className:(0,v.cn)("h-full overflow-auto",g),...T,"data-sentry-component":"VirtualizedTable","data-sentry-source-file":"VirtualizedTable.tsx",children:(0,l.jsx)(z.Provider,{value:p,"data-sentry-element":"VirtualizedTableContext.Provider","data-sentry-source-file":"VirtualizedTable.tsx",children:(0,l.jsx)(C.XI,{containerProps:k,...o,"data-sentry-element":"Table","data-sentry-source-file":"VirtualizedTable.tsx",children:n})})})},S=e=>{let{emptyContent:t,leadingContent:a,trailingContent:s,children:n,paddingColSpan:d=1,paddingCellClassName:c,...o}=e,{virtualizer:u,virtualItems:m,data:x,paddingTop:y,paddingBottom:b,getRowKey:h}=(()=>{let e=(0,r.useContext)(z);if(!e)throw Error("VirtualizedTable components must be used within a VirtualizedTable");return e})(),f=u.measureElement;return(0,l.jsxs)(C.BF,{...o,"data-sentry-element":"TableBody","data-sentry-component":"VirtualizedTableBody","data-sentry-source-file":"VirtualizedTable.tsx",children:[a,0===x.length?null!=t?t:null:(0,l.jsxs)(l.Fragment,{children:[y>0&&(0,l.jsx)(C.Hj,{"aria-hidden":"true",style:{height:y},children:(0,l.jsx)(R,{colSpan:d,className:(0,v.cn)("p-0",c)})}),m.map(e=>{var t;let a=x[e.index];if(void 0===a)return null;let l=n(a,e.index);if(!(0,r.isValidElement)(l))return l;let s=null!=(t=l.key)?t:h(a,e.index),d=l.ref,c=null!=d?(0,i.Px)(f,d):f;return(0,r.cloneElement)(l,{key:s,ref:c,"data-index":e.index})}),b>0&&(0,l.jsx)(C.Hj,{"aria-hidden":"true",style:{height:b},children:(0,l.jsx)(R,{colSpan:d,className:(0,v.cn)("p-0",c)})})]}),s]})},A=C.A0,H=(0,r.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(C.nd,{ref:t,className:(0,v.cn)("sticky top-0 z-10 bg-200",a),...s})});H.displayName="VirtualizedTableHead";let V=C.Hj,R=C.nA;var I=a(48510),E=a(76196),P=a(3701),D=a(21650);let L=e=>{let{mode:t,hasBuckets:a=!0}=e,s="standard"===t?C.A0:A,n="standard"===t?C.Hj:V,r="standard"===t?C.nd:H,i="sticky top-0 z-10 bg-200";return(0,l.jsx)(s,{"data-sentry-element":"BucketTableHeader","data-sentry-component":"BucketTableHeader","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsxs)(n,{"data-sentry-element":"BucketTableRow","data-sentry-source-file":"BucketTable.tsx",children:[a&&(0,l.jsx)(r,{className:"".concat(i," w-2 pr-1"),children:(0,l.jsx)("span",{className:"sr-only",children:"Icon"})}),(0,l.jsx)(r,{className:i,"data-sentry-element":"BucketTableHead","data-sentry-source-file":"BucketTable.tsx",children:"Name"}),(0,l.jsx)(r,{className:i,"data-sentry-element":"BucketTableHead","data-sentry-source-file":"BucketTable.tsx",children:"Policies"}),(0,l.jsx)(r,{className:i,"data-sentry-element":"BucketTableHead","data-sentry-source-file":"BucketTable.tsx",children:"File size limit"}),(0,l.jsx)(r,{className:i,"data-sentry-element":"BucketTableHead","data-sentry-source-file":"BucketTable.tsx",children:"Allowed MIME types"}),(0,l.jsx)(r,{className:i,"data-sentry-element":"BucketTableHead","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsx)("span",{className:"sr-only",children:"Actions"})})]})})},F=e=>{let{mode:t,filterString:a}=e,s="standard"===t?C.Hj:V,n="standard"===t?C.nA:R;return(0,l.jsx)(s,{className:"[&>td]:hover:bg-inherit","data-sentry-element":"BucketTableRow","data-sentry-component":"BucketTableEmptyState","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsxs)(n,{colSpan:5,"data-sentry-element":"BucketTableCell","data-sentry-source-file":"BucketTable.tsx",children:[(0,l.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,l.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["Your search for “",a,"” did not return any results"]})]})})},M=e=>{let{mode:t,bucket:a,projectRef:s,formattedGlobalUploadLimit:n,getPolicyCount:r}=e,i="standard"===t?C.Hj:V,d="standard"===t?C.nA:R,c=(0,P.useRouter)();return(0,l.jsxs)(i,{className:"relative cursor-pointer h-16","data-sentry-element":"BucketTableRow","data-sentry-component":"BucketTableRow","data-sentry-source-file":"BucketTable.tsx",children:[(0,l.jsx)(d,{className:"w-2 pr-1","data-sentry-element":"BucketTableCell","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsx)(I.fW,{size:16,className:"text-foreground-muted","data-sentry-element":"BucketIcon","data-sentry-source-file":"BucketTable.tsx"})}),(0,l.jsxs)(d,{className:"flex-1","data-sentry-element":"BucketTableCell","data-sentry-source-file":"BucketTable.tsx",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,l.jsx)("p",{className:"whitespace-nowrap max-w-[512px] truncate",children:a.id}),a.public&&(0,l.jsx)(D.E,{variant:"warning",children:"Public"})]}),(0,l.jsx)("button",{className:(0,v.cn)("absolute inset-0","inset-focus"),onClick:e=>((e,t)=>{let a="/project/".concat(s,"/storage/files/buckets/").concat(encodeURIComponent(e));t.metaKey||t.ctrlKey?window.open(a,"_blank"):c.push(a)})(a.id,e),children:(0,l.jsx)("span",{className:"sr-only",children:"Go to bucket details"})})]}),(0,l.jsx)(d,{"data-sentry-element":"BucketTableCell","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsx)("p",{className:"text-foreground-light",children:r(a.id)})}),(0,l.jsx)(d,{"data-sentry-element":"BucketTableCell","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsx)("p",{className:"whitespace-nowrap ".concat(a.file_size_limit?"text-foreground-light":"text-foreground-muted"),children:a.file_size_limit?(0,y.z3)(a.file_size_limit):"Unset (".concat(n,")")})}),(0,l.jsx)(d,{"data-sentry-element":"BucketTableCell","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsx)("p",{className:a.allowed_mime_types?"text-foreground-light":"text-foreground-muted",children:a.allowed_mime_types?a.allowed_mime_types.join(", "):"Any"})}),(0,l.jsx)(d,{"data-sentry-element":"BucketTableCell","data-sentry-source-file":"BucketTable.tsx",children:(0,l.jsx)("div",{className:"flex justify-end items-center h-full",children:(0,l.jsx)(E.A,{size:14,className:"text-foreground-muted/60","data-sentry-element":"ChevronRight","data-sentry-source-file":"BucketTable.tsx"})})})]},a.id)},U=e=>e.buckets.length>50?(0,l.jsx)(G,{...e,"data-sentry-element":"BucketsTableVirtualized","data-sentry-component":"BucketsTable","data-sentry-source-file":"BucketsTable.tsx"}):(0,l.jsx)(K,{...e,"data-sentry-element":"BucketsTableUnvirtualized","data-sentry-component":"BucketsTable","data-sentry-source-file":"BucketsTable.tsx"}),K=e=>{let{buckets:t,projectRef:a,filterString:s,formattedGlobalUploadLimit:n,getPolicyCount:r}=e,i=0===t.length&&s.length>0;return(0,l.jsxs)(C.XI,{containerProps:{containerClassName:"h-full overflow-auto",className:"overflow-visible"},"data-sentry-element":"Table","data-sentry-component":"BucketsTableUnvirtualized","data-sentry-source-file":"BucketsTable.tsx",children:[(0,l.jsx)(L,{mode:"standard",hasBuckets:t.length>0,"data-sentry-element":"BucketTableHeader","data-sentry-source-file":"BucketsTable.tsx"}),(0,l.jsx)(C.BF,{"data-sentry-element":"TableBody","data-sentry-source-file":"BucketsTable.tsx",children:i?(0,l.jsx)(F,{mode:"standard",filterString:s}):t.map(e=>(0,l.jsx)(M,{mode:"standard",bucket:e,projectRef:a,formattedGlobalUploadLimit:n,getPolicyCount:r},e.id))})]})},G=e=>{let{buckets:t,projectRef:a,filterString:s,formattedGlobalUploadLimit:n,getPolicyCount:r}=e,i=0===t.length&&s.length>0;return(0,l.jsxs)(_,{data:t,estimateSize:()=>59,getItemKey:e=>e.id,"data-sentry-element":"VirtualizedTable","data-sentry-component":"BucketsTableVirtualized","data-sentry-source-file":"BucketsTable.tsx",children:[(0,l.jsx)(L,{mode:"virtualized",hasBuckets:t.length>0,"data-sentry-element":"BucketTableHeader","data-sentry-source-file":"BucketsTable.tsx"}),(0,l.jsx)(S,{paddingColSpan:5,emptyContent:i?(0,l.jsx)(F,{mode:"virtualized",filterString:s}):void 0,"data-sentry-element":"VirtualizedTableBody","data-sentry-source-file":"BucketsTable.tsx",children:e=>(0,l.jsx)(M,{mode:"virtualized",bucket:e,projectRef:a,formattedGlobalUploadLimit:n,getPolicyCount:r},e.id)})]})},X=()=>{var e;let{ref:t}=(0,i.g)(),a=(0,b.$)(),[N,v]=(0,r.useState)(null),[C,z]=(0,r.useState)(),[_,S]=(0,r.useState)(""),{data:A}=(0,o.Ij)({projectRef:t},{enabled:x.pe}),{data:H=[],isLoading:V}=(0,u.p)({projectRef:t}),{getPolicyCount:R,isLoading:I}=(0,m.L)(H),E=(0,y.z3)(null!=(e=null==A?void 0:A.fileSizeLimit)?e:0),P=V||I,D=H.filter(e=>!("type"in e)||"STANDARD"===e.type).filter(e=>0===_.length||e.id.toLowerCase().includes(_.toLowerCase())),L=(0,r.useMemo)(()=>"alphabetical"===a.sortBucket?D.sort((e,t)=>e.id.toLowerCase().trim().localeCompare(t.id.toLowerCase().trim())):D.sort((e,t)=>new Date(t.created_at)>new Date(e.created_at)?1:-1),[D,a.sortBucket]);return(0,l.jsxs)(l.Fragment,{children:[P||0!==H.filter(e=>!("type"in e)||"STANDARD"===e.type).length?(0,l.jsxs)(d.gu,{isFullWidth:!0,className:"h-full gap-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-grow justify-between gap-x-2 items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsx)(p.p,{size:"tiny",className:"flex-grow lg:flex-grow-0 w-52",placeholder:"Search for a bucket",value:_,onChange:e=>S(e.target.value),icon:(0,l.jsx)(s.A,{size:12})}),(0,l.jsxs)(h.rI,{children:[(0,l.jsx)(h.ty,{asChild:!0,children:(0,l.jsxs)(f.$,{type:"default",icon:(0,l.jsx)(n.A,{}),children:["Sorted by ","alphabetical"===a.sortBucket?"name":"created at"]})}),(0,l.jsx)(h.SQ,{align:"start",className:"w-40",children:(0,l.jsxs)(h.Hr,{value:a.sortBucket,onValueChange:e=>a.setSortBucket(e),children:[(0,l.jsx)(h.Ht,{value:"alphabetical",children:"Sort by name"}),(0,l.jsx)(h.Ht,{value:"created_at",children:"Sort by created at"})]})})]})]}),(0,l.jsx)(k.c,{buttonType:"primary",buttonClassName:"w-fit"})]}),P?(0,l.jsx)(c.yV,{}):(0,l.jsx)(j.Zp,{children:(0,l.jsx)(U,{buckets:L,projectRef:null!=t?t:"_",filterString:_,formattedGlobalUploadLimit:E,getPolicyCount:R})})]}):(0,l.jsx)(w.Z,{bucketType:"files",className:"mt-12"}),C&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.k,{visible:"edit"===N,bucket:C,onClose:()=>v(null)}),(0,l.jsx)(B.l,{visible:"empty"===N,bucket:C,onClose:()=>v(null)}),(0,l.jsx)(g.v,{visible:"delete"===N,bucket:C,onClose:()=>v(null)})]})]})};var W=a(10508),O=a(87829),Z=a(27843);let $=()=>(0,l.jsx)(X,{"data-sentry-element":"FilesBuckets","data-sentry-component":"StorageFilesPage","data-sentry-source-file":"index.tsx"});$.getLayout=e=>(0,l.jsx)(W.A,{children:(0,l.jsx)(Z.A,{title:"Storage",children:(0,l.jsx)(O.D,{children:e})})});let Q=$},96040:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(86848).A)("ArrowDownNarrowWide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]])}},e=>{e.O(0,[60858,15599,16110,44952,36538,43833,62941,21219,76984,72391,74004,40545,596,10508,48340,75187,29471,8750,27843,36487,13028,85530,90636,46593,38792],()=>e(e.s=57320)),_N_E=e.O()}]);