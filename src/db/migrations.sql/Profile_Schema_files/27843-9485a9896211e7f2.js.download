try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2944ef24-28e0-4558-a1a7-cdf1a011050a",e._sentryDebugIdIdentifier="sentry-dbid-2944ef24-28e0-4558-a1a7-cdf1a011050a")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27843],{24487:(e,t,n)=>{n.d(t,{Ay:()=>m});var r=n(80263),a=n(53239),s=n(7981),o=n(80100);function c(e){let{children:t,className:n,tag:a="div",style:s}=e;return(0,r.jsx)("".concat(a),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}c.Title=function(e){let{className:t,level:n=1,children:a,style:s}=e;return(0,r.jsx)("h".concat(n),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},c.Text=function(e){let{className:t,children:n,style:a,type:s,disabled:o,mark:c,code:l,keyboard:i,underline:u,strikethrough:d,strong:m,small:p}=e;return l?(0,r.jsx)("code",{style:a,children:n}):c?(0,r.jsx)("mark",{style:a,children:n}):i?(0,r.jsx)("kbd",{style:a,children:n}):m?(0,r.jsx)("strong",{style:a,children:n}):(0,r.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:n})},c.Link=function(e){let{children:t,target:n="_blank",href:a,className:s,onClick:o,style:c}=e;return(0,r.jsx)("a",{onClick:o,href:a,target:n,rel:"noopener noreferrer",style:c,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let l=(0,a.createContext)({type:"text"}),i=e=>{let{type:t}=e;return(0,r.jsx)(l.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function d(e){let{children:t,className:n,ulClassName:a,style:s,type:o="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:s,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(i,{type:o,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:a,children:t})})})}d.Item=function(e){let{children:t,icon:n,active:a,rounded:c,onClick:l,doNotCloseOverlay:i=!1,showActiveBar:d=!1,style:m}=e,p=(0,s.A)("menu"),{type:y}=u(),h=[p.item.base];h.push(p.item.variants[y].base),a?h.push(p.item.variants[y].active):h.push(p.item.variants[y].normal);let f=[p.item.content.base];a?f.push(p.item.content.active):f.push(p.item.content.normal);let x=[p.item.icon.base];return a?x.push(p.item.icon.active):x.push(p.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,o.cn)("outline-none",h),style:m,onClick:l,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("div",{className:"".concat(x.join(" ")," min-w-fit"),children:n}),(0,r.jsx)("span",{className:f.join(" "),children:t})]})},d.Group=function(e){let{children:t,icon:n,title:a}=e,o=(0,s.A)("menu"),{type:c}=u();return(0,r.jsxs)("div",{className:[o.group.base,o.group.variants[c]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("span",{className:o.group.icon,children:n}),(0,r.jsx)("span",{className:o.group.content,children:a}),t]})},d.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(c.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let m=d},27843:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(80263),a=n(52555),s=n.n(a),o=n(22891),c=n(78960),l=n(24487),i=n(21650),u=n(61767),d=n(39691);let m=()=>{let{ref:e}=(0,o.g)(),t=(0,d.kM)(),n=(0,c.mM)({projectRef:e}),a=(0,c.Dc)({projectRef:e});return(0,r.jsx)(l.Ay,{type:"pills",className:"my-6 flex flex-grow flex-col","data-sentry-element":"Menu","data-sentry-component":"StorageMenuV2","data-sentry-source-file":"StorageMenuV2.tsx",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(l.Ay.Group,{title:(0,r.jsx)("span",{className:"uppercase font-mono",children:"Manage"}),"data-sentry-element":"Menu.Group","data-sentry-source-file":"StorageMenuV2.tsx"}),u.Pz.map(o=>{let c=t===o,d=u.TD[o],m="analytics"===o&&n||"vectors"===o&&a;return(0,r.jsx)(s(),{href:"/project/".concat(e,"/storage/").concat(o),children:(0,r.jsx)(l.Ay.Item,{rounded:!0,active:c,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"truncate",children:d.displayName}),m&&(0,r.jsx)(i.E,{variant:"default",size:"small",children:"New"})]})})},o)})]}),o.pe&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-px w-full bg-border"}),(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(l.Ay.Group,{title:(0,r.jsx)("span",{className:"uppercase font-mono",children:"Configuration"})}),(0,r.jsx)(s(),{href:"/project/".concat(e,"/storage/s3"),children:(0,r.jsx)(l.Ay.Item,{rounded:!0,active:"s3"===t,children:(0,r.jsx)("p",{className:"truncate",children:"S3"})})})]})]})]})})};var p=n(9497),y=n(29471);let h=(0,p.r)(e=>{let{title:t,children:n}=e;return(0,r.jsx)(y.k,{title:t||"Storage",product:"Storage",productMenu:(0,r.jsx)(m,{}),"data-sentry-element":"ProjectLayout","data-sentry-component":"StorageLayout","data-sentry-source-file":"StorageLayout.tsx",children:n})})},39691:(e,t,n)=>{n.d(t,{EQ:()=>g,Xn:()=>x,_S:()=>u,kM:()=>j,kg:()=>y,wS:()=>f});var r=n(42092),a=n.n(r),s=n(107),o=n.n(s),c=n(80814),l=n(61767);let i=e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return new Uint32Array([t])[0].toString(36)},u=(e,t)=>0===t.length?t:p(d(e,t)),d=(e,t)=>{let n=e.map(e=>e.name);return t.map(e=>{let{definition:t,check:r}=e,a=null!==t?m(t):m(r);return a&&n.includes(a)?{...e,bucket:a}:{...e,bucket:"Ungrouped"}})},m=e=>{var t;let[n]=(null!=(t=null==e?void 0:e.split(" AND "))?t:[]).filter(e=>e.includes("bucket_id"));return n?n.split("'")[1]:null},p=e=>{let t=o()(e,"bucket");return Object.keys(t).map(e=>({name:e,policies:t[e]}))},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:r,definition:a,allowedOperations:s,roles:o}=t,c=a?a.replace(/\s+/g," ").trim():"";return s.map((t,a)=>h(a,e,r,c,t,o,n))},h=(e,t,n,r,a,s,o)=>{let c=i(t);return{name:o?"".concat(n," ").concat(c,"_").concat(e):n,definition:"INSERT"===a?void 0:"(".concat(r,")"),action:"PERMISSIVE",check:"INSERT"===a?"(".concat(r,")"):void 0,command:a,schema:"storage",table:"objects",roles:s.length>0?s:void 0}},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(l.Uw).filter(t=>{let n=l.Uw[t];if(0===a()(n,e).length)return t})},x=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:r,definition:a,allowedOperations:s,roles:o}=t;return s.map((t,s)=>((e,t,n,r,a,s,o)=>{let c=i(t),l=o?"".concat(n," ").concat(c,"_").concat(e):n,u="Add policy for the ".concat(a,' operation under the policy "').concat(n,'"'),d=0===s.length?["public"]:s;return{description:u,statement:'\n    CREATE POLICY "'.concat(l,'"\n    ON storage.objects\n    FOR ').concat(a,"\n    TO ").concat(d.join(", "),"\n    ").concat("INSERT"===a?"WITH CHECK":"USING"," (").concat(r,");\n").replace(/\s+/g," ").trim()}})(s,e,r,a||"",t,o,n))},g=(e,t)=>e.replace("{bucket_id}","'".concat(t,"'")),j=()=>(0,c.useRouter)().pathname.split("/")[4]},78960:(e,t,n)=>{n.d(t,{Dc:()=>d,Ij:()=>i,mM:()=>u});var r=n(56947),a=n(22891),s=n(24523),o=n(85039),c=n(30659);async function l(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:r,error:a}=await (0,s.Jt)("/platform/projects/{ref}/config/storage",{params:{path:{ref:n}},signal:t});return a&&(404===a.code?(0,s.H4)({...a,message:"Storage configuration not found."}):(0,s.H4)(a)),r}let i=function(e){let{projectRef:t}=e,{enabled:n=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)({queryKey:c.n.storage(t),queryFn:e=>{let{signal:n}=e;return l({projectRef:t},n)},enabled:n&&o.pe&&void 0!==t,...a})},u=e=>{var t;let{projectRef:n}=e,{data:r}=i({projectRef:n});return!!(null==r||null==(t=r.features.icebergCatalog)?void 0:t.enabled)},d=e=>{let{projectRef:t}=e;return(0,a._P)("storageAnalyticsVector")}}}]);