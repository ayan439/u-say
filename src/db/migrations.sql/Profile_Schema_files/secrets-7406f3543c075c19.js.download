try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9e2eb33f-96fd-4937-a265-9e68d7df4770",e._sentryDebugIdIdentifier="sentry-dbid-9e2eb33f-96fd-4937-a265-9e68d7df4770")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83145],{16097:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},19686:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>c});var r={};s.r(r),s.d(r,{BRAND:()=>o.qt,DIRTY:()=>a.jm,EMPTY_PATH:()=>a.I3,INVALID:()=>a.uY,NEVER:()=>o.tm,OK:()=>a.OK,ParseStatus:()=>a.MY,Schema:()=>o.Sj,ZodAny:()=>o.Ml,ZodArray:()=>o.n,ZodBigInt:()=>o.Lr,ZodBoolean:()=>o.WF,ZodBranded:()=>o.eN,ZodCatch:()=>o.hw,ZodDate:()=>o.aP,ZodDefault:()=>o.Xi,ZodDiscriminatedUnion:()=>o.jv,ZodEffects:()=>o.k1,ZodEnum:()=>o.Vb,ZodError:()=>i.G,ZodFirstPartyTypeKind:()=>o.kY,ZodFunction:()=>o.CZ,ZodIntersection:()=>o.Jv,ZodIssueCode:()=>i.eq,ZodLazy:()=>o.Ih,ZodLiteral:()=>o.DN,ZodMap:()=>o.Ut,ZodNaN:()=>o.Tq,ZodNativeEnum:()=>o.WM,ZodNever:()=>o.iS,ZodNull:()=>o.PQ,ZodNullable:()=>o.l1,ZodNumber:()=>o.rS,ZodObject:()=>o.bv,ZodOptional:()=>o.Ii,ZodParsedType:()=>l.Zp,ZodPipeline:()=>o._c,ZodPromise:()=>o.$i,ZodReadonly:()=>o.EV,ZodRecord:()=>o.b8,ZodSchema:()=>o.lK,ZodSet:()=>o.Kz,ZodString:()=>o.ND,ZodSymbol:()=>o.K5,ZodTransformer:()=>o.BG,ZodTuple:()=>o.y0,ZodType:()=>o.aR,ZodUndefined:()=>o._Z,ZodUnion:()=>o.fZ,ZodUnknown:()=>o._,ZodVoid:()=>o.a0,addIssueToContext:()=>a.zn,any:()=>o.bz,array:()=>o.YO,bigint:()=>o.o,boolean:()=>o.zM,coerce:()=>o.au,custom:()=>o.Ie,date:()=>o.p6,datetimeRegex:()=>o.fm,defaultErrorMap:()=>n.su,discriminatedUnion:()=>o.gM,effect:()=>o.QZ,enum:()=>o.k5,function:()=>o.fH,getErrorMap:()=>n.$W,getParsedType:()=>l.CR,instanceof:()=>o.Nl,intersection:()=>o.E$,isAborted:()=>a.G4,isAsync:()=>a.xP,isDirty:()=>a.DM,isValid:()=>a.fn,late:()=>o.fn,lazy:()=>o.RZ,literal:()=>o.eu,makeIssue:()=>a.y7,map:()=>o.Tj,nan:()=>o.oi,nativeEnum:()=>o.fc,never:()=>o.Zm,null:()=>o.ch,nullable:()=>o.me,number:()=>o.ai,object:()=>o.Ik,objectUtil:()=>l.o6,oboolean:()=>o.yN,onumber:()=>o.p7,optional:()=>o.lq,ostring:()=>o.Di,pipeline:()=>o.Tk,preprocess:()=>o.vk,promise:()=>o.iv,quotelessJson:()=>i.WI,record:()=>o.g1,set:()=>o.hZ,setErrorMap:()=>n.pJ,strictObject:()=>o.re,string:()=>o.Yj,symbol:()=>o.HR,transformer:()=>o.Gu,tuple:()=>o.PV,undefined:()=>o.Vx,union:()=>o.KC,unknown:()=>o.L5,util:()=>l.ZS,void:()=>o.rI});var n=s(54686),a=s(93298),l=s(14595),o=s(10663),i=s(63324);let c=r},39624:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(80263),n=s(12123);let a=e=>{let{resourceText:t,isFullPage:s=!1}=e,a=()=>(0,r.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(n.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,r.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return s?(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,r.jsx)("div",{className:"w-[550px]",children:(0,r.jsx)(a,{})})}):(0,r.jsx)(a,{})}},74415:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},81294:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eg});var r=s(80263),n=s(60045),a=s(31092),l=s(53239),o=s(73969),i=s(22891),c=s(44168),d=s(39624),u=s(53931),m=s(32144),x=s(80251),f=s(24523);let h={list:e=>["projects",e,"edge_functions_secrets"]};async function y(e){let{projectRef:t,secrets:s}=e;if(!t)throw Error("Project ref is required");let{data:r,error:n}=await (0,f.yH)("/v1/projects/{ref}/secrets",{params:{path:{ref:t}},body:s});return n&&(0,f.H4)(n),r}let p=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,m.jE)();return(0,x.n)({mutationFn:e=>y(e),async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries({queryKey:h.list(a)}),await (null==e?void 0:e(t,s,n))},async onError(e,s,r){void 0===t?o.oR.error("Failed to delete secrets: ".concat(e.message)):t(e,s,r)},...s})};var j=s(56947);async function g(e,t){let{projectRef:s}=e;if(!s)throw Error("Project ref is required");let{data:r,error:n}=await (0,f.Jt)("/v1/projects/{ref}/secrets",{params:{path:{ref:s}},signal:t});return n&&(0,f.H4)(n),r}let S=function(e){let{projectRef:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,j.I)({queryKey:h.list(t),queryFn:e=>{let{signal:s}=e;return g({projectRef:t},s)},enabled:s&&void 0!==t,...r})};var v=s(80090),b=s(78511),N=s(21650),E=s(78039),w=s(64758),A=s(68421),C=s(32981),F=s(87494),Z=s(19686);async function T(e){let{projectRef:t,secrets:s}=e;if(!t)throw Error("Project ref is required");let{data:r,error:n}=await (0,f.bE)("/v1/projects/{ref}/secrets",{params:{path:{ref:t}},body:s});return n&&(0,f.H4)(n),r}let _=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,m.jE)();return(0,x.n)({mutationFn:e=>T(e),async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries({queryKey:h.list(a)}),await (null==e?void 0:e(t,s,n))},async onError(e,s,r){void 0===t?o.oR.error("Failed to create secrets: ".concat(e.message)):t(e,s,r)},...s})};var M=s(23169),D=s(93901),I=s(16097);let k=e=>{let{visible:t,onCancel:s,onConfirm:n,isCreating:a,secretName:l}=e;return(0,r.jsx)(A.A,{visible:t,size:"medium",title:"Confirm replacing existing secret",confirmLabel:"Replace secret",confirmLabelLoading:"Replacing secret",variant:"warning",loading:a,onCancel:s,onConfirm:n,"data-sentry-element":"ConfirmationModal","data-sentry-component":"DuplicateSecretWarningModal","data-sentry-source-file":"DuplicateSecretWarningModal.tsx",children:(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:['A secret with the name "',l,'" already exists. Continuing will replace the existing secret with the new value. This action cannot be undone. Are you sure you want to proceed?']})})};var P=s(65887),R=s(99779);let B=Z.Ay.object({secrets:Z.Ay.array(Z.Ay.object({name:Z.Ay.string().min(1,"Please provide a name for your secret").refine(e=>!e.match(/^(SUPABASE_).*/),{message:"Name must not start with the SUPABASE_ prefix"}),value:Z.Ay.string().min(1,"Please provide a value for your secret")}))}),z={secrets:[{name:"",value:""}]},L=()=>{let{ref:e}=(0,i.g)(),[t,s]=(0,l.useState)(!1),[n,a]=(0,l.useState)(""),[c,d]=(0,l.useState)(null),u=(0,F.mN)({resolver:(0,C.u)(B),defaultValues:z}),{fields:m,append:x,remove:f}=(0,F.jz)({control:u.control,name:"secrets"}),{data:h}=S({projectRef:e}),{mutate:y,isLoading:p}=_({onSuccess:(e,t)=>{o.oR.success('Successfully created new secret "'.concat(t.secrets[0].name,'"')),setTimeout(()=>u.reset(),0)}}),j=async t=>{let s=(null==h?void 0:h.map(e=>e.name))||[],r=t.secrets.find(e=>s.includes(e.name));if(r){a(r.name),d(t);return}y({projectRef:e,secrets:t.secrets})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.lV,{...u,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"AddNewSecretForm.tsx",children:(0,r.jsx)("form",{className:"w-full",onSubmit:u.handleSubmit(j),children:(0,r.jsxs)(E.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"AddNewSecretForm.tsx",children:[(0,r.jsx)(E.aR,{"data-sentry-element":"CardHeader","data-sentry-source-file":"AddNewSecretForm.tsx",children:(0,r.jsx)(E.ZB,{"data-sentry-element":"CardTitle","data-sentry-source-file":"AddNewSecretForm.tsx",children:"Add or replace secrets"})}),(0,r.jsxs)(E.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"AddNewSecretForm.tsx",children:[m.map((e,n)=>(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-4 mb-4",children:[(0,r.jsx)(P.zB,{control:u.control,name:"secrets.".concat(n,".name"),render:e=>{let{field:t}=e;return(0,r.jsxs)(P.eI,{className:"w-full",children:[(0,r.jsx)(P.lR,{children:"Name"}),(0,r.jsx)(P.MJ,{children:(0,r.jsx)(w.p,{...t,placeholder:"e.g. CLIENT_KEY",onPaste:e=>(function(e){var t;e.preventDefault();let s=null==(t=e.clipboardData)?void 0:t.getData("text");if(!s)return;if(!s.includes("=")){let t=e.target.name;if(null==t?void 0:t.includes("secrets")){let[e,r,n]=t.match(/secrets\.(\d+)\.(\w+)/)||[];if(r&&n){let e=parseInt(r);u.setValue("secrets.".concat(e,".").concat(n),s);return}}}let r=[];try{let e=JSON.parse(s);Object.entries(e).forEach(e=>{let[t,s]=e;r.push({name:t,value:String(s)})})}catch(e){s.split(/\n/).forEach(e=>{let[t,...s]=e.split("=");if(t&&s.length){let e=s.join("=").trim();r.push({name:t.trim(),value:e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e})}})}if(r.length){let e=u.getValues("secrets").filter(e=>e.name||e.value);u.setValue("secrets",[...e,...r])}})(e.nativeEvent)})}),(0,r.jsx)(P.C5,{})]})}}),(0,r.jsx)(P.zB,{control:u.control,name:"secrets.".concat(n,".value"),render:e=>{let{field:n}=e;return(0,r.jsxs)(P.eI,{className:"w-full relative",children:[(0,r.jsx)(P.lR,{children:"Value"}),(0,r.jsx)(P.MJ,{children:(0,r.jsx)(w.p,{...n,type:t?"text":"password","data-1p-ignore":!0,"data-lpignore":"true","data-form-type":"other","data-bwignore":!0,actions:(0,r.jsx)("div",{className:"mr-1",children:(0,r.jsx)(R.$,{type:"text",className:"px-1",icon:t?(0,r.jsx)(M.A,{}):(0,r.jsx)(D.A,{}),onClick:()=>s(!t)})})})}),(0,r.jsx)(P.C5,{})]})}}),(0,r.jsx)(R.$,{type:"default",className:"h-[34px] mt-6",icon:(0,r.jsx)(I.A,{}),onClick:()=>m.length>1?f(n):u.reset(z)})]},e.id)),(0,r.jsx)(R.$,{type:"default",onClick:()=>{u.getValues("secrets").every(e=>!e.name&&!e.value)&&m.forEach((e,t)=>f(t)),x({name:"",value:""})},"data-sentry-element":"Button","data-sentry-source-file":"AddNewSecretForm.tsx",children:"Add another"})]}),(0,r.jsxs)(E.wL,{className:"justify-between space-x-2","data-sentry-element":"CardFooter","data-sentry-source-file":"AddNewSecretForm.tsx",children:[(0,r.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Insert or update multiple secrets at once by pasting key-value pairs"}),(0,r.jsx)(R.$,{type:"primary",htmlType:"submit",disabled:p,loading:p,"data-sentry-element":"Button","data-sentry-source-file":"AddNewSecretForm.tsx",children:p?"Saving...":m.length>1?"Bulk save":"Save"})]})]})})}),(0,r.jsx)(k,{visible:!!n,onCancel:()=>{a(""),d(null)},onConfirm:()=>{c&&(y({projectRef:e,secrets:c.secrets}),a(""),d(null))},isCreating:p,secretName:n,"data-sentry-element":"DuplicateSecretWarningModal","data-sentry-source-file":"AddNewSecretForm.tsx"})]})};var H=s(77444),V=s(74415),Y=s(33922),W=s(23729),q=s(21162),O=s(88044);let K=e=>{let{secret:t,onSelectEdit:s,onSelectDelete:a}=e,{can:l}=(0,v.Qp)(n.aG.SECRETS_WRITE,"*"),o=!!t.name.match(/^(SUPABASE_).*/);return(0,r.jsxs)(b.Hj,{"data-sentry-element":"TableRow","data-sentry-component":"EdgeFunctionSecret","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:[(0,r.jsx)(b.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,r.jsx)("p",{className:"truncate py-2",children:t.name})}),(0,r.jsx)(b.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,r.jsx)("p",{className:"font-mono text-sm max-w-96 truncate text-foreground-light",title:t.value,children:t.value})}),(0,r.jsx)(b.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:t.updated_at?(0,r.jsx)(O.T,{displayAs:"utc",utcTimestamp:t.updated_at,labelFormat:"DD MMM YYYY HH:mm:ss (ZZ)",className:"!text-sm text-foreground-light whitespace-nowrap"}):"-"}),(0,r.jsx)(b.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsxs)(q.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:[(0,r.jsx)(q.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,r.jsx)(R.$,{"aria-label":"More options",type:"default",className:"px-1",icon:(0,r.jsx)(H.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"EdgeFunctionSecret.tsx"})}),(0,r.jsxs)(q.SQ,{side:"bottom",align:"end",className:"w-52","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:[(0,r.jsx)(q._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,r.jsx)(W.G,{type:"text",icon:(0,r.jsx)(V.A,{size:14}),className:"w-full justify-start group text-inherit",disabled:!l||o,onClick:()=>s(),tooltip:{content:{side:"bottom",text:o?"This is a reserved secret and cannot be changed":l?void 0:"You need additional permissions to edit edge function secrets"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:"Edit secret"})}),(0,r.jsx)(q.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"EdgeFunctionSecret.tsx"}),(0,r.jsx)(q._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,r.jsx)(W.G,{type:"text",icon:(0,r.jsx)(Y.A,{size:14,className:"group-[&:not(:disabled)]:text-destructive"}),className:"w-full justify-start group text-inherit",disabled:!l||o,onClick:()=>a(),tooltip:{content:{side:"bottom",text:o?"This is a reserved secret and cannot be deleted":l?void 0:"You need additional permissions to delete edge function secrets"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:"Delete secret"})})]})]})})})]})};var U=s(68152),$=s(47814),G=s(65346),J=s(75878),Q=s(80100),X=s(27371),ee=s(80421),et=s(44053);let es="edit-secret-sidepanel",er=Z.Ay.object({name:Z.Ay.string().min(1,"Please provide a name for your secret"),value:Z.Ay.string().min(1,"Please provide a value for your secret")});function en(e){let{secret:t,visible:s,onClose:n}=e,a=(0,$.A)(null==t?void 0:t.name),c=(0,F.mN)({resolver:(0,C.u)(er)});(0,l.useEffect)(()=>{if(s){var e;c.reset({name:null!=(e=a.current)?e:"",value:""})}},[c,a,s]);let d=c.formState.isValid,{ref:u}=(0,i.g)(),{mutate:m,isLoading:x}=_({onSuccess:(e,t)=>{o.oR.success('Successfully updated secret "'.concat(t.secrets[0].name,'"')),n()}}),f=async e=>{let{name:t,value:s}=e;m({projectRef:u,secrets:[{name:t,value:s}]})},{confirmOnClose:h,modal:y}=ec({checkIsDirty:()=>c.formState.isDirty,onClose:n});return(0,r.jsxs)(G.cj,{open:s,onOpenChange:h,"data-sentry-element":"Sheet","data-sentry-component":"EditSecretSheet","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,r.jsxs)(G.h,{showClose:!1,size:"default",className:"!min-w-screen lg:!min-w-[600px] flex flex-col","data-sentry-element":"SheetContent","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,r.jsx)(ea,{"data-sentry-element":"Header","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,r.jsx)(J.w,{"data-sentry-element":"Separator","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,r.jsx)(el,{form:c,onSubmit:f,"data-sentry-element":"FormBody","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,r.jsxs)(G.XW,{"data-sentry-element":"SheetFooter","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,r.jsx)(R.$,{disabled:x,type:"default",onClick:h,"data-sentry-element":"Button","data-sentry-source-file":"EditSecretSheet.tsx",children:"Cancel"}),(0,r.jsx)(R.$,{form:es,htmlType:"submit",disabled:!d,loading:x,"data-sentry-element":"Button","data-sentry-source-file":"EditSecretSheet.tsx",children:"Save"})]})]}),y]})}let ea=()=>(0,r.jsxs)(G.Fm,{className:"py-3 flex flex-row gap-3 items-center border-b-0","data-sentry-element":"SheetHeader","data-sentry-component":"Header","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,r.jsxs)(G.kN,{className:(0,Q.cn)("text-muted hover:text ring-offset-background hover:opacity-100","focus:outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none data-[state=open]:bg-secondary","transition"),"data-sentry-element":"SheetClose","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,r.jsx)(U.A,{className:"h-3 w-3","data-sentry-element":"X","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,r.jsx)(G.qp,{"data-sentry-element":"SheetTitle","data-sentry-source-file":"EditSecretSheet.tsx",children:"Edit secret"})]}),el=e=>{let{form:t,onSubmit:s}=e;return(0,r.jsx)(P.lV,{...t,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"FormBody","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,r.jsxs)("form",{id:es,className:"flex-grow overflow-auto",onSubmit:t.handleSubmit(s),children:[(0,r.jsx)(G.Xc,{"data-sentry-element":"SheetSection","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,r.jsx)(eo,{form:t,"data-sentry-element":"NameField","data-sentry-source-file":"EditSecretSheet.tsx"})}),(0,r.jsx)(J.w,{"data-sentry-element":"Separator","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,r.jsx)(G.Xc,{className:"space-y-4","data-sentry-element":"SheetSection","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,r.jsx)(ei,{form:t,"data-sentry-element":"SecretField","data-sentry-source-file":"EditSecretSheet.tsx"})}),(0,r.jsx)(J.w,{"data-sentry-element":"Separator","data-sentry-source-file":"EditSecretSheet.tsx"})]})})},eo=e=>{let{form:t}=e;return(0,r.jsx)(P.zB,{control:t.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsx)(et.M,{label:"Name",layout:"horizontal",children:(0,r.jsx)(P.MJ,{children:(0,r.jsx)(X.p,{...t,readOnly:!0,className:"!text-foreground-light cursor-not-allowed"})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"NameField","data-sentry-source-file":"EditSecretSheet.tsx"})},ei=e=>{let{form:t}=e,[s,n]=(0,l.useState)(!1);return(0,r.jsx)(P.zB,{control:t.control,name:"value",render:e=>{let{field:t}=e;return(0,r.jsx)(et.M,{label:"Value",layout:"horizontal",description:"Secrets canâ€™t be retrieved once saved. Enter a new value to overwrite the existing value.",children:(0,r.jsx)(P.MJ,{children:(0,r.jsx)(ee.A,{...t,type:s?"text":"password",placeholder:"my-secret-value","data-1p-ignore":!0,"data-lpignore":"true","data-form-type":"other","data-bwignore":!0,actions:(0,r.jsx)("div",{className:"mr-1",children:(0,r.jsx)(R.$,{type:"text",className:"px-1",icon:s?(0,r.jsx)(M.A,{}):(0,r.jsx)(D.A,{}),onClick:()=>n(!s)})})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"SecretField","data-sentry-source-file":"EditSecretSheet.tsx"})},ec=e=>{let{checkIsDirty:t,onClose:s}=e,[n,a]=(0,l.useState)(!1);return{confirmOnClose:(0,l.useCallback)(()=>{t()?a(!0):s()},[t,s]),modal:(0,r.jsx)(ed,{visible:n,onClose:()=>{a(!1),s()},onCancel:()=>a(!1)})}},ed=e=>{let{visible:t,onClose:s,onCancel:n}=e;return(0,r.jsx)(A.A,{visible:t,title:"Discard changes",confirmLabel:"Discard",onCancel:n,onConfirm:s,"data-sentry-element":"ConfirmationModal","data-sentry-component":"CloseConfirmationModal","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"There are unsaved changes. Are you sure you want to close the panel? Your changes will be lost."})})},eu=()=>{var e;let{ref:t}=(0,i.g)(),[s,m]=(0,l.useState)(""),[x,f]=(0,l.useState)(),{can:h,isLoading:y}=(0,v.Qp)(n.aG.SECRETS_READ,"*"),{can:j}=(0,v.Qp)(n.aG.SECRETS_WRITE,"*"),{data:g,error:C,isLoading:F,isSuccess:Z,isError:T}=S({projectRef:t}),{mutate:_,isLoading:M}=p({onSuccess:()=>{o.oR.success("Successfully deleted ".concat(null==x?void 0:x.secret.name)),f(void 0)}}),D=s.length>0?null!=(e=null==g?void 0:g.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())))?e:[]:null!=g?g:[],I=[(0,r.jsx)(b.nd,{children:"Name"},"secret-name"),(0,r.jsxs)(b.nd,{className:"flex items-center gap-x-2",children:["Digest"," ",(0,r.jsx)(N.E,{color:"scale",className:"font-mono",children:"SHA256"})]},"secret-value"),(0,r.jsx)(b.nd,{children:"Updated at"},"secret-updated-at"),(0,r.jsx)(b.nd,{},"actions")];return(0,r.jsxs)(r.Fragment,{children:[F||y?(0,r.jsx)(u.yV,{}):(0,r.jsxs)(r.Fragment,{children:[T&&(0,r.jsx)(c.A,{error:C,subject:"Failed to retrieve project secrets"}),Z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6",children:j?(0,r.jsx)(L,{}):(0,r.jsx)(d.A,{resourceText:"manage this project's edge function secrets"})}),j&&!h?(0,r.jsx)(d.A,{resourceText:"view this project's edge function secrets"}):h?(0,r.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,r.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:(0,r.jsx)(w.p,{size:"small",className:"w-full md:w-80",placeholder:"Search for a secret",value:s,onChange:e=>m(e.target.value),icon:(0,r.jsx)(a.A,{size:14})})}),(0,r.jsx)(E.Zp,{children:(0,r.jsxs)(b.XI,{children:[(0,r.jsx)(b.A0,{children:(0,r.jsx)(b.Hj,{children:I})}),(0,r.jsx)(b.BF,{children:D.length>0?D.map(e=>(0,r.jsx)(K,{secret:e,onSelectEdit:()=>f({secret:e,op:"edit"}),onSelectDelete:()=>f({secret:e,op:"delete"})},e.name)):0===D.length&&s.length>0?(0,r.jsx)(b.Hj,{children:(0,r.jsxs)(b.nA,{colSpan:I.length,children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',s,'" did not return any results']})]})}):(0,r.jsx)(b.Hj,{children:(0,r.jsxs)(b.nA,{colSpan:I.length,children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"No secrets created"}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no secrets associated with your project yet"})]})})})]})})]}):null]})]}),(0,r.jsx)(en,{secret:null==x?void 0:x.secret,visible:(null==x?void 0:x.op)==="edit",onClose:()=>f(void 0),"data-sentry-element":"EditSecretSheet","data-sentry-source-file":"EdgeFunctionSecrets.tsx"}),(0,r.jsx)(A.A,{variant:"destructive",loading:M,visible:(null==x?void 0:x.op)==="delete",confirmLabel:"Delete secret",confirmLabelLoading:"Deleting secret",title:'Confirm to delete secret "'.concat(null==x?void 0:x.secret.name,'"'),onCancel:()=>f(void 0),onConfirm:()=>{void 0!==x&&_({projectRef:t,secrets:[x.secret.name]})},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"EdgeFunctionSecrets.tsx",children:(0,r.jsx)("p",{className:"text-sm",children:"Before removing this secret, ensure none of your Edge Functions are actively using it. This action cannot be undone."})})]})};var em=s(1421),ex=s(10508),ef=s(56560),eh=s(8750),ey=s(37873),ep=s(85039);let ej=()=>(0,r.jsx)(ey.eh,{size:"large","data-sentry-element":"ScaffoldContainer","data-sentry-component":"SecretsPage","data-sentry-source-file":"secrets.tsx",children:(0,r.jsx)(ey.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"secrets.tsx",children:ep.pe?(0,r.jsx)(eu,{}):(0,r.jsx)(em.Ad,{})})});ej.getLayout=e=>(0,r.jsx)(ex.A,{children:(0,r.jsx)(ef.A,{children:(0,r.jsx)(eh.M,{size:"large",title:"Edge Function Secrets",subtitle:"Manage the secrets for your project's Edge Functions",children:e})})});let eg=ej},91517:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/functions/secrets",function(){return s(81294)}])}},e=>{e.O(0,[60858,15599,16110,44952,36538,43833,76984,72391,74004,40545,596,10508,48340,75187,29471,8750,35271,39515,90636,46593,38792],()=>e(e.s=91517)),_N_E=e.O()}]);