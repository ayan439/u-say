try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f863a551-e4b9-4e79-8882-0ed34c723c0e",e._sentryDebugIdIdentifier="sentry-dbid-f863a551-e4b9-4e79-8882-0ed34c723c0e")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48819],{1374:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},13655:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},21416:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(80263),a=s(52555),n=s.n(a),l=s(24487),i=s(21650),o=s(99779);let c=e=>{let{name:t="",isActive:s,isExternal:a,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:h,textClassName:x="",hoverText:p="",label:y}=e,f=(0,r.jsx)(l.Ay.Item,{icon:c,rounded:!0,active:s,onClick:h,children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,r.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex space-between items-center gap-2 truncate w-full "+x,children:[(0,r.jsx)("span",{className:"truncate flex-1",children:t}),void 0!==y&&(0,r.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 uppercase",children:y})]}),d&&(0,r.jsx)("div",{children:d})]})});return u?a?(0,r.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,r.jsx)(n(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,r.jsx)(n(),{href:u,className:"block",target:m,children:f}):f}},22731:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/users",function(){return s(42366)}])},24487:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>m});var r=s(80263),a=s(53239),n=s(7981),l=s(80100);function i(e){let{children:t,className:s,tag:a="div",style:n}=e;return(0,r.jsx)("".concat(a),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:s=1,children:a,style:n}=e;return(0,r.jsx)("h".concat(s),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},i.Text=function(e){let{className:t,children:s,style:a,type:n,disabled:l,mark:i,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:h}=e;return o?(0,r.jsx)("code",{style:a,children:s}):i?(0,r.jsx)("mark",{style:a,children:s}):c?(0,r.jsx)("kbd",{style:a,children:s}):m?(0,r.jsx)("strong",{style:a,children:s}):(0,r.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},i.Link=function(e){let{children:t,target:s="_blank",href:a,className:n,onClick:l,style:i}=e;return(0,r.jsx)("a",{onClick:l,href:a,target:s,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,a.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,r.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:s,ulClassName:a,style:n,type:l="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:n,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(c,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:a,children:t})})})}u.Item=function(e){let{children:t,icon:s,active:a,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,h=(0,n.A)("menu"),{type:x}=d(),p=[h.item.base];p.push(h.item.variants[x].base),a?p.push(h.item.variants[x].active):p.push(h.item.variants[x].normal);let y=[h.item.content.base];a?y.push(h.item.content.active):y.push(h.item.content.normal);let f=[h.item.icon.base];return a?f.push(h.item.icon.active):f.push(h.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:m,onClick:o,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,r.jsx)("div",{className:"".concat(f.join(" ")," min-w-fit"),children:s}),(0,r.jsx)("span",{className:y.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:s,title:a}=e,l=(0,n.A)("menu"),{type:i}=d();return(0,r.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,r.jsx)("span",{className:l.group.icon,children:s}),(0,r.jsx)("span",{className:l.group.content,children:a}),t]})},u.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(i.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let m=u},26686:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(17702),a=s(56947),n=s(53434),l=s.n(n),i=s(53239),o=s(77727),c=s(75187),d=s(24523),u=s(80038),m=s(88419);let h=function(e){var t,s,n,h,x;let p,y,{projectRef:f,table:g,filterOverride:v,limit:j}=e,w=(0,o.Et)(o.Z8),[_,b]=(0,i.useState)(new Date().toISOString()),{timestampStart:S,timestampEnd:N,filters:k,search:A}=(0,m.B)(),C=(0,i.useMemo)(()=>S||w.calcFrom(),[S,w]),U=(0,i.useMemo)(()=>N||w.calcTo(),[N,w]),M=(0,i.useMemo)(()=>({...k,...v,...A?{search_query:A}:{}}),[JSON.stringify(k),JSON.stringify(v),A]),D=(0,i.useMemo)(()=>({iso_timestamp_start:C,iso_timestamp_end:U,sql:(0,c.qr)(g,M,j)}),[C,U,g,M,j]),T=(0,i.useMemo)(()=>["projects",f,"logs",D],[f,D]),{data:I,isSuccess:E,isLoading:L,isRefetching:F,error:z,fetchNextPage:P,isFetchingNextPage:q,refetch:R}=(0,r.q)({queryKey:T,queryFn:async e=>{let{signal:t,pageParam:s}=e,{data:r,error:a}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{...D,iso_timestamp_end:s||D.iso_timestamp_end}},signal:t});if(a)throw a;return r},refetchOnWindowFocus:!1,getNextPageParam(e){var t,s;if((null!=(s=null==(t=e.result)?void 0:t.length)?s:0)===0)return;let r=e.result.length,{timestamp:a}=e.result[r-1];return l().utc(Number(a/1e3)).toISOString()}}),{logData:V,error:O,oldestTimestamp:H}=(0,i.useMemo)(()=>{var e,t;let s=[],r=z?z.message:null;null==I||null==(e=I.pages)||e.forEach(e=>{(null==e?void 0:e.result)&&(s=[...s,...e.result]),!r&&(null==e?void 0:e.error)&&(r=e.error)});let a=s.length>0?null==(t=s[s.length-1])?void 0:t.timestamp:void 0;return{logData:s,error:r,oldestTimestamp:a}},[null==I?void 0:I.pages]),B=(0,i.useMemo)(()=>(0,c.oZ)(g,M),[g,M]),Z=(0,i.useMemo)(()=>["projects",f,"logs-count",{projectRef:f,sql:B,iso_timestamp_start:_,iso_timestamp_end:U,table:g,mergedFilters:M}],[f,B,_,U,g,M]),{data:G}=(0,a.I)({queryKey:Z,queryFn:async e=>{let{signal:t}=e,{data:s,error:r}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{sql:B,iso_timestamp_start:_,iso_timestamp_end:U}},signal:t});if(r)throw r;return s},refetchOnWindowFocus:!1,refetchInterval:6e4,enabled:!O&&!!I&&(null==I||null==(t=I.pages)?void 0:t.length)>0}),$=null!=(h=null==G||null==(n=G.result)||null==(s=n[0])?void 0:s.count)?h:0,K=(0,i.useMemo)(()=>(0,c.tS)(g,D,M),[g,D,M]),J=(0,i.useMemo)(()=>["projects",f,"logs-chart",{projectRef:f,sql:K,iso_timestamp_start:C,iso_timestamp_end:U}],[f,K,C,U]),{data:W,refetch:X}=(0,a.I)({queryKey:J,queryFn:async e=>{let{signal:t}=e,{data:s,error:r}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{iso_timestamp_start:C,iso_timestamp_end:U,sql:K}},signal:t});if(r)throw r;return s},refetchOnWindowFocus:!1}),Y=(0,i.useCallback)(async()=>{b(new Date().toISOString()),X(),R()},[R,X]),Q=(p=null!=(x=null==W?void 0:W.result)?x:[],y="timestamp",(0,i.useMemo)(()=>0!==p.length&&(0,c.l8)(p[0][y])?null==p?void 0:p.map(e=>(e[y]=(0,c.RT)(e[y]),e)):p,[JSON.stringify(p)])),{data:ee,error:et}=(0,u.m)(Q,"timestamp","count",0,C,U||new Date().toISOString());return{newCount:$,logData:V,isSuccess:E,isLoading:L||F,isLoadingOlder:q,error:O||et,filters:M,params:D,oldestTimestamp:H?String(H):void 0,eventChartData:ee,refresh:Y,loadOlder:()=>P()}}},29842:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},29948:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},30138:(e,t,s)=>{"use strict";function r(e,t){let s="00000000-0000-0000-0000-000000000000".split("").map((t,s)=>{var r;return"-"===t?t:null!=(r=e[s])?r:t});if(e.length>=s.length)return s.join("");if(e.length&&e.length<15&&(s[14]="4"),e.length&&e.length<20&&(s[19]=t?"b":"8"),t)for(let t=e.length;t<s.length;t+=1)"0"===s[t]&&(s[t]="f");return s.join("")}function a(e){if(!e)return[e,void 0];let t=e.charCodeAt(e.length-1);if(122===t)return[e,e+"~"];if(t>=126)return[e,e+" "];let s=e.substring(0,e.length-1)+String.fromCharCode(t+1);return[e,s]}s.d(t,{T:()=>a,h:()=>r})},31626:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},42366:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eK});var r=s(80263),a=s(32144),n=s(2827),l=s(33922),i=s(68152),o=s(81672),c=s(37884),d=s(53239),u=s(24560),m=s(73969),h=s(22891),x=s(91958),p=s(44168),y=s(88301),f=s(23729),g=s(81969),v=s(91205),j=s(31907),w=s(52520),_=s(70452),b=s(67848),S=s(36261),N=s(2657),k=s(28202),A=s(84512),C=s(9620),U=s(6436),M=s(23850),D=s(99779),T=s(66329),I=s(80100),E=s(41645),L=s(39260),F=s(68421),z=s(16488),P=s(60045),q=s(76174),R=s(93427),V=s(29842),O=s(13916),H=s(80090),B=s(21162),Z=s(32981),G=s(11743),$=s(87494),K=s(10663),J=s(80251),W=s(24523);async function X(e){let{projectRef:t,user:s}=e,{data:r,error:a}=await (0,W.bE)("/platform/auth/{ref}/users",{params:{path:{ref:t}},body:{email:s.email,password:s.password,email_confirm:s.autoConfirmUser}});return a&&(0,W.H4)(a),r}let Y=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.jE)();return(0,J.n)({mutationFn:e=>X(e),async onSuccess(t,s,a){let{projectRef:n}=s;await Promise.all([r.invalidateQueries({queryKey:j.Z.usersInfinite(n)})]),await (null==e?void 0:e(t,s,a))},async onError(e,s,r){void 0===t?m.oR.error("Failed to create user: ".concat(e.message)):t(e,s,r)},...s})};var Q=s(95137),ee=s(65887),et=s(27371),es=s(48156);let er=K.Ik({email:K.Yj().min(1,"Email is required").email("Must be a valid email address"),password:K.Yj().min(1,"Password is required"),autoConfirmUser:K.zM()}),ea=e=>{let{visible:t,setVisible:s}=e,{ref:a}=(0,h.g)(),{can:n}=(0,H.Qp)(P.aG.AUTH_EXECUTE,"create_user"),{mutate:l,isLoading:i}=Y({onSuccess(e){m.oR.success("Successfully created user: ".concat(e.email)),c.reset({email:"",password:"",autoConfirmUser:!0}),s(!1)}}),o=async e=>{if(!a)return console.error("Project ref is required");l({projectRef:a,user:e})},c=(0,$.mN)({resolver:(0,Z.u)(er),defaultValues:{email:"",password:"",autoConfirmUser:!0}});return(0,r.jsx)(Q.lG,{open:t,onOpenChange:s,"data-sentry-element":"Dialog","data-sentry-component":"CreateUserModal","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsxs)(Q.Cf,{size:"small","data-sentry-element":"DialogContent","data-sentry-source-file":"CreateUserModal.tsx",children:[(0,r.jsx)(Q.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsx)(Q.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreateUserModal.tsx",children:"Create a new user"})}),(0,r.jsx)(Q.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ee.lV,{...c,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsxs)("form",{id:"create-user",className:"flex flex-col gap-y-4 p-6",onSubmit:c.handleSubmit(o),children:[(0,r.jsx)(ee.zB,{name:"email",control:c.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(ee.eI,{className:"flex flex-col gap-1",children:[(0,r.jsx)(ee.lR,{children:"Email address"}),(0,r.jsx)(ee.MJ,{children:(0,r.jsxs)("div",{className:"items-center relative",children:[(0,r.jsx)(R.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,r.jsx)(et.p,{autoFocus:!0,...t,autoComplete:"off",type:"email",name:"email",placeholder:"user@example.com",disabled:i,className:"pl-8"})]})}),(0,r.jsx)(ee.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ee.zB,{name:"password",control:c.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(ee.eI,{className:"flex flex-col gap-1",children:[(0,r.jsx)(ee.lR,{children:"User Password"}),(0,r.jsx)(ee.MJ,{children:(0,r.jsxs)("div",{className:"items-center relative",children:[(0,r.jsx)(G.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,r.jsx)(et.p,{...t,autoComplete:"new-password",type:"password",name:"password",placeholder:"••••••••",disabled:i,className:"pl-8"})]})}),(0,r.jsx)(ee.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ee.zB,{name:"autoConfirmUser",control:c.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(ee.eI,{className:"flex items-center gap-x-2",children:[(0,r.jsx)(ee.MJ,{children:(0,r.jsx)(es.S,{checked:t.value,onCheckedChange:e=>t.onChange(e)})}),(0,r.jsx)(ee.lR,{children:"Auto Confirm User?"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(ee.lR,{"data-sentry-element":"FormLabel_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsx)("p",{className:"text-sm text-foreground-lighter",children:"A confirmation email will not be sent when creating a user via this form."})}),(0,r.jsx)(D.$,{block:!0,size:"small",htmlType:"submit",loading:i,disabled:!n||i,"data-sentry-element":"Button","data-sentry-source-file":"CreateUserModal.tsx",children:"Create user"})]})})]})})};async function en(e){let{projectRef:t,email:s}=e,{data:r,error:a}=await (0,W.bE)("/platform/auth/{ref}/invite",{params:{path:{ref:t}},body:{email:s}});return a&&(0,W.H4)(a),r}let el=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.jE)();return(0,J.n)({mutationFn:e=>en(e),async onSuccess(t,s,a){let{projectRef:n}=s;await Promise.all([r.invalidateQueries({queryKey:j.Z.usersInfinite(n)})]),await (null==e?void 0:e(t,s,a))},async onError(e,s,r){void 0===t?m.oR.error("Failed to invite user: ".concat(e.message)):t(e,s,r)},...s})};var ei=s(6217),eo=s(49151),ec=s(80421);let ed=e=>{let{visible:t,setVisible:s}=e,{ref:a}=(0,h.g)(),{mutate:n,isLoading:l}=el({onSuccess:(e,t)=>{m.oR.success("Sent invite email to ".concat(t.email)),s(!1)}}),{can:i}=(0,H.Qp)(P.aG.AUTH_EXECUTE,"invite_user"),o=async e=>{if(!a)return console.error("Project ref is required");n({projectRef:a,email:e.email})};return(0,r.jsx)(ei.A,{hideFooter:!0,size:"small",visible:t,header:"Invite a new user",onCancel:()=>s(!t),"data-sentry-element":"Modal","data-sentry-component":"InviteUserModal","data-sentry-source-file":"InviteUserModal.tsx",children:(0,r.jsx)(eo.A,{validateOnBlur:!1,initialValues:{email:""},validate:e=>{let t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:o,"data-sentry-element":"Form","data-sentry-source-file":"InviteUserModal.tsx",children:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ei.A.Content,{children:(0,r.jsx)(ec.A,{id:"email",className:"w-full",label:"User email",icon:(0,r.jsx)(R.A,{}),type:"email",name:"email",placeholder:"User email"})}),(0,r.jsx)(ei.A.Content,{children:(0,r.jsx)(D.$,{block:!0,size:"small",htmlType:"submit",loading:l,disabled:!i||l,children:"Invite user"})})]})})},"invite-user-modal")},eu=()=>{let e=(0,N.x)("authentication:show_send_invitation"),{can:t}=(0,H.Qp)(P.aG.AUTH_EXECUTE,"invite_user"),{can:s}=(0,H.Qp)(P.aG.AUTH_EXECUTE,"create_user"),[a,n]=(0,d.useState)(!1),[l,i]=(0,d.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(B.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(B.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,r.jsx)(D.$,{type:"primary",iconRight:(0,r.jsx)(q.A,{size:14,strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"AddUserDropdown.tsx",children:"Add user"})}),(0,r.jsxs)(B.SQ,{side:"bottom",align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"AddUserDropdown.tsx",children:[e&&(0,r.jsxs)(O.x,{className:"gap-x-2",disabled:!t,onClick:()=>{t&&n(!0)},tooltip:{content:{side:"left",text:"You need additional permissions to invite users"}},children:[(0,r.jsx)(R.A,{size:14}),(0,r.jsx)("p",{children:"Send invitation"})]}),(0,r.jsxs)(O.x,{className:"space-x-2 !pointer-events-auto",disabled:!s,onClick:()=>{s&&i(!0)},tooltip:{content:{side:"left",text:"You need additional permissions to create users"}},"data-sentry-element":"DropdownMenuItemTooltip","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(V.A,{size:14,"data-sentry-element":"UserPlus","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,r.jsx)("p",{children:"Create new user"})]})]})]}),(0,r.jsx)(ed,{visible:a,setVisible:n,"data-sentry-element":"InviteUserModal","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,r.jsx)(ea,{visible:l,setVisible:i,"data-sentry-element":"CreateUserModal","data-sentry-source-file":"AddUserDropdown.tsx"})]})};var em=s(27983),eh=s(96040),ex=s(5448);let ep=e=>{let{specificFilterColumn:t,sortColumn:s,sortOrder:a,sortByValue:n,showSortByEmail:l,showSortByPhone:i,setSortByValue:o}=e;return"freeform"!==t?(0,r.jsx)(f.G,{disabled:!0,type:"default",icon:(0,r.jsx)(eh.A,{}),tooltip:{content:{side:"bottom",className:"w-80 text-center",text:(0,r.jsxs)(r.Fragment,{children:["Sorting cannot be changed when searching on a specific column. If you'd like to sort on other columns, change the search to"," ",(0,r.jsx)("span",{className:"text-warning",children:"unified search"})," from the search dropdown."]})}},children:"Sorted by user ID"}):(0,r.jsxs)(B.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"SortDropdown","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsx)(B.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"SortDropdown.tsx",children:(0,r.jsxs)(D.$,{icon:"desc"===a?(0,r.jsx)(ex.A,{}):(0,r.jsx)(eh.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"SortDropdown.tsx",children:["Sorted by ","id"===s?"user ID":s.replaceAll("_"," ")]})}),(0,r.jsx)(B.SQ,{className:"w-44",align:"start","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"SortDropdown.tsx",children:(0,r.jsxs)(B.Hr,{value:n,onValueChange:o,"data-sentry-element":"DropdownMenuRadioGroup","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsxs)(B.lv,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsx)(B.nV,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"SortDropdown.tsx",children:"Sort by user ID"}),(0,r.jsxs)(B.M5,{"data-sentry-element":"DropdownMenuSubContent","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsx)(B.Ht,{value:"id:asc","data-sentry-element":"DropdownMenuRadioItem","data-sentry-source-file":"SortDropdown.tsx",children:"Ascending"}),(0,r.jsx)(B.Ht,{value:"id:desc","data-sentry-element":"DropdownMenuRadioItem","data-sentry-source-file":"SortDropdown.tsx",children:"Descending"})]})]}),(0,r.jsxs)(B.lv,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsx)(B.nV,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"SortDropdown.tsx",children:"Sort by created at"}),(0,r.jsxs)(B.M5,{"data-sentry-element":"DropdownMenuSubContent","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsx)(B.Ht,{value:"created_at:asc","data-sentry-element":"DropdownMenuRadioItem","data-sentry-source-file":"SortDropdown.tsx",children:"Ascending"}),(0,r.jsx)(B.Ht,{value:"created_at:desc","data-sentry-element":"DropdownMenuRadioItem","data-sentry-source-file":"SortDropdown.tsx",children:"Descending"})]})]}),(0,r.jsxs)(B.lv,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsx)(B.nV,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"SortDropdown.tsx",children:"Sort by last sign in at"}),(0,r.jsxs)(B.M5,{"data-sentry-element":"DropdownMenuSubContent","data-sentry-source-file":"SortDropdown.tsx",children:[(0,r.jsx)(B.Ht,{value:"last_sign_in_at:asc","data-sentry-element":"DropdownMenuRadioItem","data-sentry-source-file":"SortDropdown.tsx",children:"Ascending"}),(0,r.jsx)(B.Ht,{value:"last_sign_in_at:desc","data-sentry-element":"DropdownMenuRadioItem","data-sentry-source-file":"SortDropdown.tsx",children:"Descending"})]})]}),l&&(0,r.jsxs)(B.lv,{children:[(0,r.jsx)(B.nV,{children:"Sort by email"}),(0,r.jsxs)(B.M5,{children:[(0,r.jsx)(B.Ht,{value:"email:asc",children:"Ascending"}),(0,r.jsx)(B.Ht,{value:"email:desc",children:"Descending"})]})]}),i&&(0,r.jsxs)(B.lv,{children:[(0,r.jsx)(B.nV,{children:"Sort by phone"}),(0,r.jsxs)(B.M5,{children:[(0,r.jsx)(B.Ht,{value:"phone:asc",children:"Ascending"}),(0,r.jsx)(B.Ht,{value:"phone:desc",children:"Descending"})]})]})]})})]})};var ey=s(11101),ef=s(53626),eg=s(86510),ev=s(52555),ej=s.n(ev),ew=s(77727),e_=s(53931),eb=s(26686),eS=s(88419),eN=s(75878),ek=s(60793),eA=s(44725),eC=s(88044),eU=s(51638),eM=s(7652);let eD=e=>{let{user:t}=e,{ref:s}=(0,h.g)(),{filters:a,setFilters:n}=(0,eS.B)(),[l,i]=(0,M.ZA)("f"),{logData:c,isSuccess:u,isLoading:m,refresh:x}=(0,eb.A)({projectRef:s,table:ew.eV.auth,filterOverride:{search_query:t.id},limit:5});return(0,d.useEffect)(()=>(t.id&&n({...a,search_query:t.id}),()=>{i(null)}),[t.id]),(0,r.jsxs)("div",{"data-sentry-component":"UserLogs","data-sentry-source-file":"UserLogs.tsx",children:[(0,r.jsx)(eU.x,{user:t,"data-sentry-element":"UserHeader","data-sentry-source-file":"UserLogs.tsx"}),(0,r.jsx)(eN.w,{"data-sentry-element":"Separator","data-sentry-source-file":"UserLogs.tsx"}),(0,r.jsxs)("div",{className:(0,I.cn)("flex flex-col gap-y-3",eM.jU),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Authentication logs"}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Latest logs from authentication for this user in the past hour"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(D.$,{type:"status_code"in a?"default":"secondary",className:"rounded-r-none border-r-0",disabled:m,onClick:()=>n({search_query:t.id}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Show all"}),(0,r.jsx)("div",{className:"border-button border border-l-0 py-3"}),(0,r.jsx)(D.$,{type:"status_code"in a?"secondary":"default",className:"rounded-l-none border-l-0",disabled:m,onClick:()=>n({search_query:t.id,status_code:{client_error:!0,server_error:!0}}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Error only"})]}),(0,r.jsx)(D.$,{type:"default",loading:m,disabled:m,icon:(0,r.jsx)(o.A,{}),onClick:()=>x(),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Refresh"})]}),m&&!u?(0,r.jsx)(e_.yV,{}):0===c.length?(0,r.jsx)(eA.Z,{type:"note",title:"No authentication logs available for this user",description:"Auth events such as logging in will be shown here"}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"border border-b-0 rounded-t-md divide-y overflow-hidden",children:c.map(e=>{var t;let a=(null!=(t=e.status)?t:"-").toString(),n=a.startsWith("4"),l=a.startsWith("5");return(0,r.jsxs)("div",{className:"flex items-center transition font-mono px-2 py-1.5 bg-surface-100 divide-x",children:[(0,r.jsx)("p",{className:"text-xs text-foreground-light min-w-[125px] w-[125px] px-1",children:(0,r.jsx)(eC.T,{utcTimestamp:e.timestamp/1e3})}),(0,r.jsx)("div",{className:"flex items-center text-xs text-foreground-light h-[22px] min-w-[70px] w-[70px] px-2",children:(0,r.jsxs)("div",{className:(0,I.cn)("flex items-center justify-center gap-x-1",!!e.status&&"border px-1 py-0.5 rounded",n?"text-warning border-warning bg-warning-300":l?"text-destructive border-destructive bg-destructive-300":""),children:[(n||l)&&(0,r.jsx)(ek.HV,{hideBackground:!0,className:(0,I.cn)(n&&"text-warning")}),a]})}),(0,r.jsxs)("p",{className:"group relative flex items-center py-1.5 text-xs text-foreground-light px-2 truncate w-full",children:["".concat(e.path," | ").concat(e.msg),(0,r.jsx)(f.G,{type:"outline",asChild:!0,tooltip:{content:{text:"Open in logs"}},className:"px-1.5 absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition bg-background focus-visible:opacity-100",children:(0,r.jsx)(ej(),{href:"/project/".concat(s,"/logs/auth-logs?log=").concat(e.id),children:(0,r.jsx)(eg.A,{size:"12",className:"text-foreground-light"})})})]})]},e.id)})}),(0,r.jsx)(D.$,{block:!0,asChild:!0,type:"outline",className:"transition rounded-t-none text-foreground-light hover:text-foreground",children:(0,r.jsx)(ej(),{href:"/project/".concat(s,"/logs/auth-logs?s=").concat(t.id),children:"See more logs"})})]})]})]})};var eT=s(28370);let eI=e=>{let{selectedUser:t,onClose:s}=e,[a,n]=(0,d.useState)("overview"),[l,o]=(0,d.useState)(""),c=t?Object.entries(t).filter(e=>{let[t,s]=e;return t.toLowerCase().includes(l.toLowerCase())||"string"==typeof s&&s.toLowerCase().includes(l.toLowerCase())}).reduce((e,t)=>{let[s,r]=t;return void 0!==r&&(e[s]=r),e},{}):{};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.WM,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsxs)(L.wV,{defaultSize:30,maxSize:45,minSize:30,className:"bg-studio border-t","data-sentry-element":"ResizablePanel","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsx)(D.$,{type:"text",className:"absolute top-3 right-3 px-1",icon:(0,r.jsx)(i.A,{}),onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsxs)(ey.tU,{value:a,className:"flex flex-col h-full",onValueChange:e=>n(e),"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsxs)(ey.j7,{className:"px-5 flex gap-x-4 min-h-[46px]","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsx)(ey.Xi,{value:"overview",className:"px-0 pb-0 h-full text-xs  data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Overview"}),(0,r.jsx)(ey.Xi,{value:"logs",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Logs"}),(0,r.jsx)(ey.Xi,{value:"raw",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Raw JSON"})]}),(0,r.jsx)(ey.av,{value:"overview",className:(0,I.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,r.jsx)(eT.nz,{user:t,onDeleteSuccess:s})}),(0,r.jsx)(ey.av,{value:"logs",className:(0,I.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,r.jsx)(eD,{user:t})}),(0,r.jsxs)(ey.av,{value:"raw",className:(0,I.cn)("mt-0 flex-grow min-h-0 overflow-y-auto",eM.jU),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(et.p,{autoFocus:!0,type:"text",placeholder:"Filter...",value:l,onChange:e=>o(e.target.value),className:"mr-2","data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsx)(D.$,{type:"text",disabled:!l,onClick:()=>o(""),className:"text-xs","data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx",children:"Clear"})]}),(0,r.jsx)(ef.X,{className:"javascript",parentClassName:"[&>*>span]:text-xs","data-sentry-element":"SimpleCodeBlock","data-sentry-source-file":"UserPanel.tsx",children:JSON.stringify(c,null,2)})]})]})]})]})};var eE=s(38531),eL=s(57672),eF=s(73886),ez=s(62284),eP=s(87432),eq=s(30404);let eR=e=>{var t;let{filter:s,filterKeywords:a,selectedProviders:n,specificFilterColumn:l}=e,{ref:i}=(0,h.g)(),{data:o}=(0,C.YA)(),[c,u]=(0,d.useState)(!1),[m,x]=(0,d.useState)(!1),{data:p,isLoading:y,isFetching:f,isSuccess:g}=(0,_.l)({projectRef:i,connectionString:null==o?void 0:o.connectionString,keywords:a,filter:"all"===s?void 0:s,providers:n,forceExactCount:c,..."freeform"!==l?{column:l}:{column:void 0}},{keepPreviousData:!0}),v=null!=(t=null==p?void 0:p.count)?t:0;return(0,d.useEffect)(()=>{g&&"freeform"===l&&u(p.is_estimate&&p.count<=eL.k)},[g,l]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-between min-h-9 h-9 overflow-hidden items-center px-6 w-full border-t text-xs text-foreground-light",children:(0,r.jsx)("div",{className:"flex items-center gap-x-2",children:y||f||void 0===p?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(eF.A,{size:14,className:"animate-spin"})," Loading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:["Total:"," ",(null==p?void 0:p.is_estimate)?(0,eP.j)(v):v.toLocaleString()," ","user",1!==v?"s":"",(null==p?void 0:p.is_estimate)&&" (estimated)"]}),(null==p?void 0:p.is_estimate)&&(0,r.jsxs)(eq.m_,{children:[(0,r.jsx)(eq.k$,{asChild:!0,children:(0,r.jsx)(D.$,{size:"tiny",type:"text",className:"px-1.5",icon:(0,r.jsx)(ez.A,{}),onClick:()=>{"freeform"===l&&x(!0)}})}),(0,r.jsx)(eq.ZI,{side:"top",className:"w-80",children:"freeform"===l?(0,r.jsxs)(r.Fragment,{children:["This is an estimated value as your project has more than"," ",eL.k.toLocaleString()," users.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-brand",children:"Click to retrieve the exact count."})," "]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"mb-1",children:"This is an estimated value which may not be accurate."}),(0,r.jsxs)("p",{children:["If you'd like to retrieve the exact count, change the search to"," ",(0,r.jsx)("span",{className:"text-warning",children:"all columns"})," from the header."]})," "]})})]})]})})}),(0,r.jsx)(F.A,{variant:"warning",visible:m,title:"Fetch exact user count",confirmLabel:"Fetch exact count",onCancel:()=>x(!1),onConfirm:()=>{u(!0),x(!1)},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UsersFooter.tsx",children:(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:["Your project has more than ",eL.k.toLocaleString()," users, and fetching the exact count may cause performance issues on your database."]})})]})};var eV=s(31092),eO=s(64758);let eH=e=>{let{search:t,searchInvalid:s,specificFilterColumn:a,setSearch:n,setFilterKeywords:l,setSpecificFilterColumn:o}=e;return(0,r.jsxs)("div",{className:"flex items-center","data-sentry-component":"UsersSearch","data-sentry-source-file":"UsersSearch.tsx",children:[(0,r.jsx)("div",{className:"text-xs h-[26px] flex items-center px-1.5 border border-strong rounded-l-md bg-surface-300",children:(0,r.jsx)(eV.A,{size:14,"data-sentry-element":"Search","data-sentry-source-file":"UsersSearch.tsx"})}),(0,r.jsxs)(T.l6,{value:a,onValueChange:e=>o(e),"data-sentry-element":"Select_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:[(0,r.jsx)(T.bq,{size:"tiny",className:(0,I.cn)("w-[130px] !bg-transparent rounded-none -ml-[1px]","freeform"===a&&"text-warning"),"data-sentry-element":"SelectTrigger_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:(0,r.jsx)(T.yv,{"data-sentry-element":"SelectValue_Shadcn_","data-sentry-source-file":"UsersSearch.tsx"})}),(0,r.jsx)(T.gC,{"data-sentry-element":"SelectContent_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:(0,r.jsxs)(T.s3,{"data-sentry-element":"SelectGroup_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:[(0,r.jsx)(T.eb,{value:"id",className:"text-xs","data-sentry-element":"SelectItem_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:"User ID"}),(0,r.jsx)(T.eb,{value:"email",className:"text-xs","data-sentry-element":"SelectItem_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:"Email address"}),(0,r.jsx)(T.eb,{value:"phone",className:"text-xs","data-sentry-element":"SelectItem_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:"Phone number"}),(0,r.jsx)(T.mi,{"data-sentry-element":"SelectSeparator_Shadcn_","data-sentry-source-file":"UsersSearch.tsx"}),(0,r.jsxs)(eq.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"UsersSearch.tsx",children:[(0,r.jsx)(eq.k$,{"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"UsersSearch.tsx",children:(0,r.jsx)(T.eb,{value:"freeform",className:"text-xs","data-sentry-element":"SelectItem_Shadcn_","data-sentry-source-file":"UsersSearch.tsx",children:"Unified search"})}),(0,r.jsx)(eq.ZI,{side:"right",className:"w-64 text-center","data-sentry-element":"TooltipContent","data-sentry-source-file":"UsersSearch.tsx",children:"Search by all columns at once, including mid-string search. May impact database performance if you have many users."})]})]})})]}),(0,r.jsx)(eO.p,{size:"tiny",className:(0,I.cn)("w-[245px] bg-transparent rounded-l-none -ml-[1px]",s?"text-red-900 dark:border-red-900":"",t.length>1&&"pr-6"),placeholder:"freeform"===a?"Search by user ID, email, phone or name":"Search by ".concat("id"===a?"User ID":"email"===a?"Email":"Phone"),value:t,onChange:e=>{n(e.target.value.replace(/\s+/g,"").toLowerCase())},onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&(n(e=>e&&"phone"===a&&!e.startsWith("+")?"+".concat(e):e),s||l(t.trim().toLocaleLowerCase()))},actions:t?(0,r.jsx)(D.$,{size:"tiny",type:"text",className:"p-0 h-5 w-5",icon:(0,r.jsx)(i.A,{className:(0,I.cn)(s?"text-red-900":"")}),onClick:()=>{n(""),l("")}}):null,"data-sentry-element":"Input","data-sentry-source-file":"UsersSearch.tsx"})]})},eB=()=>{var e,t,s,P;let q=(0,a.jE)(),{ref:R}=(0,h.g)(),{data:V}=(0,C.YA)(),{data:O}=(0,A.s)(),H=(0,d.useRef)(null),B=(0,d.useRef)(0),Z=(0,x.hx)(),{mutate:G}=(0,S.h)(),{authenticationShowProviderFilter:$,authenticationShowSortByEmail:K,authenticationShowSortByPhone:J,authenticationShowUserTypeFilter:W,authenticationShowEmailPhoneColumns:X}=(0,N.x)(["authentication:show_provider_filter","authentication:show_sort_by_email","authentication:show_sort_by_phone","authentication:show_user_type_filter","authentication:show_email_phone_columns"]),Y=(0,d.useMemo)(()=>X?eM.AF:eM.AF.filter(e=>"email"!==e.id&&"phone"!==e.id),[X]),[Q,ee]=(0,M.ZA)("filter",(0,M.Oq)(["id","email","phone","freeform"]).withDefault("id")),[et,es]=(0,M.ZA)("userType",(0,M.Oq)(["all","verified","unverified","anonymous"]).withDefault("all")),[er,ea]=(0,M.ZA)("keywords",{defaultValue:""}),[en,el]=(0,M.ZA)("sortBy",{defaultValue:"id:asc"}),[ei,eo]=en.split(":"),[ec,ed]=(0,M.ZA)("columns",(0,M.IN)(M.tU,",").withDefault([])),[eh,ex]=(0,M.ZA)("providers",(0,M.IN)(M.tU,",").withDefault([])),[ey,ef,{isSuccess:eg}]=(0,k.U)(h.rS.AUTH_USERS_FILTER(null!=R?R:""),"id"),[ev,ej,{isSuccess:ew}]=(0,k.U)(h.rS.AUTH_USERS_SORT_BY_VALUE(null!=R?R:""),"id"),[e_,eb,{isSuccess:eS,isError:eN,error:ek}]=(0,k.U)(h.rS.AUTH_USERS_COLUMNS_CONFIGURATION(null!=R?R:""),null),[eA,eC]=(0,d.useState)([]),[eU,eD]=(0,d.useState)(er),[eT,eL]=(0,d.useState)(),[eF,ez]=(0,d.useState)(new Set([])),[eP,eq]=(0,d.useState)(),[eV,eO]=(0,d.useState)(!1),[eB,eZ]=(0,d.useState)(!1),[eG,e$]=(0,d.useState)(!1),{data:eK,isSuccess:eJ}=(0,_.l)({projectRef:R,connectionString:null==V?void 0:V.connectionString,keywords:"",filter:void 0,providers:[],forceExactCount:!1},{keepPreviousData:!0}),eW=(null!=(e=null==eK?void 0:eK.count)?e:0)<=1e4,{data:eX,error:eY,isSuccess:eQ,isLoading:e0,isRefetching:e1,isError:e2,isFetchingNextPage:e4,refetch:e8,hasNextPage:e3,fetchNextPage:e5}=(0,b.a)({projectRef:R,connectionString:null==V?void 0:V.connectionString,keywords:er,filter:"freeform"!==Q||"all"===et?void 0:et,providers:eh,sort:ei,order:eo,..."freeform"!==Q?{column:Q}:{column:void 0}},{keepPreviousData:!!er,staleTime:1/0}),{mutateAsync:e6}=(0,w.X)(),e9=(0,d.useMemo)(()=>{var e;return null!=(e=null==eX?void 0:eX.pages.flatMap(e=>e.result))?e:[]},[null==eX?void 0:eX.pages]),e7=e9.find(e=>e.id===[...eF][0]),te=!!eU&&"freeform"!==Q&&"email"!==Q&&("id"===Q?!eU.match(eM.J6):!eU.match(eM.Yx)),tt={sort_column:ei,sort_order:eo,providers:eh,user_type:"all"===et?void 0:et,keywords:er,filter_column:"freeform"===Q?void 0:Q},ts={project:null!=R?R:"Unknown",organization:null!=(t=null==O?void 0:O.slug)?t:"Unknown"},tr=e=>{ef(e),ee(e),"freeform"!==e&&ta("id:asc")},ta=e=>{eW&&ej(e),el(e)},tn=(0,n.A)((e,t)=>{"toggle"===e?eb(t.columns.map(e=>({id:e.key,width:e.width}))):"resize"===e?eb(eA.map((e,s)=>({id:e.key,width:s===t.idx?t.width:e.width}))):"reorder"===e&&eb(t.columns.map(e=>({id:e.key,width:e.width})))},500),tl=async()=>{if(!R)return console.error("Project ref is required");let e=[...eF];eZ(!0);try{await Promise.all(e.map(e=>e6({projectRef:R,userId:e,skipInvalidation:!0}))),await Promise.all([q.invalidateQueries({queryKey:j.Z.usersInfinite(R)})]),m.oR.success("Successfully deleted the selected ".concat(eF.size," user").concat(eF.size>1?"s":"")),eO(!1),ez(new Set([])),e.includes(eT)&&eL(void 0)}catch(e){m.oR.error("Failed to delete selected users: ".concat(e.message))}finally{eZ(!1)}};return(0,d.useEffect)(()=>{if(!e1&&(eS||eN&&ek.message.includes("data is undefined"))){let e=(0,eE.yA)({specificFilterColumn:Q,columns:Y,config:null!=e_?e_:[],users:null!=e9?e9:[],visibleColumns:ec,setSortByValue:ta,onSelectDeleteUser:eq});eC(e),e.length<Y.length&&ed(e.filter(e=>"img"!==e.key).map(e=>e.key))}},[eQ,e1,eS,eN,ek,e9,eF,Q]),(0,d.useEffect)(()=>{eg&&ew&&eJ&&eW&&("id"===Q&&"id"!==ey&&ee(ey),"id:asc"===en&&"id:asc"!==ev&&el(ev))},[eg,ew,eJ]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)(v.M,{className:"py-4 px-6 !mb-0",title:"Users","data-sentry-element":"FormHeader","data-sentry-source-file":"UsersV2.tsx"}),(0,r.jsx)("div",{className:"bg-surface-200 py-3 px-4 md:px-6 flex flex-col lg:flex-row lg:items-start justify-between gap-2 border-t",children:eF.size>0?(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsxs)(D.$,{type:"default",icon:(0,r.jsx)(l.A,{}),onClick:()=>eO(!0),children:["Delete ",eF.size," users"]}),(0,r.jsx)(f.G,{type:"default",icon:(0,r.jsx)(i.A,{}),className:"px-1.5",onClick:()=>ez(new Set([])),tooltip:{content:{side:"bottom",text:"Cancel selection"}}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)(eH,{search:eU,searchInvalid:te,specificFilterColumn:Q,setSearch:eD,setFilterKeywords:e=>{ea(e),eL(void 0),G({action:"auth_users_search_submitted",properties:{trigger:"search_input",...tt,keywords:e},groups:ts})},setSpecificFilterColumn:e=>{"freeform"===e?eW?tr(e):e$(!0):tr(e)}}),W&&"freeform"===Q&&(0,r.jsxs)(T.l6,{value:et,onValueChange:e=>{es(e),G({action:"auth_users_search_submitted",properties:{trigger:"user_type_filter",...tt,user_type:e},groups:ts})},children:[(0,r.jsx)(T.bq,{size:"tiny",className:(0,I.cn)("w-[140px] !bg-transparent","all"===et&&"border-dashed"),children:(0,r.jsx)(T.yv,{})}),(0,r.jsx)(T.gC,{children:(0,r.jsxs)(T.s3,{children:[(0,r.jsx)(T.eb,{value:"all",className:"text-xs",children:"All users"}),(0,r.jsx)(T.eb,{value:"verified",className:"text-xs",children:"Verified users"}),(0,r.jsx)(T.eb,{value:"unverified",className:"text-xs",children:"Unverified users"}),(0,r.jsx)(T.eb,{value:"anonymous",className:"text-xs",children:"Anonymous users"})]})})]}),$&&"freeform"===Q&&(0,r.jsx)(g.I,{name:"Provider",options:eM.UC,labelKey:"name",valueKey:"value",iconKey:"icon",activeOptions:eh,labelClass:"text-xs",maxHeightClass:"h-[190px]",className:"w-52",onSaveFilters:e=>{ex(e),G({action:"auth_users_search_submitted",properties:{trigger:"provider_filter",...tt,providers:e},groups:ts})}}),(0,r.jsx)("div",{className:"border-r border-strong h-6"}),(0,r.jsx)(g.I,{name:0===ec.length?"All columns":"Columns",title:"Select columns to show",buttonType:0===ec.length?"dashed":"default",options:Y.slice(1),labelKey:"name",valueKey:"id",labelClass:"text-xs",maxHeightClass:"h-[190px]",clearButtonText:"Reset",activeOptions:ec,onSaveFilters:e=>{let t=(null!=e_?e_:[]).slice();0===e.length?t=Y.map(e=>({id:e.id,width:e.width})):e.forEach(e=>{var s;t.find(t=>t.id===e)||t.push({id:e,width:null==(s=Y.find(t=>t.id===e))?void 0:s.width})});let s=(0,eE.yA)({specificFilterColumn:Q,columns:Y,config:t,users:null!=e9?e9:[],visibleColumns:e,setSortByValue:ta,onSelectDeleteUser:eq});ed(e),eC(s),tn("toggle",{columns:s})}}),(0,r.jsx)(ep,{specificFilterColumn:Q,sortColumn:ei,sortOrder:eo,sortByValue:en,setSortByValue:e=>{let[t,s]=e.split(":");ta(e),G({action:"auth_users_search_submitted",properties:{trigger:"sort_change",...tt,sort_column:t,sort_order:s},groups:ts})},showSortByEmail:K,showSortByPhone:J})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[Z&&(0,r.jsx)(y.m,{section:["user-management"],source:"auth-users"}),(0,r.jsx)(f.G,{size:"tiny",icon:(0,r.jsx)(o.A,{}),type:"default",className:"w-7",loading:e1&&!e4,onClick:()=>{e8(),G({action:"auth_users_search_submitted",properties:{trigger:"refresh_button",...tt},groups:ts})},tooltip:{content:{side:"bottom",text:"Refresh"}}}),(0,r.jsx)(eu,{})]})]})}),(0,r.jsx)(E.$,{loading:e0||e1||e4,"data-sentry-element":"LoadingLine","data-sentry-source-file":"UsersV2.tsx"}),(0,r.jsxs)(L.HK,{direction:"horizontal",className:"relative flex flex-grow bg-alternative min-h-0",autoSaveId:"query-performance-layout-v1","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"UsersV2.tsx",children:[(0,r.jsx)(L.wV,{defaultSize:1,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"UsersV2.tsx",children:(0,r.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,r.jsx)(u.Ay,{ref:H,className:"flex-grow border-t-0",rowHeight:44,headerRowHeight:36,columns:eA,rows:(0,eE.uJ)(null!=e9?e9:[]),rowClass:e=>{let t=e.id===eT;return["".concat(t?"bg-surface-300 dark:bg-surface-300":"bg-200"," cursor-pointer"),"[&>.rdg-cell]:border-box [&>.rdg-cell]:outline-none [&>.rdg-cell]:shadow-none [&>.rdg-cell:first-child>div]:ml-4"].join(" ")},rowKeyGetter:e=>e.id,selectedRows:eF,onScroll:e=>{let t=B.current!==e.currentTarget.scrollLeft;B.current=e.currentTarget.scrollLeft,!e0&&!e4&&!t&&(0,U.vY)(e)&&e3&&e5()},onSelectedRowsChange:e=>{e.size>eM.GS?(0,m.oR)("Only up to ".concat(eM.GS," users can be selected at a time")):ez(e)},onColumnResize:(e,t)=>tn("resize",{idx:e,width:t}),onColumnsReorder:(e,t)=>{let s=eA.findIndex(t=>t.key===e),r=eA.findIndex(e=>e.key===t),a=((e,t,s)=>{let r=e.slice(),[a]=r.splice(t,1);return r.splice(s,0,a),r})(eA,s,r);eC(a),tn("reorder",{columns:a})},renderers:{renderRow:(e,t)=>(0,r.jsx)(u.fI,{...t,onClick:()=>{let s=e9.find(t=>t.id===e);if(s){let e=e9.indexOf(s);if(t.row.id){var r;eL(t.row.id),null==(r=H.current)||r.scrollToCell({idx:0,rowIdx:e})}}}}),noRowsFallback:e0?(0,r.jsx)("div",{className:"absolute top-14 px-6 w-full",children:(0,r.jsx)(z.y,{})}):e2?(0,r.jsx)("div",{className:"absolute top-14 px-6 flex flex-col items-center justify-center w-full",children:(0,r.jsx)(p.A,{subject:"Failed to retrieve users",error:eY})}):(0,r.jsxs)("div",{className:"absolute top-20 px-6 flex flex-col items-center justify-center w-full gap-y-2",children:[(0,r.jsx)(c.A,{className:"text-foreground-lighter",strokeWidth:1}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-foreground",children:"all"!==et||er.length>0?"No users found":"No users in your project"}),(0,r.jsx)("p",{className:"text-foreground-light",children:"all"!==et||er.length>0?"There are currently no users based on the filters applied":"There are currently no users who signed up to your project"})]})]})},"data-sentry-element":"DataGrid","data-sentry-source-file":"UsersV2.tsx"})})}),void 0!==eT&&(0,r.jsx)(eI,{selectedUser:e9.find(e=>e.id===eT),onClose:()=>eL(void 0)})]}),(0,r.jsx)(eR,{filter:et,filterKeywords:er,selectedProviders:eh,specificFilterColumn:Q,"data-sentry-element":"UsersFooter","data-sentry-source-file":"UsersV2.tsx"})]}),(0,r.jsx)(F.A,{visible:eV,variant:"destructive",title:"Confirm to delete ".concat(eF.size," user").concat(eF.size>1?"s":""),loading:eB,confirmLabel:"Delete",onCancel:()=>eO(!1),onConfirm:()=>tl(),alert:{title:"Deleting ".concat(1===eF.size?"a user":"users"," is irreversible"),description:"This will remove the selected ".concat(1===eF.size?"":"".concat(eF.size," "),"user").concat(eF.size>1?"s":""," from the project and all associated data.")},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UsersV2.tsx",children:(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete the"," ",1===eF.size?"":"selected ".concat(eF.size," "),"user",eF.size>1?"s":"",1===eF.size?(0,r.jsxs)("span",{className:"text-foreground",children:[" ",null!=(P=null!=(s=null==e7?void 0:e7.email)?s:null==e7?void 0:e7.phone)?P:"this user"]}):null,"?"]})}),(0,r.jsx)(F.A,{size:"medium",variant:"warning",visible:eG,confirmLabel:"Confirm",title:"Confirm to search across all columns",onConfirm:()=>{tr("freeform"),e$(!1)},onCancel:()=>e$(!1),alert:{base:{variant:"warning"},title:"Searching across all columns is not recommended with many users",description:"This may adversely impact your database, in particular if your project has a large number of users - use with caution. Search mode will not be persisted across browser sessions as a safeguard."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UsersV2.tsx",children:(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"This will allow you to search across user ID, email, phone number, and display name through a single input field. You will also be able to filter users by provider and sort on users across different columns."})}),(0,r.jsx)(em.i,{visible:!!eP,selectedUser:eP,onClose:()=>{eq(void 0),(0,U.DH)()},onDeleteSuccess:()=>{(null==eP?void 0:eP.id)===eT&&eL(void 0),eq(void 0),(0,U.DH)(500)},"data-sentry-element":"DeleteUserModal","data-sentry-source-file":"UsersV2.tsx"})]})};var eZ=s(87442),eG=s(10508);let e$=()=>(0,r.jsx)(eB,{"data-sentry-element":"UsersV2","data-sentry-component":"UsersPage","data-sentry-source-file":"users.tsx"});e$.getLayout=e=>(0,r.jsx)(eG.A,{children:(0,r.jsx)(eZ.A,{children:e})});let eK=e$},49151:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(80263),a=s(53239),n=s(57459),l=s(7760);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,c]=(0,a.useReducer)(i,null),d=(0,n.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,r.jsx)("form",{id:s.id,name:s.name,onSubmit:d.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,r.jsx)(l.h,{values:d.values,errors:d.errors,formContextOnChange:d.handleChange,handleBlur:d.handleBlur,touched:d.touched,fieldLevelValidation:function(e,t){c({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:d.errors,touched:d.touched,isSubmitting:d.isSubmitting,isValidating:d.isValidating,submitCount:d.submitCount,initialValues:d.initialValues,values:d.values,handleReset:d.handleReset,resetForm:d.resetForm,setFieldValue:d.setFieldValue})})})}},53407:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},54831:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},57672:(e,t,s)=>{"use strict";s.d(t,{I:()=>a,k:()=>r});let r=5e4,a="\nCREATE OR REPLACE FUNCTION pg_temp.count_estimate(\n    query text\n) RETURNS integer LANGUAGE plpgsql AS $$\nDECLARE\n    plan jsonb;\nBEGIN\n    EXECUTE 'EXPLAIN (FORMAT JSON)' || query INTO plan;\n    RETURN plan->0->'Plan'->'Plan Rows';\nEND;\n$$;\n".trim()},66959:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]])},67848:(e,t,s)=>{"use strict";s.d(t,{a:()=>c});var r=s(30138),a=s(17702),n=s(59356),l=s(9620),i=s(85039),o=s(31907);let c=function(e){let{projectRef:t,connectionString:s,keywords:c,filter:d,providers:u,sort:m,order:h,column:x}=e,{enabled:p=!0,...y}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:f}=(0,l.YA)(),g=(null==f?void 0:f.status)===i.BU.ACTIVE_HEALTHY;return(0,a.q)({queryKey:o.Z.usersInfinite(t,{keywords:c,filter:d,providers:u,sort:m,order:h}),queryFn:e=>{let{signal:a,pageParam:l}=e;return(0,n.E)({projectRef:t,connectionString:s,sql:(e=>{let{page:t=0,verified:s,keywords:a,providers:n,sort:l,order:i,limit:o=50,column:c,startAt:d}=e,u=t*o,m=[];if(a&&""!==a){let e=a.replaceAll("'","''");m.push("id::text like '%".concat(e,"%' or email like '%").concat(e,"%' or phone like '%").concat(e,"%' or raw_user_meta_data->>'full_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'first_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'last_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'display_name' ilike '%").concat(e,"%'"))}"verified"===s?m.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===s?m.push("is_anonymous is true"):"unverified"===s&&m.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),n&&n.length>0&&(n.includes("saml 2.0")?m.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(n.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):m.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(n.map(e=>"'".concat(e,"'")).join(", "),"]")));let h=m.map(e=>"(".concat(e,")")).join(" and "),x="".concat(m.length>0?" where ".concat(h):"",'\n    order by\n      "').concat(null!=l?l:"created_at",'" ').concat(null!=i?i:"desc"," nulls last\n    limit\n      ").concat(o,"\n    offset\n      ").concat(u,"\n  "),p=d?">":">=";if("email"===c){let e=(0,r.T)(null!=a?a:"");x="where lower(email) ".concat(p," '").concat(d||e[0],"' ").concat(e[1]?"and lower(email) < '".concat(e[1],"'"):""," and instance_id = '00000000-0000-0000-0000-000000000000'::uuid order by instance_id, lower(email) asc limit ").concat(o)}else if("phone"===c){let e=(0,r.T)(null!=a?a:"");x="where phone ".concat(p," '").concat(d||e[0],"' ").concat(e[1]?"and phone < '".concat(e[1],"'"):""," order by phone asc limit ").concat(o)}else"id"===c&&(x=(0,r.h)(null!=a?a:"",!1)===a?"where id = '".concat(a,"' order by id asc limit ").concat(o):"where id ".concat(p," '").concat(d||(0,r.h)(null!=a?a:"",!1),"' and id < '").concat((0,r.h)(null!=a?a:"",!0),"' order by id asc limit ").concat(o));let y="\n    select\n      auth.users.id,\n      auth.users.email,\n      auth.users.banned_until,\n      auth.users.created_at,\n      auth.users.confirmed_at,\n      auth.users.confirmation_sent_at,\n      auth.users.is_anonymous,\n      auth.users.is_sso_user,\n      auth.users.invited_at,\n      auth.users.last_sign_in_at,\n      auth.users.phone,\n      auth.users.raw_app_meta_data,\n      auth.users.raw_user_meta_data,\n      auth.users.updated_at\n    from\n      auth.users\n    ".concat(x);return"\nwith\n  users_data as (".concat(y,")\nselect\n  *,\n  coalesce(\n    (\n      select\n        array_agg(distinct i.provider)\n      from\n        auth.identities i\n      where\n        i.user_id = users_data.id\n    ),\n    '{}'::text[]\n  ) as providers\nfrom\n  users_data;\n  ").trim()})({page:x?void 0:l,verified:d,keywords:c,providers:u,sort:null!=m?m:"id",order:null!=h?h:"asc",limit:50,column:x,startAt:x?l:void 0}),queryKey:o.Z.usersInfinite(t)},a)},enabled:p&&void 0!==t&&g,getNextPageParam(e,t){let s=e.result.length>=50;if(x){let t=e.result[e.result.length-1];return s&&t?t[x]:void 0}{let e=t.length;if(!s)return;return e}},...y})}},69372:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]])},69988:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},70452:(e,t,s)=>{"use strict";s.d(t,{l:()=>d});var r=s(57672),a=s(30138),n=s(29395),l=s(56947),i=s(59356),o=s(31907);async function c(e,t){var s,l;let{projectRef:o,connectionString:c,keywords:d,filter:u,providers:m,forceExactCount:h,column:x}=e,p=(e=>{let{filter:t,keywords:s,providers:l,forceExactCount:i=!1,column:o}=e,c=s&&""!==s,d=[],u="select count(*) from auth.users";if(o&&c){if("email"===o){let e=(0,a.T)(s),t=(0,n.eu)(e[0]),r=e[1]?(0,n.eu)(e[1]):null;d.push("lower(email) >= ".concat(t).concat(r?" and lower(email) < ".concat(r):""," and instance_id = '00000000-0000-0000-0000-000000000000'::uuid"))}else if("phone"===o){let e=(0,a.T)(s),t=(0,n.eu)(e[0]),r=e[1]?(0,n.eu)(e[1]):null;d.push("phone >= ".concat(t).concat(r?" and phone < ".concat(r):""))}else if("id"===o){let e=(0,a.h)(s,!1);if(e===s)d.push("id = ".concat((0,n.eu)(s)));else{let t=(0,a.h)(s,!0);d.push("id >= ".concat((0,n.eu)(e)," and id < ").concat((0,n.eu)(t)))}}}else{if(c){let e=(0,n.eu)("%".concat(s,"%"));d.push("id::text ilike ".concat(e," or email ilike ").concat(e," or phone ilike ").concat(e))}if("verified"===t?d.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===t?d.push("is_anonymous is true"):"unverified"===t&&d.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),l&&l.length>0)if(l.includes("saml 2.0")){let e=l.map(e=>"saml 2.0"===e?"sso":e);d.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat((0,n.eu)(e),"]").trim())}else d.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat((0,n.eu)(l),"]"))}let m=d.map(e=>"(".concat(e,")")).join(" and "),h=d.length>0?" where ".concat(m):"";if(i)return"select (".concat(u).concat(h,"), false as is_estimate;");{let e="".concat("select * from auth.users").concat(h),t="".concat(u).concat(h),s=(0,n.eu)(e);return"\n".concat(r.I,"\n\nwith approximation as (").concat("select reltuples as estimate from pg_class where oid = 'auth.users'::regclass",")\nselect \n  case \n    when estimate = -1 then (select pg_temp.count_estimate(").concat(s,"))::int\n    when estimate > ").concat(r.k," then ").concat(d.length>0?"(select pg_temp.count_estimate(".concat(s,"))::int"):"estimate::int","\n    else (").concat(t,")\n  end as count,\n  estimate = -1 or estimate > ").concat(r.k," as is_estimate\nfrom approximation;\n").trim()}})({filter:u,keywords:d,providers:m,forceExactCount:h,column:x}),{result:y}=await (0,i.E)({projectRef:o,connectionString:c,sql:p,queryKey:["users-count"]},t),f=null==y||null==(s=y[0])?void 0:s.count,g=null==y||null==(l=y[0])?void 0:l.is_estimate;if("number"!=typeof f)throw Error("Error fetching users count");return{count:f,is_estimate:null==g||g}}let d=function(e){let{projectRef:t,connectionString:s,keywords:r,filter:a,providers:n,forceExactCount:i,column:d}=e,{enabled:u=!0,...m}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.I)({queryKey:o.Z.usersCount(t,{keywords:r,filter:a,providers:n,forceExactCount:i,column:d}),queryFn:e=>{let{signal:l}=e;return c({projectRef:t,connectionString:s,keywords:r,filter:a,providers:n,forceExactCount:i,column:d},l)},enabled:u&&void 0!==t,...m})}},74195:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]])},74310:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},77444:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},80038:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var r=s(75187),a=s(53239);let n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.useMemo)(()=>{var e;let[s,a]=t;if(!(null==(e=s[0])?void 0:e[a]))return{data:s,error:void 0,isError:!1};try{return{data:(0,r.mu)(...t).sort((e,s)=>new Date(e[t[1]])-new Date(s[t[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(t[0]),...t])}},81672:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},87432:(e,t,s)=>{"use strict";s.d(t,{j:()=>r});let r=e=>{if(0===e)return"0";let t=Math.floor(Math.log(e)/Math.log(1e3)),s=t>4?"T":["","K","M","B","T"][t],r=e/Math.pow(1e3,t>4?4:t);return""===s?"".concat(r):"".concat(r.toFixed(1)).concat(s)}},87442:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(80263),a=s(80814),n=s(22891),l=s(91958),i=s(93873),o=s(37631),c=s(2657),d=s(9497),u=s(29471),m=s(1458);let h=()=>{let e=(0,a.useRouter)(),{ref:t="default"}=(0,n.g)(),s=(0,n._P)("authOverviewPage"),d=(0,n._P)("EnableOAuth21"),u=(0,l.hN)(),{authenticationSignInProviders:h,authenticationRateLimits:x,authenticationEmails:p,authenticationMultiFactor:y,authenticationAttackProtection:f,authenticationAdvanced:g}=(0,c.x)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:advanced"]);(0,o.$E)({projectRef:t});let v=e.pathname.split("/")[4];return(0,r.jsx)(i.l,{page:v,menu:(0,m.B)(t,{authenticationSignInProviders:h,authenticationRateLimits:x,authenticationEmails:p,authenticationMultiFactor:y,authenticationAttackProtection:f,authenticationAdvanced:g,authenticationShowOverview:s,authenticationShowSecurityNotifications:u,authenticationOauth21:d}),"data-sentry-element":"ProductMenu","data-sentry-component":"AuthProductMenu","data-sentry-source-file":"AuthLayout.tsx"})},x=(0,d.r)(e=>{let{children:t}=e;return(0,r.jsx)(u.k,{title:"Authentication",product:"Authentication",productMenu:(0,r.jsx)(h,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:t})})},88301:(e,t,s)=>{"use strict";s.d(t,{m:()=>d});var r=s(80263),a=s(69372),n=s(22891),l=s(36261),i=s(84512),o=s(39148),c=s(23729);let d=e=>{let{section:t,source:s}=e,d=(0,o.qM)(),{ref:u}=(0,n.g)(),{data:m}=(0,i.s)(),{mutate:h}=(0,l.h)();return(0,r.jsx)(c.G,{size:"tiny",type:"default",onClick:()=>{var e;t&&d.setActiveDocsSection(t),d.setShowProjectApiDocs(!0),h({action:"api_docs_opened",properties:{source:s},groups:{project:null!=u?u:"Unknown",organization:null!=(e=null==m?void 0:m.slug)?e:"Unknown"}})},icon:(0,r.jsx)(a.A,{}),className:"h-7 w-7",tooltip:{content:{side:"bottom",text:"API Docs"}},"data-sentry-element":"ButtonTooltip","data-sentry-component":"APIDocsButton","data-sentry-source-file":"APIDocsButton.tsx"})}},88419:(e,t,s)=>{"use strict";s.d(t,{B:()=>l});var r=s(23850);let a={search:"",timestampStart:"",timestampEnd:"",filters:{}},n=e=>(0,r.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""});function l(){let e,[t,s]=(0,r.ZA)("s",n(a.search)),[l,i]=(0,r.ZA)("its",n(a.timestampStart)),[o,c]=(0,r.ZA)("ite",n(a.timestampEnd)),[d,u]=(0,r.ZA)("log",n("")),[m,h]=(0,r.ZA)("f",(e=a.filters,(0,r.Cp)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}}))),x=t||a.search,p=l||a.timestampStart,y=o||a.timestampEnd,f=m||a.filters,g=e=>{s(e||a.search)},v=e=>{h(e||a.filters)};return{search:x,timestampStart:p,timestampEnd:y,selectedLogId:d||null,filters:f,setSearch:g,setTimeRange:(e,t)=>{i(e||a.timestampStart),c(t||a.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:v,updateFilter:(e,t)=>{v({...f,[e]:t})},reset:()=>{g(a.search),i(a.timestampStart),c(a.timestampEnd),u(""),h(a.filters)}}}},91205:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var r=s(80263),a=s(80100),n=s(41273);let l=e=>{let{title:t,description:s,docsUrl:l,actions:i,className:o}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),s&&(0,r.jsx)("p",{className:"prose text-sm max-w-2xl",children:s})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,r.jsx)(n.A,{href:l}),i]})]})}},93873:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var r=s(80263),a=s(24487),n=s(21650),l=s(21416);let i=e=>{let{page:t,menu:s}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"index.tsx",children:(0,r.jsx)(a.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"index.tsx",children:s.map((e,i)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(a.Ay.Group,{title:e.title?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,r.jsx)("span",{children:e.title}),e.isPreview&&(0,r.jsx)(n.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,r.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,r.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==s.length-1&&(0,r.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},96040:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("ArrowDownNarrowWide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]])},98103:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},99940:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(86848).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[60858,15599,16110,44952,36538,43833,2838,21436,57459,86692,76984,72391,74004,40545,596,10508,48340,75187,29471,92544,58640,90636,46593,38792],()=>e(e.s=22731)),_N_E=e.O()}]);