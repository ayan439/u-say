try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6552eeaa-f569-4c03-b452-982488d17b3a",e._sentryDebugIdIdentifier="sentry-dbid-6552eeaa-f569-4c03-b452-982488d17b3a")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93653],{5098:(e,t,a)=>{"use strict";a.d(t,{K:()=>i,Q:()=>l});var s=a(56947),r=a(24523),n=a(1206);async function l(e,t){let{projectRef:a,id:s}=e;if(void 0===a)throw Error("projectRef is required");if(void 0===s)throw Error("Content ID is required");let{data:n,error:l}=await (0,r.Jt)("/platform/projects/{ref}/content/item/{id}",{params:{path:{ref:a,id:s}},signal:t});if(l)throw(0,r.H4)(l);return n}let i=function(e){let{projectRef:t,id:a}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)({queryKey:n.M.resource(t,a),queryFn:e=>{let{signal:s}=e;return l({projectRef:t,id:a},s)},enabled:r&&void 0!==t&&void 0!==a,...i})}},6538:(e,t,a)=>{"use strict";a.d(t,{R:()=>l});var s=a(80263),r=a(21650),n=a(80100);function l(e){let{infraComputeSize:t,className:a,...l}=e,i=(null==t?void 0:t.toLocaleLowerCase())==="micro"||(null==t?void 0:t.toLocaleLowerCase())==="nano";return(0,s.jsx)(r.E,{className:(0,n.cn)("rounded-md text-center flex justify-center font-mono uppercase","group-data-[state=open]:bg-opacity-20 group-data-[state=open]:ring-2 group-data-[state=open]:ring-opacity-20","transition-all",i?"group-data-[state=open]:ring-foreground-muted bg-opacity-50 group-data-[state=open]:bg-opacity-75":"group-data-[state=open]:ring-brand",a),variant:t?i?"default":"brand":"default",...l,"data-sentry-element":"Badge","data-sentry-component":"ComputeBadge","data-sentry-source-file":"index.tsx",children:t})}},8e3:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]])},18574:(e,t,a)=>{"use strict";a.d(t,{pj:()=>i});var s=a(56947),r=a(59356),n=a(32510);async function l(e,t){let{projectRef:a,connectionString:s}=e;try{let{result:e}=await (0,r.E)({projectRef:a,connectionString:s,sql:"\n    select\n      *\n    from supabase_migrations.schema_migrations sm\n    order by sm.version desc\n  ".trim(),queryKey:["migrations"]},t);return e}catch(e){if(e.message.includes('relation "supabase_migrations.schema_migrations" does not exist'))return[];throw e}}let i=function(e){let{projectRef:t,connectionString:a}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)({queryKey:n.c.migrations(t),queryFn:e=>{let{signal:s}=e;return l({projectRef:t,connectionString:a},s)},enabled:r&&void 0!==t,...i})}},20091:(e,t,a)=>{"use strict";a.d(t,{c3:()=>l,e9:()=>o});var s=a(17702),r=a(24523),n=a(1206);let l=100;async function i(e,t){let{projectRef:a,cursor:s,sort:n,name:i}=e;if(void 0===a)throw Error("projectRef is required");let{data:o,error:c}=await (0,r.Jt)("/platform/projects/{ref}/content/folders",{params:{path:{ref:a},query:{type:"sql",cursor:s,limit:l.toString(),sort_by:n,sort_order:"name"===n?"asc":"desc",name:i,visibility:"user"}},signal:t});return c&&(0,r.H4)(c),{...o.data,cursor:o.cursor}}let o=function(e){let{projectRef:t,name:a,sort:r}=e,{enabled:l=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.q)({queryKey:n.M.folders(t,{name:a,sort:r}),queryFn:e=>{let{signal:s,pageParam:n}=e;return i({projectRef:t,cursor:n,name:a,sort:r},s)},enabled:l&&void 0!==t,getNextPageParam:e=>e.cursor,...o})}},22559:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},27503:(e,t,a)=>{var s=a(85892),r=a(60152);e.exports=function(e,t){return e&&e.length?r(e,s(t,2)):0}},29842:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},30138:(e,t,a)=>{"use strict";function s(e,t){let a="00000000-0000-0000-0000-000000000000".split("").map((t,a)=>{var s;return"-"===t?t:null!=(s=e[a])?s:t});if(e.length>=a.length)return a.join("");if(e.length&&e.length<15&&(a[14]="4"),e.length&&e.length<20&&(a[19]=t?"b":"8"),t)for(let t=e.length;t<a.length;t+=1)"0"===a[t]&&(a[t]="f");return a.join("")}function r(e){if(!e)return[e,void 0];let t=e.charCodeAt(e.length-1);if(122===t)return[e,e+"~"];if(t>=126)return[e,e+" "];let a=e.substring(0,e.length-1)+String.fromCharCode(t+1);return[e,a]}a.d(t,{T:()=>r,h:()=>s})},31316:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]",function(){return a(74046)}])},37631:(e,t,a)=>{"use strict";a.d(t,{$E:()=>u,kV:()=>c,op:()=>d});var s=a(56947),r=a(32144),n=a(24523),l=a(85039),i=a(53239),o=a(31907);async function c(e,t){let{projectRef:a}=e;if(!a)throw Error("projectRef is required");let{data:s,error:r}=await (0,n.Jt)("/platform/auth/{ref}/config",{params:{path:{ref:a}},signal:t});return r&&(0,n.H4)(r),s}let d=function(e){let{projectRef:t}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)({queryKey:o.Z.authConfig(t),queryFn:e=>{let{signal:a}=e;return c({projectRef:t},a)},enabled:a&&l.pe&&void 0!==t,...r})},u=e=>{let{projectRef:t}=e,a=(0,r.jE)();return(0,i.useCallback)(()=>{t&&a.prefetchQuery({queryKey:o.Z.authConfig(t),queryFn:e=>{let{signal:a}=e;return c({projectRef:t},a)}})},[a,t])}},56217:(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var s=a(85039);function r(e){switch(e){case s.xq.AWS.id:return"ARM";case s.xq.FLY.id:return"x86 64-bit";default:return""}}},56509:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var s=a(56947),r=a(24523),n=a(81121);async function l(e,t){let{projectRef:a,attribute:s,startDate:n,endDate:l}=e;if(!a)throw Error("Project ref is required");if(!s)throw Error("Attribute is required");if(!n)throw Error("Start date is required");if(!l)throw Error("End date is required");let{data:i,error:o}=await (0,r.Jt)("/platform/projects/{ref}/daily-stats",{params:{path:{ref:a},query:{attribute:s,startDate:n,endDate:l}},signal:t});return o&&(0,r.H4)(o),i}let i=function(e){let{projectRef:t,attribute:a,startDate:r,endDate:i}=e,{enabled:o=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)({queryKey:n.P.infraMonitoring(t,{attribute:a,startDate:r,endDate:i}),queryFn:e=>{let{signal:s}=e;return l({projectRef:t,attribute:a,startDate:r,endDate:i},s)},enabled:o&&void 0!==t&&void 0!==a&&void 0!==r&&void 0!==i,staleTime:18e5,...c})}},57125:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var s=a(80263),r=a(98103),n=a(61113),l=a(86510),i=a(52555),o=a.n(i),c=a(53239),d=a(99779);let u=(0,c.forwardRef)((e,t)=>{let{icon:a,title:i,description:u,url:m,urlLabel:x="Read more",defaultVisibility:h=!1,hideCollapse:p=!1,button:f,className:g="",block:y=!1}=e,[j,v]=(0,c.useState)(h);return(0,s.jsx)("div",{ref:t,role:"alert",className:"".concat(y?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(g),children:(0,s.jsxs)("div",{className:"flex flex-col px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[a&&(0,s.jsx)("span",{className:"text-foreground-lighter",children:a}),(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("h5",{className:"text-foreground",children:i})})]}),u&&!p?(0,s.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>v(!j),children:j?(0,s.jsx)(r.A,{size:14,strokeWidth:1.5}):(0,s.jsx)(n.A,{size:14,strokeWidth:1.5})}):null]}),(u||m||f)&&(0,s.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(j?"mt-3":""),style:{maxHeight:500*!!j},children:[(0,s.jsx)("div",{className:"text-foreground-light text-sm",children:u}),m&&(0,s.jsx)("div",{children:(0,s.jsx)(d.$,{asChild:!0,type:"default",icon:(0,s.jsx)(l.A,{}),children:(0,s.jsx)(o(),{href:m,target:"_blank",rel:"noreferrer",children:x})})}),f&&(0,s.jsx)("div",{children:f})]})]})})});u.displayName="InformationBox";let m=u},57672:(e,t,a)=>{"use strict";a.d(t,{I:()=>r,k:()=>s});let s=5e4,r="\nCREATE OR REPLACE FUNCTION pg_temp.count_estimate(\n    query text\n) RETURNS integer LANGUAGE plpgsql AS $$\nDECLARE\n    plan jsonb;\nBEGIN\n    EXECUTE 'EXPLAIN (FORMAT JSON)' || query INTO plan;\n    RETURN plan->0->'Plan'->'Plan Rows';\nEND;\n$$;\n".trim()},58356:(e,t,a)=>{"use strict";a.d(t,{c:()=>z});var s=a(80263),r=a(68152),n=a(53239),l=a(73969),i=a(22891),o=a(23729),c=a(23402),d=a(5098),u=a(63351),m=a(85663),x=a(56678),h=a(72341),p=a(23463),f=a(53434),g=a.n(f),y=a(80814),j=a(48555),v=a(35862),b=a(25115),N=a(56509),w=a(78633),_=a(28009),k=a(93713),A=a(73886),S=a(2070),C=a(30519),I=a(64720),E=a(72195),R=a(75419),L=a(73145),P=a(81285),T=a(60793);let M={max_cpu_usage:{check:"gt",warning:75,danger:90},avg_cpu_usage:{check:"gt",warning:75,danger:90},ram_usage:{check:"gt",warning:75,danger:90},disk_io_consumption:{check:"gt",warning:75,danger:90},disk_io_budget:{check:"lt",warning:25,danger:10}};var U=a(42395);let H=e=>{var t,a,r;let{label:l,attribute:i,provider:c,startDate:d,endDate:u,interval:m="1d",defaultChartStyle:x="bar",isLoading:p=!1,actions:f,maxHeight:H,onUpdateChartConfig:D}=e,{ref:q}=(0,y.useRouter)().query,z=(0,h.RE)(),[W,F]=(0,n.useState)(x),[G,O]=(0,n.useState)(),B=z.selectedDatabaseId,{data:Y,isFetching:K,isLoading:V}=(0,N.J)({projectRef:q,attribute:i,startDate:g()(d).format("YYYY-MM-DD"),endDate:g()(u).format("YYYY-MM-DD")},{enabled:"daily-stats"===c}),{data:$,isFetching:J,isLoading:Q}=(0,b.q)({projectRef:q,attribute:i,startDate:d,endDate:u,interval:m,databaseIdentifier:B},{enabled:"infra-monitoring"===c}),X="infra-monitoring"===c?$:"daily-stats"===c?Y:void 0,Z=p||i.startsWith("new_snippet_")||("infra-monitoring"===c?Q:"daily-stats"===c?V:p),ee=w.Cb.find(e=>e.key===i),et=null!=(a=null==ee?void 0:ee.label)?a:i,ea=(null==X?void 0:X.format)==="%",es=(null!=(r=null==X?void 0:X.data)?r:[]).map(e=>{let t=e[i],a=((e,t)=>{let a=M[e];return a?"gt"===a.check?t>=a.danger?"hsl(var(--chart-destructive))":t>=a.warning?"hsl(var(--chart-warning))":"hsl(var(--chart-1))":t<=a.danger?"hsl(var(--chart-destructive))":t<=a.warning?"hsl(var(--chart-warning))":"hsl(var(--chart-1))":"hsl(var(--chart-1))"})(i,e[i]);return{...e,period_start:g()(e.period_start).utc().format("YYYY-MM-DD"),[i]:t,[et]:t,fill:a,stroke:a}}),er=(0,n.useCallback)(()=>{var e;if(!(null==X||null==(e=X.data)?void 0:e.length))return;let t=X.data[X.data.length-1][i];return ea?"".concat("number"==typeof t?t.toFixed(1):t,"%"):"number"==typeof t?t.toLocaleString():t},[null==X?void 0:X.data,null==X?void 0:X.format,i]);return(0,n.useEffect)(()=>{x&&F(x)},[x]),(0,n.useEffect)(()=>{O(er())},[X,er]),(0,s.jsx)(U.V,{draggable:!0,showDragHandle:!0,loading:"infra-monitoring"===c?J:"daily-stats"===c&&K,icon:null==ee||null==(t=ee.category)?void 0:t.icon("text-foreground-muted"),label:l,actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.G,{type:"text",size:"tiny",disabled:Z,className:"w-7 h-7",icon:"bar"===W?(0,s.jsx)(_.A,{}):(0,s.jsx)(k.A,{}),onClick:()=>{let e="bar"===W?"line":"bar";D&&D({chart:{chart_type:e}}),F(e)},tooltip:{content:{side:"bottom",className:"max-w-56 text-center",text:"View as ".concat("bar"===W?"line chart":"bar chart")}}}),f]}),"data-sentry-element":"ReportBlockContainer","data-sentry-component":"ChartBlock","data-sentry-source-file":"ChartBlock.tsx",children:Z?(0,s.jsxs)("div",{className:"flex flex-grow w-full flex-col items-center justify-center gap-y-2 px-4",children:[(0,s.jsx)(A.A,{size:18,className:"animate-spin text-border-strong"}),(0,s.jsxs)("p",{className:"text-xs text-foreground-lighter text-center",children:["Loading data for ",l]})]}):void 0===X?(0,s.jsxs)("div",{className:"flex flex-grow w-full flex-col items-center justify-center gap-y-2 px-4",children:[(0,s.jsx)(T.id,{}),(0,s.jsxs)("p",{className:"text-xs text-foreground-lighter text-center",children:["Unable to load data for ",l]})]}):0===es.length?(0,s.jsx)("div",{className:"flex flex-grow w-full flex-col items-center justify-center gap-y-2",children:(0,s.jsx)(v.A,{size:"small",className:"border-0",description:"It may take up to 24 hours for data to refresh"})}):(0,s.jsxs)(s.Fragment,{children:[G&&(0,s.jsxs)("div",{className:"pt-2 px-3 w-full text-left leading-tight",children:[(0,s.jsx)("span",{className:"text-xs font-mono uppercase text-foreground-light",children:"Most recently"}),(0,s.jsx)("p",{className:"text-lg text",children:G})]}),(0,s.jsx)(j.at,{className:"w-full aspect-auto px-3 py-2",style:{height:H?"".concat(H,"px"):void 0,minHeight:H?"".concat(H,"px"):void 0},children:"bar"===W?(0,s.jsxs)(S.E,{accessibilityLayer:!0,margin:{left:0,right:0},data:es,children:[(0,s.jsx)(C.d,{vertical:!1}),(0,s.jsx)(I.W,{dataKey:"period_start",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),(0,s.jsx)(E.h,{hide:!0,domain:ea?[0,100]:void 0}),(0,s.jsx)(j.II,{content:(0,s.jsx)(j.Nt,{className:"w-[200px]",labelSuffix:ea?"%":"",labelFormatter:e=>g()(e).format("DD MMM YYYY")})}),(0,s.jsx)(R.y,{dataKey:et,radius:[2,2,1,1]})]}):(0,s.jsxs)(L.b,{accessibilityLayer:!0,margin:{left:0,right:0},data:es,children:[(0,s.jsx)(C.d,{vertical:!1}),(0,s.jsx)(I.W,{dataKey:"period_start",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),(0,s.jsx)(E.h,{hide:!0,domain:ea?[0,100]:void 0}),(0,s.jsx)(j.II,{content:(0,s.jsx)(j.Nt,{className:"w-[200px]",labelSuffix:(null==X?void 0:X.format)==="%"?"%":"",labelFormatter:e=>g()(e).format("DD MMM YYYY")})}),(0,s.jsx)(P.N,{dataKey:et,stroke:"hsl(var(--chart-1))",radius:4})]})})]})})};var D=a(10723);let q=e=>{var t,a;let{label:r,attribute:n,actions:l}=e,{ref:o}=(0,i.g)(),c=w.Cb.find(e=>e.key===n),d=null==c||null==(t=c.category)?void 0:t.label;return(0,s.jsx)(U.V,{draggable:!0,showDragHandle:!0,loading:!1,icon:null==c||null==(a=c.category)?void 0:a.icon("text-foreground-muted"),label:r,actions:l,"data-sentry-element":"ReportBlockContainer","data-sentry-component":"DeprecatedChartBlock","data-sentry-source-file":"DeprecatedChartBlock.tsx",children:(0,s.jsxs)("div",{className:"flex flex-col justify-center flex-1",children:[(0,s.jsx)("p",{className:"text-xs text-foreground-lightr",children:"This chart is not longer available, and can be removed from your report"}),(0,s.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["You may view the equivalent of this data from the"," ",(0,s.jsxs)(D.g,{href:"/project/".concat(o,"/").concat((e=>{switch(e){case"Database API":return"/logs/postgrest-logs";case"All API usage":return"/logs/explorer";case"Realtime":return"/logs/realtime-logs";case"Storage":return"/logs/storage-logs";case"Authentication":return"/logs/auth-logs";default:return""}})(d)),"data-sentry-element":"InlineLink","data-sentry-source-file":"DeprecatedChartBlock.tsx",children:[d," Logs"]})," ","instead"]})]})})},z=e=>{var t,a;let{item:f,startDate:g,endDate:y,interval:j,disableUpdate:v,isRefreshing:b,onRemoveChart:N,onUpdateChart:w}=e,{ref:_}=(0,i.g)(),k=(0,h.RE)(),A=f.attribute.startsWith("snippet_"),{data:S,error:C,isLoading:I}=(0,d.K)({projectRef:_,id:f.id},{enabled:A&&!!f.id,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchIntervalInBackground:!1,retry:e=>!(e>=2),onSuccess:e=>{var t;if(!A)return;let a=null==e||null==(t=e.content)?void 0:t.sql;a&&Y("select",a)}}),E=A?null==S||null==(t=S.content)?void 0:t.sql:void 0,R={...c.W,...null!=(a=f.chartConfig)?a:{}},L=p.ig.includes(f.attribute),P=null==C?void 0:C.message.includes("Content not found"),{database:T}=(0,u.Jx)({projectRef:_}),M=null==T?void 0:T.connection_string_read_only,U=null==T?void 0:T.connectionString,[D,z]=(0,n.useState)(void 0),[W,F]=(0,n.useState)(!1),{mutate:G,error:O,isLoading:B}=(0,m.Y)({onError:()=>{}}),Y=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"select",t=arguments.length>1?arguments[1]:void 0;if(!_||!t)return!1;let a="mutation"===e?U:null!=M?M:U;return a?("mutation"===e&&F(!0),G({projectRef:_,connectionString:a,sql:t},{onSuccess:t=>{z(t.result),F("mutation"===e)},onError:t=>{let a=t.message.toLowerCase(),s=a.includes("read-only transaction")||a.includes("permission denied")||a.includes("must be owner");"select"===e&&s&&F(!0)}}),!0):(l.oR.error("Unable to establish a database connection for this project."),!1)},[_,M,U,G]),K=(0,x.V)(E),V=(0,x.V)(b);return(K||V&&b)&&Y("select",E),(0,s.jsx)(s.Fragment,{children:A?(0,s.jsx)(c.i,{blockWriteQueries:!0,id:f.id,label:f.label,chartConfig:R,sql:E,results:D,initialHideSql:!0,errorText:P?"SQL snippet not found":null==O?void 0:O.message,isExecuting:B,isWriteQuery:W,actions:!I&&(0,s.jsx)(o.G,{type:"text",icon:(0,s.jsx)(r.A,{}),className:"w-7 h-7",onClick:()=>N({metric:{key:f.attribute}}),tooltip:{content:{side:"bottom",text:"Remove chart"}}}),onExecute:e=>{Y(e,E)},onUpdateChartConfig:w,onRemoveChart:()=>N({metric:{key:f.attribute}}),disabled:I||P||!E}):L?(0,s.jsx)(q,{attribute:f.attribute,label:"".concat(f.label).concat(_!==k.selectedDatabaseId?"infra-monitoring"===f.provider?" of replica":" on project":""),actions:v?null:(0,s.jsx)(o.G,{type:"text",icon:(0,s.jsx)(r.A,{}),className:"w-7 h-7",onClick:()=>N({metric:{key:f.attribute}}),tooltip:{content:{side:"bottom",text:"Remove chart"}}})}):(0,s.jsx)(H,{startDate:g,endDate:y,interval:j,attribute:f.attribute,provider:f.provider,defaultChartStyle:f.chart_type,maxHeight:176,label:"".concat(f.label).concat(_!==k.selectedDatabaseId?"infra-monitoring"===f.provider?" of replica":" on project":""),actions:v?null:(0,s.jsx)(o.G,{type:"text",icon:(0,s.jsx)(r.A,{}),className:"w-7 h-7",onClick:()=>N({metric:{key:f.attribute}}),tooltip:{content:{side:"bottom",text:"Remove chart"}}}),onUpdateChartConfig:w})})}},60152:e=>{e.exports=function(e,t){for(var a,s=-1,r=e.length;++s<r;){var n=t(e[s]);void 0!==n&&(a=void 0===a?n:a+n)}return a}},60894:(e,t,a)=>{"use strict";a.d(t,{a:()=>l});var s=a(51797),r=a(23463),n=a(12719);let l=e=>{let{preset:t,orderBy:a,searchQuery:l="",roles:i,runIndexAdvisor:o=!1,minCalls:c}=e,d=r.NY[n.N.QUERY_PERFORMANCE].queries[t],u=[void 0!==i&&i.length>0?"auth.rolname in (".concat(i.map(e=>"'".concat(e,"'")).join(", "),")"):"",l.length>0?"statements.query ~* '".concat(l,"'"):"","number"==typeof c&&c>0?"statements.calls >= ".concat(c):""].filter(e=>e.length>0).join(" AND "),m=a&&"ORDER BY ".concat(a.column," ").concat(a.order),x=d.sql([],u.length>0?"WHERE ".concat(u):void 0,m,o);return(0,s.A)({sql:x,params:void 0,where:u,orderBy:m})}},62510:(e,t,a)=>{"use strict";a.d(t,{b:()=>p});var s=a(80263),r=a(53434),n=a.n(r),l=a(53239),i=a(2070),o=a(72195),c=a(64720),d=a(75419),u=a(4860),m=a(80100),x=a(48555);let h={AXIS:"hsl(var(--background-overlay-hover))",GREEN_1:"hsl(var(--brand-default))",GREEN_2:"hsl(var(--brand-500))",RED_1:"hsl(var(--destructive-default))",RED_2:"hsl(var(--destructive-500))",YELLOW_1:"hsl(var(--warning-default))",YELLOW_2:"hsl(var(--warning-500))"},p=e=>{var t;let{data:a,onBarClick:r,EmptyState:p,DateTimeFormat:f="MMM D, YYYY, hh:mma",isFullHeight:g=!1}=e,[y,j]=(0,l.useState)(null);if(0===a.length)return p||null;let v=n()(a[0].timestamp).format(f),b=n()(null==(t=a[(null==a?void 0:a.length)-1])?void 0:t.timestamp).format(f);return(0,s.jsxs)("div",{"data-testid":"logs-bar-chart",className:(0,m.cn)("flex flex-col gap-y-3",g?"h-full":"h-24"),"data-sentry-component":"LogsBarChart","data-sentry-source-file":"index.tsx",children:[(0,s.jsx)(x.at,{className:"h-full",config:{error_count:{label:"Errors"},ok_count:{label:"Ok"},warning_count:{label:"Warnings"}},"data-sentry-element":"ChartContainer","data-sentry-source-file":"index.tsx",children:(0,s.jsxs)(i.E,{data:a,onMouseMove:e=>{e.activeTooltipIndex!==y&&j(e.activeTooltipIndex)},onMouseLeave:()=>j(null),onClick:e=>{var t,a;let s=null==e||null==(a=e.activePayload)||null==(t=a[0])?void 0:t.payload;r&&r(s,e)},"data-sentry-element":"RechartBarChart","data-sentry-source-file":"index.tsx",children:[(0,s.jsx)(o.h,{tick:!1,width:0,axisLine:{stroke:h.AXIS},tickLine:{stroke:h.AXIS},"data-sentry-element":"YAxis","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(c.W,{dataKey:"timestamp",interval:a.length-2,tick:!1,axisLine:{stroke:h.AXIS},tickLine:{stroke:h.AXIS},"data-sentry-element":"XAxis","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(x.II,{content:(0,s.jsx)(x.Nt,{className:"text-foreground-light -mt-5",labelFormatter:e=>n()(e).format(f)}),"data-sentry-element":"ChartTooltip","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(d.y,{dataKey:"error_count",fill:h.RED_1,maxBarSize:24,stackId:"stack","data-sentry-element":"Bar","data-sentry-source-file":"index.tsx",children:null==a?void 0:a.map((e,t)=>(0,s.jsx)(u.f,{className:"cursor-pointer transition-colors",fill:y===t||null===y?h.RED_1:h.RED_2},"error-".concat(t)))}),(0,s.jsx)(d.y,{dataKey:"warning_count",fill:h.YELLOW_1,maxBarSize:24,stackId:"stack","data-sentry-element":"Bar","data-sentry-source-file":"index.tsx",children:null==a?void 0:a.map((e,t)=>(0,s.jsx)(u.f,{className:"cursor-pointer transition-colors",fill:y===t||null===y?h.YELLOW_1:h.YELLOW_2},"warning-".concat(t)))}),(0,s.jsx)(d.y,{dataKey:"ok_count",fill:h.GREEN_1,maxBarSize:24,stackId:"stack","data-sentry-element":"Bar","data-sentry-source-file":"index.tsx",children:null==a?void 0:a.map((e,t)=>(0,s.jsx)(u.f,{className:"cursor-pointer transition-colors",fill:y===t||null===y?h.GREEN_1:h.GREEN_2},"success-".concat(t)))})]})}),a&&(0,s.jsxs)("div",{className:"text-foreground-lighter -mt-10 flex items-center justify-between text-[10px] font-mono",children:[(0,s.jsx)("span",{children:v}),(0,s.jsx)("span",{children:b})]})]})}},62550:(e,t,a)=>{"use strict";a.d(t,{j:()=>d});var s=a(56947),r=a(78510),n=a(24523),l=a(9620),i=a(85039),o=a(30399);async function c(e,t,a){let{projectRef:s,connectionString:l,schema:i}=e;if(!s)throw Error("projectRef is required");let o=new Headers(a);l&&o.set("x-connection-encrypted",l);let{data:c,error:d}=await (0,n.Jt)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":l,"x-pg-application-name":r.r},path:{ref:s},query:{included_schemas:i||"",excluded_schemas:""}},headers:o,signal:t});return d&&(0,n.H4)(d),c}let d=function(e){let{projectRef:t,connectionString:a,schema:r}=e,{enabled:n=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:u}=(0,l.YA)(),m=(null==u?void 0:u.status)===i.BU.ACTIVE_HEALTHY;return(0,s.I)({queryKey:o.S.list(t,r),queryFn:e=>{let{signal:s}=e;return c({projectRef:t,connectionString:a,schema:r},s)},enabled:n&&void 0!==t&&m,...d})}},66646:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("SquareTerminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]])},67435:(e,t,a)=>{"use strict";a.d(t,{b:()=>i});var s=a(17702),r=a(24523),n=a(1206);async function l(e,t){let{projectRef:a,type:s,name:n,limit:l=10,sort:i,cursor:o}=e;if(void 0===a)throw Error("projectRef is required for getContent");let{data:c,error:d}=await (0,r.Jt)("/platform/projects/{ref}/content",{params:{path:{ref:a},query:{type:s,name:n,sort_by:i,limit:l.toString(),cursor:o}},signal:t});return d&&(0,r.H4)(d),{cursor:c.cursor,content:c.data}}let i=function(e){let{projectRef:t,type:a,name:r,limit:i,sort:o}=e,{enabled:c=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.q)({queryKey:n.M.infiniteList(t,{type:a,name:r,limit:i,sort:o}),queryFn:e=>{let{signal:s,pageParam:n}=e;return l({projectRef:t,type:a,name:r,limit:i,sort:o,cursor:n},s)},enabled:c&&void 0!==t,getNextPageParam:e=>e.cursor,...d})}},70452:(e,t,a)=>{"use strict";a.d(t,{l:()=>d});var s=a(57672),r=a(30138),n=a(29395),l=a(56947),i=a(59356),o=a(31907);async function c(e,t){var a,l;let{projectRef:o,connectionString:c,keywords:d,filter:u,providers:m,forceExactCount:x,column:h}=e,p=(e=>{let{filter:t,keywords:a,providers:l,forceExactCount:i=!1,column:o}=e,c=a&&""!==a,d=[],u="select count(*) from auth.users";if(o&&c){if("email"===o){let e=(0,r.T)(a),t=(0,n.eu)(e[0]),s=e[1]?(0,n.eu)(e[1]):null;d.push("lower(email) >= ".concat(t).concat(s?" and lower(email) < ".concat(s):""," and instance_id = '00000000-0000-0000-0000-000000000000'::uuid"))}else if("phone"===o){let e=(0,r.T)(a),t=(0,n.eu)(e[0]),s=e[1]?(0,n.eu)(e[1]):null;d.push("phone >= ".concat(t).concat(s?" and phone < ".concat(s):""))}else if("id"===o){let e=(0,r.h)(a,!1);if(e===a)d.push("id = ".concat((0,n.eu)(a)));else{let t=(0,r.h)(a,!0);d.push("id >= ".concat((0,n.eu)(e)," and id < ").concat((0,n.eu)(t)))}}}else{if(c){let e=(0,n.eu)("%".concat(a,"%"));d.push("id::text ilike ".concat(e," or email ilike ").concat(e," or phone ilike ").concat(e))}if("verified"===t?d.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===t?d.push("is_anonymous is true"):"unverified"===t&&d.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),l&&l.length>0)if(l.includes("saml 2.0")){let e=l.map(e=>"saml 2.0"===e?"sso":e);d.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat((0,n.eu)(e),"]").trim())}else d.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat((0,n.eu)(l),"]"))}let m=d.map(e=>"(".concat(e,")")).join(" and "),x=d.length>0?" where ".concat(m):"";if(i)return"select (".concat(u).concat(x,"), false as is_estimate;");{let e="".concat("select * from auth.users").concat(x),t="".concat(u).concat(x),a=(0,n.eu)(e);return"\n".concat(s.I,"\n\nwith approximation as (").concat("select reltuples as estimate from pg_class where oid = 'auth.users'::regclass",")\nselect \n  case \n    when estimate = -1 then (select pg_temp.count_estimate(").concat(a,"))::int\n    when estimate > ").concat(s.k," then ").concat(d.length>0?"(select pg_temp.count_estimate(".concat(a,"))::int"):"estimate::int","\n    else (").concat(t,")\n  end as count,\n  estimate = -1 or estimate > ").concat(s.k," as is_estimate\nfrom approximation;\n").trim()}})({filter:u,keywords:d,providers:m,forceExactCount:x,column:h}),{result:f}=await (0,i.E)({projectRef:o,connectionString:c,sql:p,queryKey:["users-count"]},t),g=null==f||null==(a=f[0])?void 0:a.count,y=null==f||null==(l=f[0])?void 0:l.is_estimate;if("number"!=typeof g)throw Error("Error fetching users count");return{count:g,is_estimate:null==y||y}}let d=function(e){let{projectRef:t,connectionString:a,keywords:s,filter:r,providers:n,forceExactCount:i,column:d}=e,{enabled:u=!0,...m}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.I)({queryKey:o.Z.usersCount(t,{keywords:s,filter:r,providers:n,forceExactCount:i,column:d}),queryFn:e=>{let{signal:l}=e;return c({projectRef:t,connectionString:a,keywords:s,filter:r,providers:n,forceExactCount:i,column:d},l)},enabled:u&&void 0!==t,...m})}},73145:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var s=a(77641),r=a(81285),n=a(64720),l=a(72195),i=a(12178),o=(0,s.gu)({chartName:"LineChart",GraphicalChild:r.N,axisComponents:[{axisType:"xAxis",AxisComp:n.W},{axisType:"yAxis",AxisComp:l.h}],formatAxisMap:i.pr})},74046:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>aw});var s,r,n=a(80263),l=a(22891),i=a(53434),o=a.n(i),c=a(52555),d=a.n(c),u=a(53239),m=a(34873),x=a(86510),h=a(28009),p=a(17518),f=a(25368),g=a(60894),y=a(23729),j=a(6542),v=a(69498),b=a(73391),N=a(95448),w=a(18664),_=a(72432),k=a(78039),A=a(11101),S=a(78511),C=a(16488);let I=()=>{let e,{ref:t}=(0,l.g)(),[a,s]=(0,u.useState)("security"),{data:r,isLoading:i}=(0,j.b)({projectRef:t}),{data:o,isLoading:c}=(0,g.a)({preset:"slowestExecutionTime"}),I=(0,N.xd)(),{openSidebar:E}=(0,w.rM)(),{setSelectedItem:R}=(0,b.lq)(),L=(0,u.useMemo)(()=>(null!=r?r:[]).filter(e=>e.categories.includes("SECURITY")),[r]),P=(0,u.useMemo)(()=>(null!=r?r:[]).filter(e=>e.categories.includes("PERFORMANCE")),[r]),T=L.filter(e=>e.level===p.R.ERROR).length,M=L.filter(e=>e.level===p.R.WARN).length,U=P.filter(e=>e.level===p.R.ERROR).length,H=P.filter(e=>e.level===p.R.WARN).length,D=(0,u.useMemo)(()=>(null!=o?o:[]).slice(0,5),[o]),q=(0,u.useCallback)(e=>{R(e.cache_key,"lint"),E(v.c.ADVISOR_PANEL)},[R,E]),z=T+M+U+H,W=T>0||U>0,F=M>0||H>0;if(0===z)e=(0,n.jsx)("h2",{children:"No issues available"});else{let t=1===z?"issue":"issues",a=z.toString(),s="";W?s="text-destructive":F&&(s="text-warning"),e=(0,n.jsxs)("h2",{children:[a," ",t," need",1===z?"s":""," ",(0,n.jsx)("span",{className:s,children:"attention"})]})}let G=(e,t,a,s,r)=>{let l=t.filter(e=>e.level===p.R.ERROR||e.level===p.R.WARN).sort((e,t)=>e.level===p.R.ERROR?-1:1);return(0,n.jsxs)("div",{className:"h-full","data-sentry-component":"renderLintTabContent","data-sentry-source-file":"AdvisorWidget.tsx",children:[r&&(0,n.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,n.jsx)(C.A,{}),(0,n.jsx)(C.A,{className:"w-3/4"}),(0,n.jsx)(C.A,{className:"w-1/2"})]}),!r&&(a>0||s>0)&&(0,n.jsx)("ul",{children:l.map(e=>{var t;let a=e.detail?e.detail:e.title;return(0,n.jsx)("li",{className:"text-sm w-full border-b my-0 last:border-b-0 group px-4 ",children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full group",children:[(0,n.jsxs)("button",{onClick:()=>q(e),className:"flex items-center gap-2 transition truncate flex-1 min-w-0 py-3 text-left",children:[(0,n.jsx)(f.L,{type:null==(t=e.metadata)?void 0:t.type}),(0,n.jsx)("p",{className:"flex-1 font-mono text-xs leading-6 text-xs text-foreground-light group-hover:text-foreground truncate",children:a.replace(/\\`/g,"`")})]}),(0,n.jsx)(y.G,{type:"text",className:"px-1 opacity-0 group-hover:opacity-100 w-7",icon:(0,n.jsx)(_.M,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),E(v.c.AI_ASSISTANT),I.newChat({name:"Summarize lint",initialInput:(0,f.Gb)(e)})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]})},e.cache_key)})}),!r&&0===a&&0===s&&(0,n.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,n.jsx)(m.A,{size:20,strokeWidth:1.5,className:"text-foreground-muted"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["No ",e.toLowerCase()," issues found"]})]})]})};return(0,n.jsxs)("div",{className:"@container","data-sentry-component":"AdvisorWidget","data-sentry-source-file":"AdvisorWidget.tsx",children:[i?(0,n.jsx)(C.A,{className:"w-96 mb-6"}):(0,n.jsx)("div",{className:"flex justify-between items-center mb-6",children:e}),(0,n.jsxs)("div",{className:"grid grid-cols-1 @xl:grid-cols-2 gap-4",children:[(0,n.jsx)(k.Zp,{className:"h-80","data-sentry-element":"Card","data-sentry-source-file":"AdvisorWidget.tsx",children:(0,n.jsxs)(A.tU,{value:a,className:"h-full flex flex-col","data-sentry-element":"Tabs","data-sentry-source-file":"AdvisorWidget.tsx",children:[(0,n.jsxs)(k.aR,{className:"h-10 py-0 pl-4 pr-2 flex flex-row items-center justify-between flex-0","data-sentry-element":"CardHeader","data-sentry-source-file":"AdvisorWidget.tsx",children:[(0,n.jsxs)(A.j7,{className:"flex justify-start rounded-none gap-x-4 border-b-0 !mt-0 pt-0","data-sentry-element":"TabsList","data-sentry-source-file":"AdvisorWidget.tsx",children:[(0,n.jsxs)(A.Xi,{value:"security",onClick:()=>s("security"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase","data-sentry-element":"TabsTrigger","data-sentry-source-file":"AdvisorWidget.tsx",children:["Security"," ",T+M>0&&(0,n.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:T+M})]}),(0,n.jsxs)(A.Xi,{value:"performance",onClick:()=>s("performance"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase","data-sentry-element":"TabsTrigger","data-sentry-source-file":"AdvisorWidget.tsx",children:["Performance"," ",U+H>0&&(0,n.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:U+H})]})]}),(0,n.jsx)(y.G,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,n.jsx)(x.A,{}),tooltip:{content:{side:"bottom",text:"Open ".concat(a," Advisor"),className:"capitalize"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"AdvisorWidget.tsx",children:(0,n.jsx)(d(),{href:"/project/".concat(t,"/advisors/").concat(a),"data-sentry-element":"Link","data-sentry-source-file":"AdvisorWidget.tsx"})})]}),(0,n.jsxs)(k.Wu,{className:"!p-0 mt-0 flex-1 overflow-y-auto","data-sentry-element":"CardContent","data-sentry-source-file":"AdvisorWidget.tsx",children:[(0,n.jsx)(A.av,{value:"security",className:"p-0 mt-0 h-full","data-sentry-element":"TabsContent","data-sentry-source-file":"AdvisorWidget.tsx",children:G("Security",L,T,M,i)}),(0,n.jsx)(A.av,{value:"performance",className:"p-0 mt-0 h-full","data-sentry-element":"TabsContent","data-sentry-source-file":"AdvisorWidget.tsx",children:G("Performance",P,U,H,i)})]})]})}),(0,n.jsxs)(k.Zp,{className:"h-80 flex flex-col","data-sentry-element":"Card","data-sentry-source-file":"AdvisorWidget.tsx",children:[(0,n.jsxs)(k.aR,{className:"h-10 flex-row items-center justify-between py-0 pl-4 pr-2","data-sentry-element":"CardHeader","data-sentry-source-file":"AdvisorWidget.tsx",children:[(0,n.jsx)(k.ZB,{"data-sentry-element":"CardTitle","data-sentry-source-file":"AdvisorWidget.tsx",children:"Slow Queries"}),(0,n.jsx)(y.G,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,n.jsx)(x.A,{}),tooltip:{content:{side:"bottom",text:"Open Query Performance Advisor"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"AdvisorWidget.tsx",children:(0,n.jsx)(d(),{href:"/project/".concat(t,"/reports/query-performance"),"data-sentry-element":"Link","data-sentry-source-file":"AdvisorWidget.tsx"})})]}),(0,n.jsx)(k.Wu,{className:"!p-0 flex-1 overflow-y-auto","data-sentry-element":"CardContent","data-sentry-source-file":"AdvisorWidget.tsx",children:c?(0,n.jsxs)("div",{className:"space-y-2 p-4",children:[(0,n.jsx)(C.A,{}),(0,n.jsx)(C.A,{className:"w-3/4"}),(0,n.jsx)(C.A,{className:"w-1/2"}),(0,n.jsx)(C.A,{className:"w-3/4"}),(0,n.jsx)(C.A,{className:"w-1/2"})]}):0===D.length?(0,n.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,n.jsx)(h.A,{strokeWidth:1.5,size:20,className:"text-foreground-muted"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"No slow queries found in the selected period"})]}):(0,n.jsxs)(S.XI,{className:"text-xs font-mono max-w-full",children:[(0,n.jsx)(S.A0,{children:(0,n.jsxs)(S.Hj,{children:[(0,n.jsx)(S.nd,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Query"}),(0,n.jsx)(S.nd,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Avg time"}),(0,n.jsx)(S.nd,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Calls"})]})}),(0,n.jsx)(S.BF,{children:D.map((e,t)=>(0,n.jsxs)(S.Hj,{className:"py-2",children:[(0,n.jsx)(S.nA,{className:"font-mono truncate max-w-xs",children:e.query}),(0,n.jsx)(S.nA,{className:"font-mono truncate max-w-xs",children:"number"==typeof e.mean_time?"".concat((e.mean_time/1e3).toFixed(2),"s"):"N/A"}),(0,n.jsx)(S.nA,{className:"font-mono truncate max-w-xs",children:e.calls})]},t))})]})})]})]})]})};var E=a(93712),R=a(74099),L=a(99407),P=a(64778),T=a(94406),M=a(2657),U=a(48510),H=a(85039),D=a(99779),q=a(60045),z=a(53337),W=a(12123),F=a(54831),G=a(76750),O=a(75544),B=a(27664),Y=a(80090),K=a(80421),V=a(53626);let $=()=>{var e,t,a;let{ref:s}=(0,l.g)(),{projectConnectionJavascriptExample:r,projectConnectionDartExample:i}=(0,M.x)(["project_connection:javascript_example","project_connection:dart_example"]),o=[{name:r?"Javascript":"Typescript",key:"js"},...i?[{name:"Dart",key:"dart"}]:[]],[c,m]=(0,u.useState)(o[0]),{data:x,isError:h,isLoading:p}=(0,B.G)({projectRef:s}),{data:f}=(0,G.I)({projectRef:s}),{anonKey:g,serviceKey:y}=(0,G.x)(f),j=!g&&!y,{data:v,isError:b,isLoading:N}=(0,O.l)({projectRef:s},{enabled:!p&&j}),w=N&&!p&&j,_=null==v?void 0:v.jwtSecretUpdateStatus,{can:k}=(0,Y.Qp)(q.aG.READ,"service_api_keys"),A=void 0===_||_===z.bh.Updated,S=null!=(a=null==x||null==(e=x.app_config)?void 0:e.protocol)?a:"https",C=null==x||null==(t=x.app_config)?void 0:t.endpoint,I="".concat(S,"://").concat(null!=C?C:"-"),E=(e=>({js:"\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = '".concat(e,"'\nconst supabaseKey = process.env.SUPABASE_KEY\nconst supabase = createClient(supabaseUrl, supabaseKey)"),dart:"\nconst supabaseUrl = '".concat(e,"';\nconst supabaseKey = String.fromEnvironment('SUPABASE_KEY');\n\nFuture<void> main() async {\n  await Supabase.initialize(url: supabaseUrl, anonKey: supabaseKey);\n  runApp(MyApp());\n}")}))(I),R=c?E[c.key]:"No snippet available";return(0,n.jsx)(P.A,{title:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h5",{className:"text-base",children:"Project API"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Your API is secured behind an API gateway which requires an API Key for every request.",(0,n.jsx)("br",{}),"You can use the parameters below to use Supabase client libraries."]})]}),"data-sentry-element":"Panel","data-sentry-component":"APIKeys","data-sentry-source-file":"APIKeys.tsx",children:h||b?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(W.A,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:h?"Failed to retrieve API keys":"Failed to update JWT secret"})]}):p||j?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(F.A,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Retrieving API keys"})]}):w?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(F.A,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"JWT secret is being updated"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.A.Content,{children:(0,n.jsx)(K.A,{label:"Project URL",readOnly:!0,copy:!0,disabled:!0,className:"input-mono",value:I,descriptionText:"A RESTful endpoint for querying and managing your database.",layout:"horizontal"})}),(0,n.jsx)(P.A.Content,{className:"border-t border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,n.jsx)(K.A,{readOnly:!0,disabled:!0,layout:"horizontal",className:"input-mono",label:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm",children:"API Key"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1 -ml-1",children:[(0,n.jsx)("code",{className:"text-xs",children:null==g?void 0:g.name}),(0,n.jsx)("code",{className:"text-xs",children:"public"})]})]}),copy:k&&A,reveal:(null==g?void 0:g.name)!=="anon"&&k&&A,value:k?_===z.bh.Failed?"JWT secret update failed, new API key may have issues":_===z.bh.Updating?"Updating JWT secret...":null==g?void 0:g.api_key:"You need additional permissions to view API keys",onChange:()=>{},descriptionText:(0,n.jsxs)("p",{children:["This key is safe to use in a browser if you have enabled Row Level Security (RLS) for your tables and configured policies. You may also use the service key which can be found"," ",(0,n.jsx)(d(),{href:"/project/".concat(s,"/settings/api"),className:"transition text-brand hover:text-brand-600",children:"here"})," ","to bypass RLS."]})})}),o.length>0&&(0,n.jsxs)("div",{className:"border-t border-panel-border-interior-light dark:border-panel-border-interior-dark",children:[(0,n.jsx)("div",{className:"flex items-center bg-studio",children:o.map(e=>{let t=c.key===e.key;return(0,n.jsx)("div",{className:["px-3 py-1 text-sm cursor-pointer transition","".concat(!t?"bg-studio text-foreground-light":"bg-surface-100")].join(" "),onClick:()=>m(e),children:e.name},e.key)})}),(0,n.jsx)("div",{className:"bg-surface-100 px-4 py-6 min-h-[200px]",children:(0,n.jsx)(V.X,{className:c.key,children:R})})]})]})})};var J=a(80100);let Q=()=>(0,n.jsx)("div",{className:"w-[10%] h-full flex items-center border-r border-default px-2","data-sentry-component":"Checkbox","data-sentry-source-file":"GetStartedHero.tsx",children:(0,n.jsx)("div",{className:"w-3 h-3 rounded border border-control"})}),X=e=>{let{className:t,col1:a,col2:s,col3:r}=e;return(0,n.jsxs)("div",{className:(0,J.cn)("h-[30px] flex items-center bg-studio border-b border-default",t),"data-sentry-component":"Row","data-sentry-source-file":"GetStartedHero.tsx",children:[(0,n.jsx)(Q,{"data-sentry-element":"Checkbox","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)("div",{className:"w-[15%] h-full flex items-center border-r border-default px-2",children:(0,n.jsx)("p",{className:"text-xs",children:a})}),(0,n.jsx)("div",{className:"w-[45%] h-full flex items-center border-r border-default px-2",children:(0,n.jsx)("p",{className:"text-xs",children:s})}),(0,n.jsx)("div",{className:"w-[30%] h-full flex items-center px-2",children:(0,n.jsx)("p",{className:"text-xs",children:r})})]})},Z=()=>(0,n.jsxs)("div",{className:"w-full max-w-[500px] h-full pb-10 lg:pb-0 relative pointer-events-none","data-sentry-component":"GetStartedHero","data-sentry-source-file":"GetStartedHero.tsx",children:[(0,n.jsxs)("div",{className:(0,J.cn)("w-[290px] lg:w-[400px] h-[180px] bg-alternative border border-default","rounded-t px-4 py-3 space-y-1 overflow-hidden"),children:[(0,n.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"1"}),(0,n.jsxs)("p",{className:"text-blue-900",children:["create table ",(0,n.jsxs)("span",{className:"text-foreground",children:["todos ","("]})]})]}),(0,n.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"2"}),(0,n.jsxs)("p",{className:"text-foreground",children:["id ",(0,n.jsx)("span",{className:"text-blue-900",children:"bigint generated by default"}),","]})]}),(0,n.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"3"}),(0,n.jsxs)("p",{className:"text-foreground",children:["task ",(0,n.jsx)("span",{className:"text-blue-900",children:"text"}),","]})]}),(0,n.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"4"}),(0,n.jsxs)("p",{className:"text-foreground",children:["status ",(0,n.jsx)("span",{className:"text-blue-900",children:"status default 'Not Started'"}),","]})]}),(0,n.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"5"}),(0,n.jsxs)("p",{className:"text-foreground",children:["user_id ",(0,n.jsx)("span",{className:"text-blue-900",children:"uuid references auth.users not null"}),","]})]}),(0,n.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"6"}),(0,n.jsxs)("p",{className:"text-foreground",children:["inserted_at ",(0,n.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,n.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"7"}),(0,n.jsxs)("p",{className:"text-foreground",children:["updated_at ",(0,n.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,n.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,n.jsx)("span",{className:"text-foreground-light",children:"8"}),(0,n.jsx)("p",{className:"text-blue-900",children:");"})]})]}),(0,n.jsxs)("div",{className:(0,J.cn)("w-[260px] lg:w-[320px] h-[160px] lg:h-[220px] bg-surface-100 border border-default","absolute right-0 top-[50px] lg:-top-[40px] rounded-t overflow-y-hidden"),children:[(0,n.jsx)(X,{col1:"id",col2:"task",col3:"status",className:"h-[24px] bg-surface-100","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)(X,{col1:"1",col2:"Create a project",col3:"Complete","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)(X,{col1:"2",col2:"Read documentation",col3:"Complete","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)(X,{col1:"3",col2:"Build application",col3:"In progress","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)(X,{col1:"4",col2:"Connect Supabase",col3:"In progress","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)(X,{col1:"5",col2:"Deploy project",col3:"Not started","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)(X,{col1:"6",col2:"Get users",col3:"Not started","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"}),(0,n.jsx)(X,{col1:"7",col2:"Upgrade to Pro",col3:"Not started","data-sentry-element":"Row","data-sentry-source-file":"GetStartedHero.tsx"})]})]}),ee=()=>{let{ref:e}=(0,l.g)(),{projectAuthAll:t,projectEdgeFunctionAll:a,projectStorageAll:s}=(0,M.x)(["project_auth:all","project_edge_function:all","project_storage:all"]);return(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4 lg:gap-20","data-sentry-component":"NewProjectPanel","data-sentry-source-file":"NewProjectPanel.tsx",children:[(0,n.jsx)("div",{className:"col-span-12",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-12 md:space-y-20",children:[(0,n.jsx)("div",{className:"flex h-full flex-col justify-between",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h2",{children:"Welcome to your new project"}),(0,n.jsx)("p",{className:"text-base text-foreground-light",children:"Your project has been deployed on its own instance, with its own API all set up and ready to use."})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,n.jsxs)("div",{className:"col-span-12 flex flex-col justify-center space-y-8 lg:col-span-7",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h2",{children:"Get started by building out your database"}),(0,n.jsx)("p",{className:"text-base text-foreground-light",children:"Start building your app by creating tables and inserting data. Our Table Editor makes Postgres as easy to use as a spreadsheet, but there's also our SQL Editor if you need something more."})]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(D.$,{asChild:!0,type:"default",icon:(0,n.jsx)(U.Ue,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"NewProjectPanel.tsx",children:(0,n.jsx)(T.h,{projectRef:e,"data-sentry-element":"EditorIndexPageLink","data-sentry-source-file":"NewProjectPanel.tsx",children:"Table Editor"})}),(0,n.jsx)(D.$,{asChild:!0,type:"default",icon:(0,n.jsx)(U.mx,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"NewProjectPanel.tsx",children:(0,n.jsx)(d(),{href:"/project/".concat(e,"/sql/new"),"data-sentry-element":"Link","data-sentry-source-file":"NewProjectPanel.tsx",children:"SQL Editor"})}),(0,n.jsx)(D.$,{asChild:!0,type:"default",icon:(0,n.jsx)(x.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"NewProjectPanel.tsx",children:(0,n.jsx)(d(),{href:"".concat(H.aq,"/guides/database"),target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"NewProjectPanel.tsx",children:"About Database"})})]})]}),(0,n.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,n.jsx)(Z,{"data-sentry-element":"GetStartedHero","data-sentry-source-file":"NewProjectPanel.tsx"})})]}),t&&a&&s&&(0,n.jsxs)("div",{className:"flex h-full flex-col justify-between space-y-6",children:[(0,n.jsxs)("div",{className:"max-w-2xl space-y-2",children:[(0,n.jsx)("h2",{children:"Explore our other products"}),(0,n.jsx)("p",{className:"text-base text-foreground-light",children:"Supabase provides all the backend features you need to build a product. You can use it completely, or just the features you need."})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 md:gap-y-0 xl:grid-cols-4",children:[(0,n.jsx)(P.A,{children:(0,n.jsxs)(P.A.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.Nj,{size:16,strokeWidth:1.5})}),(0,n.jsx)("h5",{children:"Authentication"})]}),(0,n.jsx)("div",{className:"flex flex-grow md:min-h-[50px] xl:min-h-[75px]",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"A complete user management system that works without any additional tools."})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(D.$,{type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"/project/".concat(e,"/auth/users"),children:"Explore Auth"})}),(0,n.jsx)(D.$,{className:"translate-y-[1px]",icon:(0,n.jsx)(x.A,{}),type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"".concat(H.aq,"/guides/auth"),target:"_blank",rel:"noreferrer",children:"About Auth"})})]})]})}),(0,n.jsx)(P.A,{children:(0,n.jsxs)(P.A.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.wc,{size:16,strokeWidth:1.5})}),(0,n.jsx)("h5",{children:"Storage"})]}),(0,n.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Store, organize, and serve any file types of any size from multiple buckets."})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(D.$,{type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"/project/".concat(e,"/storage/buckets"),children:"Explore Storage"})}),(0,n.jsx)(D.$,{className:"translate-y-[1px]",icon:(0,n.jsx)(x.A,{}),type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"".concat(H.aq,"/guides/storage"),target:"_blank",rel:"noreferrer",children:"About Storage"})})]})]})}),(0,n.jsx)(P.A,{children:(0,n.jsxs)(P.A.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.n7,{size:16,strokeWidth:1.5})}),(0,n.jsx)("h5",{children:"Edge Functions"})]}),(0,n.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Write custom code without deploying or scaling servers, with fast deploy times and low latency."})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(D.$,{type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"/project/".concat(e,"/functions"),children:"Explore Functions"})}),(0,n.jsx)(D.$,{className:"translate-y-[1px]",icon:(0,n.jsx)(x.A,{}),type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"".concat(H.aq,"/guides/functions"),target:"_blank",rel:"noreferrer",children:"About Functions"})})]})]})}),(0,n.jsx)(P.A,{children:(0,n.jsxs)(P.A.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.Se,{size:16,strokeWidth:1.5})}),(0,n.jsx)("h5",{children:"Realtime"})]}),(0,n.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Listen to your PostgreSQL database in realtime via websockets."})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(D.$,{type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"/project/".concat(e,"/realtime/inspector"),children:"Explore Realtime"})}),(0,n.jsx)(D.$,{className:"translate-y-[1px]",icon:(0,n.jsx)(x.A,{}),type:"default",asChild:!0,children:(0,n.jsx)(d(),{href:"".concat(H.aq,"/guides/realtime"),target:"_blank",rel:"noreferrer",children:"About Realtime"})})]})]})})]})]})]})}),(0,n.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h2",{children:"Connecting to your new project"}),(0,n.jsxs)("p",{className:"text-base text-foreground-light lg:max-w-sm",children:["Interact with your database through the"," ",(0,n.jsx)(d(),{href:"".concat(H.aq,"/reference"),className:"text-brand","data-sentry-element":"Link","data-sentry-source-file":"NewProjectPanel.tsx",children:"Supabase client libraries"})," ","with your API keys."]}),(0,n.jsx)("p",{className:"text-base text-foreground-light lg:max-w-sm",children:"More information about your project's keys can be found in your project's API settings."})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(D.$,{asChild:!0,type:"default","data-sentry-element":"Button","data-sentry-source-file":"NewProjectPanel.tsx",children:(0,n.jsx)(d(),{href:"/project/".concat(e,"/settings/api"),"data-sentry-element":"Link","data-sentry-source-file":"NewProjectPanel.tsx",children:"View API settings"})}),(0,n.jsx)(D.$,{asChild:!0,className:"translate-y-[1px]",type:"default",icon:(0,n.jsx)(x.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"NewProjectPanel.tsx",children:(0,n.jsx)(d(),{href:"".concat(H.aq,"/guides/database/api"),target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"NewProjectPanel.tsx",children:"About APIs"})})]})]})}),(0,n.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,n.jsx)($,{"data-sentry-element":"APIKeys","data-sentry-source-file":"NewProjectPanel.tsx"})})]})};var et=a(59120),ea=a(57125),es=a(56947),er=a(24523),en=a(81121);async function el(e,t){let{projectRef:a}=e;if(!a)throw Error("projectRef is required");let{data:s,error:r}=await (0,er.Jt)("/platform/projects/{ref}/analytics/endpoints/usage.api-requests-count",{params:{path:{ref:a}},signal:t});return r&&(0,er.H4)(r),s}let ei=function(e){let{projectRef:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,es.I)({queryKey:en.P.usageApiRequestsCount(t),queryFn:e=>{let{signal:a}=e;return el({projectRef:t},a)},enabled:a&&void 0!==t,...s})};async function eo(e,t){let{projectRef:a,interval:s}=e;if(!a)throw Error("projectRef is required");if(!s)throw Error("interval is required");let{data:r,error:n}=await (0,er.Jt)("/platform/projects/{ref}/analytics/endpoints/usage.api-counts",{params:{path:{ref:a},query:{interval:s}},signal:t});return n&&(0,er.H4)(n),r}let ec=function(e){let{projectRef:t,interval:a}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,es.I)({queryKey:en.P.usageApiCounts(t,a),queryFn:e=>{let{signal:s}=e;return eo({projectRef:t,interval:a},s)},enabled:s&&void 0!==t&&void 0!==a,...r})};var ed=a(9620),eu=a(27503),em=a.n(eu),ex=a(76174),eh=a(80814),ep=a(96459),ef=a(10723),eg=a(80038),ey=a(71492),ej=a(84512),ev=a(21162),eb=a(30404),eN=a(18985);let ew={free:1,pro:7,team:28,enterprise:90},e_=[{key:"1hr",label:"Last 60 minutes",startValue:1,startUnit:"hour",format:"MMM D, h:mma",availableIn:["free","pro","team","enterprise"]},{key:"1day",label:"Last 24 hours",startValue:24,startUnit:"hour",format:"MMM D, ha",availableIn:["free","pro","team","enterprise"]},{key:"7day",label:"Last 7 days",startValue:7,startUnit:"day",format:"MMM D",availableIn:["pro","team","enterprise"]}],ek=()=>{let e=(0,eh.useRouter)(),{ref:t}=(0,l.g)(),{data:a}=(0,ej.s)(),{projectAuthAll:s,projectStorageAll:r}=(0,M.x)(["project_auth:all","project_storage:all"]),{plan:i}=(0,ey.c)(),c=(null==i?void 0:i.id)==="free"?"1hr":"1day",[d,m]=(0,u.useState)(c),{data:x,isLoading:h}=ec({projectRef:t,interval:d}),p=e_.find(e=>e.key===d)||e_[1],f=o()().subtract(p.startValue,p.startUnit),g=o()(),{data:y}=(0,eg.m)((null==x?void 0:x.result)||[],"timestamp",["total_auth_requests","total_rest_requests","total_storage_requests","total_realtime_requests"],0,f.toISOString(),g.toISOString(),5),j=p.format||"MMM D, ha",v=(a,s)=>{let r=p.startUnit,n=o()(null==a?void 0:a.timestamp),l=n.add(1,r);if("rest"===s)return void e.push("/project/".concat(t,"/logs/edge-logs?its=").concat(n.toISOString(),"&ite=").concat(l.toISOString()));e.push("/project/".concat(t,"/logs/edge-logs?its=").concat(n.toISOString(),"&ite=").concat(l.toISOString(),"&f=").concat(JSON.stringify({product:{[s]:!0}})))};return(0,n.jsxs)("div",{className:"space-y-6","data-sentry-component":"ProjectUsage","data-sentry-source-file":"ProjectUsage.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,n.jsxs)(ev.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"ProjectUsage.tsx",children:[(0,n.jsx)(ev.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsx)(D.$,{type:"default",iconRight:(0,n.jsx)(ex.A,{size:14}),"data-sentry-element":"Button","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsx)("span",{children:p.label})})}),(0,n.jsx)(ev.SQ,{side:"bottom",align:"start",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsx)(ev.Hr,{value:d,onValueChange:e=>m(e),"data-sentry-element":"DropdownMenuRadioGroup","data-sentry-source-file":"ProjectUsage.tsx",children:e_.map(e=>{var t,s;if(null==(t=e.availableIn)?void 0:t.includes((null==i?void 0:i.id)||"free"))return(0,n.jsx)(ev.Ht,{value:e.key,children:e.label},e.key);{let t=ew[null!=(s=null==i?void 0:i.id)?s:"free"];return(0,n.jsxs)(eb.m_,{children:[(0,n.jsx)(eb.k$,{asChild:!0,children:(0,n.jsx)(ev.Ht,{disabled:!0,value:e.key,className:"!pointer-events-auto",children:e.label})}),(0,n.jsxs)(eb.ZI,{side:"right",children:[(0,n.jsxs)("p",{children:[null==i?void 0:i.name," plan only includes up to ",t," day",t>1?"s":""," of log retention"]}),(0,n.jsxs)("p",{className:"text-foreground-light",children:[(0,n.jsx)(ef.g,{className:"text-foreground-light hover:text-foreground",href:"/org/".concat(null==a?void 0:a.slug,"/billing?panel=subscriptionPlan"),children:"Upgrade your plan"})," ","to increase log retention and view statistics for the"," ",e.label.toLowerCase()]})]})]},e.key)}})})})]}),(0,n.jsxs)("span",{className:"text-xs text-foreground-light",children:["Statistics for ",p.label.toLowerCase()]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-4 @2xl:grid-cols-4",children:[(0,n.jsx)(P.A,{className:"mb-0","data-sentry-element":"Panel","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsxs)(P.A.Content,{className:"space-y-4","data-sentry-element":"Panel.Content","data-sentry-source-file":"ProjectUsage.tsx",children:[(0,n.jsx)(eA,{icon:(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.Wm,{strokeWidth:1.5,size:16})}),title:"Database",href:"/project/".concat(t,"/editor"),"data-sentry-element":"PanelHeader","data-sentry-source-file":"ProjectUsage.tsx"}),(0,n.jsx)(eN.A,{active:h,"data-sentry-element":"Loading","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsx)(ep.A,{title:"REST Requests",data:y,xAxisKey:"timestamp",yAxisKey:"total_rest_requests",onBarClick:e=>v(e,"rest"),customDateFormat:j,highlightedValue:em()(y,"total_rest_requests"),"data-sentry-element":"BarChart","data-sentry-source-file":"ProjectUsage.tsx"})})]})}),s&&(0,n.jsx)(P.A,{className:"mb-0 md:mb-0",children:(0,n.jsxs)(P.A.Content,{className:"space-y-4",children:[(0,n.jsx)(eA,{icon:(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.Nj,{strokeWidth:1.5,size:16})}),title:"Auth",href:"/project/".concat(t,"/auth/users")}),(0,n.jsx)(eN.A,{active:h,children:(0,n.jsx)(ep.A,{title:"Auth Requests",data:y,xAxisKey:"timestamp",yAxisKey:"total_auth_requests",onBarClick:e=>v(e,"auth"),customDateFormat:j,highlightedValue:em()(y||[],"total_auth_requests")})})]})}),r&&(0,n.jsx)(P.A,{className:"mb-0 md:mb-0",children:(0,n.jsxs)(P.A.Content,{className:"space-y-4",children:[(0,n.jsx)(eA,{icon:(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.wc,{strokeWidth:1.5,size:16})}),title:"Storage",href:"/project/".concat(t,"/storage/buckets")}),(0,n.jsx)(eN.A,{active:h,children:(0,n.jsx)(ep.A,{title:"Storage Requests",data:y,xAxisKey:"timestamp",yAxisKey:"total_storage_requests",onBarClick:e=>v(e,"storage"),customDateFormat:j,highlightedValue:em()(y,"total_storage_requests")})})]})}),(0,n.jsx)(P.A,{className:"mb-0 md:mb-0","data-sentry-element":"Panel","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsxs)(P.A.Content,{className:"space-y-4","data-sentry-element":"Panel.Content","data-sentry-source-file":"ProjectUsage.tsx",children:[(0,n.jsx)(eA,{icon:(0,n.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,n.jsx)(U.Se,{strokeWidth:1.5,size:16})}),title:"Realtime","data-sentry-element":"PanelHeader","data-sentry-source-file":"ProjectUsage.tsx"}),(0,n.jsx)(eN.A,{active:h,"data-sentry-element":"Loading","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsx)(ep.A,{title:"Realtime Requests",data:y,xAxisKey:"timestamp",yAxisKey:"total_realtime_requests",onBarClick:e=>v(e,"realtime"),customDateFormat:j,highlightedValue:em()(y,"total_realtime_requests"),"data-sentry-element":"BarChart","data-sentry-source-file":"ProjectUsage.tsx"})})]})})]})]})},eA=e=>{let t=(null==e?void 0:e.href)?d():"div";return(0,n.jsx)(t,{href:e.href,"data-sentry-element":"Tag","data-sentry-component":"PanelHeader","data-sentry-source-file":"ProjectUsage.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3 opacity-80 transition "+(e.href?"cursor-pointer hover:text-gray-1200 hover:opacity-100":""),children:[(0,n.jsx)("div",{children:e.icon}),(0,n.jsx)("span",{className:"flex items-center space-x-1",children:(0,n.jsx)("h4",{className:"mb-0 text-lg",children:e.title})})]})})},eS=()=>{let{data:e}=(0,ed.YA)(),{error:t,isLoading:a}=ei({projectRef:null==e?void 0:e.ref}),{isLoading:s}=ec({projectRef:null==e?void 0:e.ref,interval:"1hr"});return a||s?(0,n.jsx)(et.g,{}):t?(0,n.jsx)(ea.A,{hideCollapse:!0,defaultVisibility:!0,icon:(0,n.jsx)(W.A,{size:18,strokeWidth:2}),title:"There was an issue loading the usage details of your project"}):(0,n.jsx)(ek,{"data-sentry-element":"ProjectUsage","data-sentry-component":"ProjectUsageSection","data-sentry-source-file":"ProjectUsageSection.tsx"})};var eC=a(73886),eI=a(60656),eE=a(61785),eR=a(76196),eL=a(61548),eP=a(95140);let eT={serviceStatus:e=>["projects",e,"service-status"],edgeFunctions:e=>["projects",e,"service-status","edge-functions"]};async function eM(e){try{let t=await fetch("https://obuldanrptloktxcffvn.supabase.co/functions/v1/health-check",{method:"GET",signal:e});return await t.json()}catch(e){return{healthy:!1}}}let eU=function(e){let{projectRef:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,es.I)({queryKey:eT.edgeFunctions(t),queryFn:e=>{let{signal:t}=e;return eM(t)},enabled:a&&void 0!==t,...s})};async function eH(e,t){let{projectRef:a}=e;if(!a)throw Error("projectRef is required");let{data:s,error:r}=await (0,er.Jt)("/v1/projects/{ref}/health",{params:{path:{ref:a},query:{services:["auth","realtime","rest","storage","db"]}},signal:t});return r&&(0,er.H4)(r),s}let eD=function(e){let{projectRef:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,es.I)({queryKey:eT.serviceStatus(t),queryFn:e=>{let{signal:a}=e;return eH({projectRef:t},a)},enabled:a&&void 0!==t,...s})};var eq=a(60793);let ez=e=>{let{status:t,isLoading:a,isHealthy:s,isProjectNew:r}=e;return s?"Healthy":a?"Checking status":"UNHEALTHY"===t?"Unhealthy":"COMING_UP"===t?"Coming up...":"ACTIVE_HEALTHY"===t?"Healthy":r?"Coming up...":t||"Unable to connect"},eW={size:18,strokeWidth:1.5},eF=()=>(0,n.jsx)(eC.A,{...eW,className:"animate-spin","data-sentry-element":"Loader2","data-sentry-component":"LoaderIcon","data-sentry-source-file":"ServiceStatus.tsx"}),eG=()=>(0,n.jsx)(eI.A,{...eW,"data-sentry-element":"AlertTriangle","data-sentry-component":"AlertIcon","data-sentry-source-file":"ServiceStatus.tsx"}),eO=()=>(0,n.jsx)(eE.A,{...eW,className:"text-brand","data-sentry-element":"CheckCircle2","data-sentry-component":"CheckIcon","data-sentry-source-file":"ServiceStatus.tsx"}),eB=e=>{let{isLoading:t,isHealthy:a,isProjectNew:s,projectStatus:r}=e;return a?(0,n.jsx)(eO,{}):t?(0,n.jsx)(eF,{}):"UNHEALTHY"===r?(0,n.jsx)(eG,{}):"COMING_UP"===r?(0,n.jsx)(eF,{}):"ACTIVE_HEALTHY"===r?(0,n.jsx)(eO,{}):s?(0,n.jsx)(eF,{}):(0,n.jsx)(eG,{"data-sentry-element":"AlertIcon","data-sentry-component":"StatusIcon","data-sentry-source-file":"ServiceStatus.tsx"})},eY=()=>{var e,t,a,s,r;let{ref:i}=(0,l.g)(),{data:c}=(0,ed.YA)(),[m,x]=(0,u.useState)(!1),{projectAuthAll:h,projectEdgeFunctionAll:p,realtimeAll:f,projectStorageAll:g}=(0,M.x)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),y=(null==c?void 0:c.parentRef)!==(null==c?void 0:c.ref),{data:j,isLoading:v}=(0,eP.A)({projectRef:y?null==c?void 0:c.parentRef:void 0},{enabled:y,refetchInterval:e=>{if(!e)return!1;let t=e.find(e=>e.project_ref===i);return!["FUNCTIONS_DEPLOYED","MIGRATIONS_FAILED","FUNCTIONS_FAILED"].includes((null==t?void 0:t.status)||"")&&5e3}}),b=y?null==j?void 0:j.find(e=>e.project_ref===i):void 0,{data:N,isLoading:w,refetch:_}=eD({projectRef:i},{refetchInterval:e=>null!=e&&!!e.some(e=>!e.healthy)&&5e3}),{data:k,refetch:A}=eU({projectRef:i},{refetchInterval:e=>(null==e||!e.healthy)&&5e3}),S=null==N?void 0:N.find(e=>"auth"===e.name),C=null==N?void 0:N.find(e=>"rest"===e.name),I=null==N?void 0:N.find(e=>"realtime"===e.name),E=null==N?void 0:N.find(e=>"storage"===e.name),R=null==N?void 0:N.find(e=>"db"===e.name),L=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:w,isHealthy:!!(null==R?void 0:R.healthy),status:null!=(e=null==R?void 0:R.status)?e:"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:null==C?void 0:C.error,docsUrl:void 0,isLoading:w,isHealthy:!!(null==C?void 0:C.healthy),status:null!=(t=null==C?void 0:C.status)?t:"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...h?[{name:"Auth",error:null==S?void 0:S.error,docsUrl:void 0,isLoading:w,isHealthy:!!(null==S?void 0:S.healthy),status:null!=(a=null==S?void 0:S.status)?a:"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...f?[{name:"Realtime",error:null==I?void 0:I.error,docsUrl:void 0,isLoading:w,isHealthy:!!(null==I?void 0:I.healthy),status:null!=(s=null==I?void 0:I.status)?s:"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...g?[{name:"Storage",error:null==E?void 0:E.error,docsUrl:void 0,isLoading:w,isHealthy:!!(null==E?void 0:E.healthy),status:null!=(r=null==E?void 0:E.status)?r:"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...p?[{name:"Edge Functions",error:void 0,docsUrl:"".concat(H.aq,"/guides/functions/troubleshooting"),isLoading:w,isHealthy:!!(null==k?void 0:k.healthy),status:(null==k?void 0:k.healthy)?"ACTIVE_HEALTHY":w?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...y?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:v,isHealthy:(null==b?void 0:b.status)==="FUNCTIONS_DEPLOYED",status:(null==b?void 0:b.status)==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":(null==b?void 0:b.status)==="FUNCTIONS_FAILED"||(null==b?void 0:b.status)==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP",logsUrl:"/branches"}]:[]],P=v||(null==b?void 0:b.status)==="CREATING_PROJECT"||(null==b?void 0:b.status)==="RUNNING_MIGRATIONS",T=L.some(e=>e.isLoading),U=L.every(e=>e.isHealthy),q=5>o().utc().diff(o().utc(null==c?void 0:c.inserted_at),"minute")||(null==c?void 0:c.status)==="COMING_UP";return(0,u.useEffect)(()=>{let e;return q&&(e=setTimeout(()=>{_(),A()},1e3*(300-o().utc().diff(o().utc(null==c?void 0:c.inserted_at),"seconds")))),()=>{clearTimeout(e)}},[q]),(0,n.jsxs)(eL.AM,{modal:!1,open:m,onOpenChange:x,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"ServiceStatus","data-sentry-source-file":"ServiceStatus.tsx",children:[(0,n.jsx)(eL.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"ServiceStatus.tsx",children:(0,n.jsxs)(D.$,{type:"default",icon:T||!U&&q&&P?(0,n.jsx)(eF,{}):(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(U?"bg-brand":"bg-warning")}),"data-sentry-element":"Button","data-sentry-source-file":"ServiceStatus.tsx",children:[y?"Branch":"Project"," Status"]})}),(0,n.jsxs)(eL.hl,{portal:!0,className:"p-0 w-56",side:"bottom",align:"center","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"ServiceStatus.tsx",children:[L.map(e=>(0,n.jsxs)(d(),{href:"/project/".concat(i).concat(e.logsUrl),className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,n.jsxs)("div",{className:"flex gap-x-2",children:[(0,n.jsx)(eB,{isLoading:e.isLoading,isHealthy:!!e.isHealthy,isProjectNew:q,projectStatus:e.status}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{children:e.name}),(0,n.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,n.jsx)(ez,{isLoading:e.isLoading,isHealthy:!!e.isHealthy,isProjectNew:q,status:e.status})})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,n.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,n.jsx)(eR.A,{size:14,className:"text-foreground"})]})]},e.name)),U?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eL.zT,{}),(0,n.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,n.jsx)("div",{className:"mt-0.5",children:(0,n.jsx)(eq.mo,{})}),"Recently restored projects can take up to 5 minutes to become fully operational."]})]})]})]})};var eK=a(42378),eV=a(89329),e$=a(68152),eJ=a(27695),eQ=a(62747),eX=a(88845);let eZ=()=>{var e;let{ref:t}=(0,l.g)(),{data:a}=(0,eQ.o)({projectRef:t},{enabled:H.pe}),{status:s,initiated_at:r,latest_status_at:i,error:c}=null!=(e=null==a?void 0:a.databaseUpgradeStatus)?e:{},d="supabase-upgrade-".concat(t,"-").concat(r),[m,x]=(0,u.useState)(!1);(0,u.useEffect)(()=>{var e;x((null==(e=localStorage)?void 0:e.getItem(d))==="true")},[d]);let h=s===z.cS.Failed,p=o().utc(null!=r?r:0).tz(o().tz.guess()).format("DD MMM YYYY HH:mm:ss"),f="Upgrade information:%0A Initiated at: ".concat(r,"%0A Error: ").concat(c),g=encodeURIComponent(o().utc(null!=r?r:0).format("YYYY-MM-DDTHH:mm:ss")),y=encodeURIComponent(o().utc(null!=i?i:0).utcOffset(0).format("YYYY-MM-DDTHH:mm:ss")),j="its=".concat(g,"&ite=").concat(y);return!h||m?null:(0,n.jsx)("div",{className:"max-w-7xl","data-sentry-component":"ProjectUpgradeFailedBanner","data-sentry-source-file":"ProjectUpgradeFailedBanner.tsx",children:(0,n.jsxs)(eX.F,{withIcon:!0,variant:"warning",title:"Postgres version upgrade was not successful (Initiated at ".concat(p,")"),actions:(0,n.jsxs)("div",{className:"flex items-center h-full space-x-4",children:[(0,n.jsx)(D.$,{asChild:!0,type:"default",children:(0,n.jsx)(eJ.Y,{queryParams:{category:q.S.DATABASE_UNRESPONSIVE,projectRef:t,subject:"Upgrade%20failed%20for%20project",message:f},children:"Contact support"})}),(0,n.jsx)(D.$,{type:"text",className:"px-1",icon:(0,n.jsx)(e$.A,{size:16,strokeWidth:1.5}),onClick:()=>void(x(!0),localStorage.setItem(d,"true"))})]}),"data-sentry-element":"Alert","data-sentry-source-file":"ProjectUpgradeFailedBanner.tsx",children:[(0,n.jsx)("div",{children:"Your project and its data are not affected. Please reach out to us via our support form for assistance with the upgrade."}),(0,n.jsxs)("div",{children:["You may also view logs related to the failed upgrade in your"," ",(0,n.jsx)(ef.g,{href:"/project/".concat(t,"/logs/pg-upgrade-logs?").concat(j),"data-sentry-element":"InlineLink","data-sentry-source-file":"ProjectUpgradeFailedBanner.tsx",children:"project's logs"}),"."]})]})})};var e0=a(39406),e1=a(37115),e2=a(63351),e5=a(49810),e6=a(14988),e3=a(39148),e4=a(21650);let e8=()=>{var e,t,a,s;let{data:r}=(0,ed.YA)(),{data:i}=(0,ej.s)(),{data:c}=(0,e1.wT)({ref:null==r?void 0:r.parent_project_ref}),m=(0,ed.W0)(),x=(0,e3.qM)(),{ref:h,enableBranching:p}=(0,l.g)(),{projectHomepageExampleProjects:f,projectHomepageClientLibraries:g}=(0,e6.g)(["project_homepage:example_projects","project_homepage:client_libraries"]),{projectHomepageShowInstanceSize:y,projectHomepageShowExamples:j}=(0,M.x)(["project_homepage:show_instance_size","project_homepage:show_examples"]),v=(0,u.useRef)(!1),b=(null==r?void 0:r.status)===H.BU.INACTIVE,N=o()(null==r?void 0:r.inserted_at).isAfter(o()().subtract(2,"day"));(0,u.useEffect)(()=>{p&&!v.current&&(v.current=!0,x.setShowCreateBranchModal(!0))},[p]);let{data:w,isLoading:_}=(0,e5.LW)({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString,schema:"public"}),{data:k,isLoading:S}=(0,e0._)({projectRef:null==r?void 0:r.ref}),{data:P,isLoading:T}=(0,e2.Vh)({projectRef:null==r?void 0:r.ref}),{data:U}=(0,eP.A)({projectRef:null!=(e=null==r?void 0:r.parent_project_ref)?e:null==r?void 0:r.ref}),D=null==U?void 0:U.find(e=>e.is_default),q=null==U?void 0:U.find(e=>e.project_ref===(null==r?void 0:r.ref)),z=(null==q?void 0:q.name)===(null==D?void 0:D.name),W="Welcome to your project";q&&!z?W=null==q?void 0:q.name:(null==r?void 0:r.name)&&(W=null==r?void 0:r.name);let F=Math.max(0,null!=(t=null==w?void 0:w.length)?t:0),G=Math.max(0,null!=(a=null==k?void 0:k.length)?a:0),O=Math.max(0,(null!=(s=null==P?void 0:P.length)?s:1)-1);return b?(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)(eK.F,{})}):(0,n.jsxs)("div",{className:"w-full px-4","data-sentry-component":"Home","data-sentry-source-file":"Home.tsx",children:[(0,n.jsx)("div",{className:(0,J.cn)("py-16 ",!b&&"border-b border-muted "),children:(0,n.jsxs)("div",{className:"mx-auto max-w-7xl flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-6 justify-between w-full",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-3 w-full",children:[(0,n.jsxs)("div",{children:[!z&&(0,n.jsx)(d(),{href:"/project/".concat(null==c?void 0:c.ref),className:"text-sm text-foreground-light",children:null==c?void 0:c.name}),(0,n.jsx)("h1",{className:"text-3xl",children:W})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2 mb-1",children:[m&&(0,n.jsxs)(eb.m_,{children:[(0,n.jsx)(eb.k$,{asChild:!0,children:(0,n.jsx)(e4.E,{variant:"warning",children:"OrioleDB"})}),(0,n.jsxs)(eb.ZI,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,n.jsx)(ef.g,{href:"".concat(H.aq,"/guides/database/orioledb"),children:"documentation"})," ","for all limitations."]})]}),y&&(0,n.jsx)(eV.K,{projectRef:null==r?void 0:r.ref,slug:null==i?void 0:i.slug,cloudProvider:null==r?void 0:r.cloud_provider,computeSize:null==r?void 0:r.infra_compute_size})]})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(null==r?void 0:r.status)===H.BU.ACTIVE_HEALTHY&&(0,n.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(d(),{href:"/project/".concat(h,"/editor"),className:"transition text-foreground-light hover:text-foreground text-sm",children:"Tables"}),_?(0,n.jsx)(C.A,{className:"w-full h-[32px] w-6 p-0"}):(0,n.jsx)("p",{className:"text-2xl tabular-nums",children:F})]}),H.pe&&(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(d(),{href:"/project/".concat(h,"/functions"),className:"transition text-foreground-light hover:text-foreground text-sm",children:"Functions"}),S?(0,n.jsx)(C.A,{className:"w-full h-[32px] w-6 p-0"}):(0,n.jsx)("p",{className:"text-2xl tabular-nums",children:G})]}),H.pe&&(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(d(),{href:"/project/".concat(h,"/settings/infrastructure"),className:"transition text-foreground-light hover:text-foreground text-sm",children:"Replicas"}),T?(0,n.jsx)(C.A,{className:"w-full h-[32px] w-6 p-0"}):(0,n.jsx)("p",{className:"text-2xl tabular-nums",children:O})]})]}),H.pe&&(null==r?void 0:r.status)===H.BU.ACTIVE_HEALTHY&&(0,n.jsx)("div",{className:"ml-6 border-l flex items-center w-[145px] justify-end",children:(0,n.jsx)(eY,{})})]})]}),(0,n.jsx)(eZ,{"data-sentry-element":"ProjectUpgradeFailedBanner","data-sentry-source-file":"Home.tsx"})]})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"py-16 border-b border-muted",children:(0,n.jsxs)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:[H.pe&&(null==r?void 0:r.status)!==H.BU.INACTIVE&&(0,n.jsx)(n.Fragment,{children:N?(0,n.jsx)(ee,{}):(0,n.jsx)(eS,{})}),!N&&(null==r?void 0:r.status)!==H.BU.INACTIVE&&(0,n.jsx)(I,{})]})}),(0,n.jsx)("div",{className:"bg-surface-100/5 py-16",children:(0,n.jsx)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:(null==r?void 0:r.status)!==H.BU.INACTIVE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)("h2",{className:"text-lg",children:"Client libraries"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-8 md:gap-12 mb-12 md:grid-cols-3",children:g.map(e=>(0,n.jsx)(E.Z,{...e},e.language))})]}),j&&(0,n.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,n.jsx)("h4",{className:"text-lg",children:"Example projects"}),f?(0,n.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:f.sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,n.jsx)(R.C,{...e},e.url))}):(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)(A.tU,{defaultValue:"app",className:"w-full",children:[(0,n.jsxs)(A.j7,{className:"flex gap-4 mb-8",children:[(0,n.jsx)(A.Xi,{value:"app",children:"App Frameworks"}),(0,n.jsx)(A.Xi,{value:"mobile",children:"Mobile Frameworks"})]}),(0,n.jsx)(A.av,{value:"app",children:(0,n.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:L.S.filter(e=>"app"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,n.jsx)(R.C,{...e},e.url))})}),(0,n.jsx)(A.av,{value:"mobile",children:(0,n.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:L.S.filter(e=>"mobile"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,n.jsx)(R.C,{...e},e.url))})})]})})]})]})})})]})]})};var e7=a(26779),e9=a(47625),te=a(90041);let tt=e=>{let{id:t,children:a}=e,{attributes:s,listeners:r,setNodeRef:l,transform:i,transition:o,isDragging:c}=(0,e9.gl)({id:t}),d={transform:i?"translate3d(".concat(Math.round(i.x),"px, ").concat(Math.round(i.y),"px, 0)"):void 0,transition:o};return(0,n.jsxs)("div",{ref:l,style:d,className:"relative will-change-transform","data-sentry-component":"SortableSection","data-sentry-source-file":"SortableSection.tsx",children:[(0,n.jsx)("button",{"aria-label":"Drag to reorder section",className:"absolute -left-6 top-2 text-foreground-muted hover:text-foreground focus:outline-none cursor-grab active:cursor-grabbing",...s,...r,children:(0,n.jsx)(te.A,{size:14,"data-sentry-element":"GripVertical","data-sentry-source-file":"SortableSection.tsx"})}),(0,n.jsx)("div",{className:(0,J.cn)(c&&"opacity-70"),children:a})]})};var ta=a(26218),ts=a(38985),tr=a(82282),tn=a(22559),tl=a(36261);let ti=e=>{let{icon:t,label:a,value:s,className:r,href:l,onClick:i,trackingProperties:o}=e,{mutate:c}=(0,tl.h)(),{data:u}=(0,ed.YA)(),{data:m}=(0,ej.s)(),x=(0,n.jsxs)("div",{className:"group flex items-center gap-4 p-0 text-base justify-start ".concat(r||""),children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-md bg-surface-75 group-hover:bg-muted border flex items-center justify-center",children:t}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-left heading-meta text-foreground-light",children:a}),(0,n.jsx)("div",{className:"text-foreground truncate h-[34px] flex items-center capitalize-sentence",children:s})]})]});return l?(0,n.jsx)(d(),{className:"group block",href:l,onClick:()=>{o&&(null==u?void 0:u.ref)&&(null==m?void 0:m.slug)&&c({action:"home_activity_stat_clicked",properties:o,groups:{project:u.ref,organization:m.slug}})},children:x}):i?(0,n.jsx)("button",{className:"group",onClick:i,children:x}):x};var to=a(86936),tc=a(18574),td=a(73640),tu=a(88044);let tm=e=>{let{status:t,isLoading:a,isHealthy:s,isProjectNew:r}=e;return s||"ACTIVE_HEALTHY"===t?"Healthy":a?"Checking status":"UNHEALTHY"===t?"Unhealthy":r||"COMING_UP"===t?"Coming up...":t||"Unable to connect"},tx={size:18,strokeWidth:1.5},th=()=>(0,n.jsx)(eC.A,{...tx,className:"animate-spin","data-sentry-element":"Loader2","data-sentry-component":"LoaderIcon","data-sentry-source-file":"ServiceStatus.tsx"}),tp=()=>(0,n.jsx)(eI.A,{...tx,"data-sentry-element":"AlertTriangle","data-sentry-component":"AlertIcon","data-sentry-source-file":"ServiceStatus.tsx"}),tf=()=>(0,n.jsx)(eE.A,{...tx,className:"text-brand","data-sentry-element":"CheckCircle2","data-sentry-component":"CheckIcon","data-sentry-source-file":"ServiceStatus.tsx"}),tg=e=>{let{isLoading:t,isHealthy:a,isProjectNew:s,projectStatus:r}=e;return a||"ACTIVE_HEALTHY"===r?(0,n.jsx)(tf,{}):t||s||"COMING_UP"===r?(0,n.jsx)(th,{}):(0,n.jsx)(tp,{"data-sentry-element":"AlertIcon","data-sentry-component":"StatusIcon","data-sentry-source-file":"ServiceStatus.tsx"})},ty=()=>{var e,t,a,s,r;let{ref:i}=(0,l.g)(),{data:o}=(0,ed.YA)(),{projectAuthAll:c,projectEdgeFunctionAll:u,realtimeAll:m,projectStorageAll:x}=(0,M.x)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),h=(null==o?void 0:o.parentRef)!==(null==o?void 0:o.ref),{data:p,isLoading:f}=(0,eP.A)({projectRef:h?null==o?void 0:o.parentRef:void 0},{enabled:h}),g=h?null==p?void 0:p.find(e=>e.project_ref===i):void 0,{data:y,isLoading:j}=eD({projectRef:i},{refetchInterval:e=>null!=e&&!!e.some(e=>!e.healthy)&&5e3}),{data:v}=eU({projectRef:i},{refetchInterval:e=>(null==e||!e.healthy)&&5e3}),b=null==y?void 0:y.find(e=>"auth"===e.name),N=null==y?void 0:y.find(e=>"rest"===e.name),w=null==y?void 0:y.find(e=>"realtime"===e.name),_=null==y?void 0:y.find(e=>"storage"===e.name),k=null==y?void 0:y.find(e=>"db"===e.name),A=(null==o?void 0:o.status)==="COMING_UP"||h&&(f||(null==g?void 0:g.status)==="CREATING_PROJECT"||(null==g?void 0:g.status)==="RUNNING_MIGRATIONS"),S=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:j,isHealthy:!!(null==k?void 0:k.healthy),status:null!=(e=null==k?void 0:k.status)?e:"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:null==N?void 0:N.error,docsUrl:void 0,isLoading:j,isHealthy:!!(null==N?void 0:N.healthy),status:null!=(t=null==N?void 0:N.status)?t:"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...c?[{name:"Auth",error:null==b?void 0:b.error,docsUrl:void 0,isLoading:j,isHealthy:!!(null==b?void 0:b.healthy),status:null!=(a=null==b?void 0:b.status)?a:"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...m?[{name:"Realtime",error:null==w?void 0:w.error,docsUrl:void 0,isLoading:j,isHealthy:!!(null==w?void 0:w.healthy),status:null!=(s=null==w?void 0:w.status)?s:"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...x?[{name:"Storage",error:null==_?void 0:_.error,docsUrl:void 0,isLoading:j,isHealthy:!!(null==_?void 0:_.healthy),status:null!=(r=null==_?void 0:_.status)?r:"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...u?[{name:"Edge Functions",error:void 0,docsUrl:"".concat(H.aq,"/guides/functions/troubleshooting"),isLoading:j,isHealthy:!!(null==v?void 0:v.healthy),status:(null==v?void 0:v.healthy)?"ACTIVE_HEALTHY":j?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...h?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:f,isHealthy:h?(null==g?void 0:g.status)==="FUNCTIONS_DEPLOYED":!A,status:h?(null==g?void 0:g.status)==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":(null==g?void 0:g.status)==="FUNCTIONS_FAILED"||(null==g?void 0:g.status)==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP":A?"COMING_UP":"ACTIVE_HEALTHY",logsUrl:h?"/branches":"/logs/database-logs"}]:[]],C=S.some(e=>e.isLoading),I=S.every(e=>e.isHealthy),E=(null==o?void 0:o.status)==="COMING_UP"||h&&((null==g?void 0:g.status)==="CREATING_PROJECT"||(null==g?void 0:g.status)==="RUNNING_MIGRATIONS"||A),R=S.some(e=>!e.isHealthy&&"COMING_UP"!==e.status),L=S.some(e=>"COMING_UP"===e.status),P=(null==o?void 0:o.status)==="COMING_UP";return(0,n.jsxs)(eL.AM,{"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"ServiceStatus","data-sentry-source-file":"ServiceStatus.tsx",children:[(0,n.jsx)(eL.Wv,{"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"ServiceStatus.tsx",children:(0,n.jsx)(ti,{icon:P?(0,n.jsx)(eC.A,{className:"animate-spin",size:18}):(0,n.jsx)("div",{className:"grid grid-cols-3 gap-1",children:S.map((e,t)=>(0,n.jsx)("div",{className:(0,J.cn)("w-1.5 h-1.5 rounded-full",e.isLoading||"COMING_UP"===e.status||E&&!e.isHealthy?"bg-foreground-lighter animate-pulse":e.isHealthy?"bg-brand":"bg-selection")},"".concat(e.name,"-").concat(t)))}),label:(0,n.jsx)("span",{children:"Status"}),value:(0,n.jsx)("span",{children:C?"Checking...":L?"Coming up...":R?"Unhealthy":"Healthy"}),"data-sentry-element":"SingleStat","data-sentry-source-file":"ServiceStatus.tsx"})}),(0,n.jsxs)(eL.hl,{portal:!0,className:"p-0 w-56",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"ServiceStatus.tsx",children:[S.map(e=>(0,n.jsxs)(d(),{href:"/project/".concat(i).concat(e.logsUrl),className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,n.jsxs)("div",{className:"flex gap-x-2",children:[(0,n.jsx)(tg,{isLoading:e.isLoading,isHealthy:!!e.isHealthy,isProjectNew:E,projectStatus:e.status}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{children:e.name}),(0,n.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,n.jsx)(tm,{isLoading:e.isLoading,isHealthy:!!e.isHealthy,isProjectNew:E,status:e.status})})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,n.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,n.jsx)(eR.A,{size:14,className:"text-foreground"})]})]},e.name)),I?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eL.zT,{}),(0,n.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,n.jsx)("div",{className:"mt-0.5",children:(0,n.jsx)(eq.mo,{})}),"Recently restored projects can take up to 5 minutes to become fully operational."]})]})]})]})},tj=()=>{var e,t,a,s,r,i;let{ref:c}=(0,l.g)(),{data:d}=(0,ed.YA)(),{data:m,isLoading:x}=(0,eP.A)({projectRef:null!=(t=null==d?void 0:d.parent_project_ref)?t:null==d?void 0:d.ref}),h=(null==d?void 0:d.parent_project_ref)===void 0,p=(0,u.useMemo)(()=>(null!=m?m:[]).find(e=>e.project_ref===c),[m,c]),f=(0,u.useMemo)(()=>{let e=(null!=m?m:[]).filter(e=>!e.is_default);if(0!==e.length)return e.slice().sort((e,t)=>{var a,s;return new Date(null!=(a=t.created_at)?a:t.updated_at).valueOf()-new Date(null!=(s=e.created_at)?s:e.updated_at).valueOf()})[0]},[m]),{data:g,isLoading:y}=(0,tc.pj)({projectRef:null==d?void 0:d.ref,connectionString:null==d?void 0:d.connectionString}),j=(0,u.useMemo)(()=>(null!=g?g:[])[0],[g]),{data:v,isLoading:b}=(0,to.h)({projectRef:null==d?void 0:d.ref}),N=(0,u.useMemo)(()=>{var e;let t=null!=(e=null==v?void 0:v.backups)?e:[];if(0!==t.length)return t.slice().sort((e,t)=>new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf())[0]},[v]);return(0,n.jsx)("div",{className:"@container","data-sentry-component":"ActivityStats","data-sentry-source-file":"ActivityStats.tsx",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-2 @md:gap-6 flex-wrap",children:[(0,n.jsx)(ty,{"data-sentry-element":"ServiceStatus","data-sentry-source-file":"ActivityStats.tsx"}),(0,n.jsx)(ti,{href:"/project/".concat(c,"/database/migrations"),icon:(0,n.jsx)(ts.A,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,n.jsx)("span",{children:"Last migration"}),trackingProperties:{stat_type:"migrations",stat_value:null!=(a=null==g?void 0:g.length)?a:0},value:y?(0,n.jsx)(td.E,{className:"h-6 w-24"}):j?(0,n.jsx)(tu.T,{className:"text-base",label:o()(j.version,"YYYYMMDDHHmmss").fromNow(),utcTimestamp:o()(j.version,"YYYYMMDDHHmmss").toISOString()}):(0,n.jsx)("p",{className:"text-foreground-lighter",children:"No migrations"}),"data-sentry-element":"SingleStat","data-sentry-source-file":"ActivityStats.tsx"}),(0,n.jsx)(ti,{href:"/project/".concat(c,"/database/backups/scheduled"),icon:(0,n.jsx)(tr.A,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,n.jsx)("span",{children:"Last backup"}),trackingProperties:{stat_type:"backups",stat_value:null!=(s=null==v||null==(e=v.backups)?void 0:e.length)?s:0},value:b?(0,n.jsx)(td.E,{className:"h-6 w-24"}):(null==v?void 0:v.pitr_enabled)?(0,n.jsx)("p",{children:"PITR enabled"}):N?(0,n.jsx)(tu.T,{className:"text-base",displayAs:"utc",label:o()(N.inserted_at).fromNow(),utcTimestamp:N.inserted_at}):(0,n.jsx)("p",{className:"text-foreground-lighter",children:"No backups"}),"data-sentry-element":"SingleStat","data-sentry-source-file":"ActivityStats.tsx"}),(0,n.jsx)(ti,{href:"/project/".concat(c,"/branches"),icon:(0,n.jsx)(tn.A,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,n.jsx)("span",{children:h?"Recent branch":"Branch Created"}),trackingProperties:{stat_type:"branches",stat_value:null!=(r=null==m?void 0:m.length)?r:0},value:x?(0,n.jsx)(td.E,{className:"h-6 w-24"}):h?(0,n.jsx)("p",{className:(0,J.cn)("truncate",!f&&"text-foreground-lighter truncate"),children:null!=(i=null==f?void 0:f.name)?i:"No branches"}):(null==p?void 0:p.created_at)?(0,n.jsx)(tu.T,{className:"text-base",label:o()(p.created_at).fromNow(),utcTimestamp:p.created_at}):(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Unknown"}),"data-sentry-element":"SingleStat","data-sentry-source-file":"ActivityStats.tsx"})]})})};var tv=a(9762);let tb=()=>{var e;let t=(0,ed.W0)(),{data:a}=(0,ed.YA)(),{data:s}=(0,ej.s)(),{data:r}=(0,e1.wT)({ref:null==a?void 0:a.parent_project_ref}),{data:l}=(0,eP.A)({projectRef:null!=(e=null==a?void 0:a.parent_project_ref)?e:null==a?void 0:a.ref}),i=null==l?void 0:l.find(e=>e.is_default),o=null==l?void 0:l.find(e=>e.project_ref===(null==a?void 0:a.ref)),c=(null==o?void 0:o.name)===(null==i?void 0:i.name),u=(null==a?void 0:a.status)===H.BU.INACTIVE,m=o&&!c?o.name:(null==a?void 0:a.name)?a.name:"Welcome to your project";return u?(0,n.jsx)(eK.F,{}):(0,n.jsxs)("div",{className:"flex flex-col gap-y-4","data-sentry-component":"TopSection","data-sentry-source-file":"TopSection.tsx",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 py-0 w-full items-center",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-4 w-full",children:[(0,n.jsxs)("div",{children:[!c&&(0,n.jsx)(d(),{href:"/project/".concat(null==r?void 0:r.ref),className:"text-sm text-foreground-light",children:null==r?void 0:r.name}),(0,n.jsx)("h1",{className:"text-3xl",children:m})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[t&&(0,n.jsxs)(eb.m_,{children:[(0,n.jsx)(eb.k$,{asChild:!0,children:(0,n.jsx)(e4.E,{variant:"warning",children:"OrioleDB"})}),(0,n.jsxs)(eb.ZI,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,n.jsx)(ef.g,{href:"".concat(H.aq,"/guides/database/orioledb"),children:"documentation"})," ","for all limitations."]})]}),(0,n.jsx)(eV.K,{projectRef:null==a?void 0:a.ref,slug:null==s?void 0:s.slug,cloudProvider:null==a?void 0:a.cloud_provider,computeSize:null==a?void 0:a.infra_compute_size,"data-sentry-element":"ComputeBadgeWrapper","data-sentry-source-file":"TopSection.tsx"})]})]}),(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(tj,{"data-sentry-element":"ActivityStats","data-sentry-source-file":"TopSection.tsx"})})]}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:(0,J.cn)("w-full h-[400px] md:h-[500px] border border-muted rounded-md overflow-hidden flex flex-col relative"),children:(0,n.jsx)(ta.Ln,{"data-sentry-element":"ReactFlowProvider","data-sentry-source-file":"TopSection.tsx",children:(0,n.jsx)(tv.q,{diagramOnly:!0,"data-sentry-element":"InstanceConfiguration","data-sentry-source-file":"TopSection.tsx"})})})})]}),(0,n.jsx)(eZ,{"data-sentry-element":"ProjectUpgradeFailedBanner","data-sentry-source-file":"TopSection.tsx"})]})};var tN=a(37873),tw=a(28202),t_=a(93713),tk=a(23019);let tA=(0,u.forwardRef)(function(e,t){let{columns:a,children:s,className:r,gap:l=16,showArrows:i=!0,scrollBehavior:o="smooth",...c}=e,d=(0,u.useRef)(null),m=(0,u.useMemo)(()=>Array.isArray(s)?s:[s],[s]),[x,h]=(0,u.useState)(0),p=(e=>{let[t,a]=(0,u.useState)(null);return(0,u.useLayoutEffect)(()=>{let t=e.current;if(!t)return;let s=t.getBoundingClientRect().width;if(a(e=>e===s?e:s),"undefined"!=typeof ResizeObserver){let e=0,s=new ResizeObserver(t=>{var s,r;let n=null!=(r=null==(s=t[0])?void 0:s.contentRect.width)?r:0;e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{a(e=>e===n?e:n)})});return s.observe(t),()=>{e&&cancelAnimationFrame(e),s.disconnect()}}{let e=()=>{let e=t.getBoundingClientRect().width;a(t=>t===e?t:e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[e]),t})(d),f=(0,u.useMemo)(()=>(e=>{if(!Array.isArray(a))return a;let[t,s,r]=a;return e>=1024?t:e>=768?s:r})(null!=p?p:0),[p,a]),g=e=>{let t=d.current;if(!t)return;let a=((null!=p?p:t.getBoundingClientRect().width)-(f-1)*l)/f+l;h(t=>{let s=Math.max(0,Math.min(v,t+e*a));return s===t?t:s})},y=()=>g(-1),j=()=>g(1),v=(0,u.useMemo)(()=>{if(null==p)return -1;let e=(p-(f-1)*l)/f;return Math.max(0,m.length*e+(m.length-1)*l-p)},[p,f,m.length,l]),b=x>0,N=x<v,w=m.length>f,_=(0,u.useRef)(0),k=(0,u.useRef)(0);return(0,u.useEffect)(()=>{h(e=>{let t=Math.min(e,v);return t===e?e:t})},[v]),(0,n.jsxs)("div",{ref:t,className:(0,J.cn)("relative w-full",r),...c,children:[i&&b&&(0,n.jsx)(D.$,{type:"default",onClick:y,className:"absolute w-8 h-8 left-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll left",children:(0,n.jsx)(tk.A,{className:"w-4 h-4"})}),i&&N&&w&&(0,n.jsx)(D.$,{type:"default",onClick:j,className:"absolute w-8 h-8 right-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll right",children:(0,n.jsx)(eR.A,{className:"w-4 h-4"})}),(0,n.jsx)("div",{ref:d,className:"w-full overflow-visible focus:outline-none",tabIndex:0,role:"region","aria-roledescription":"carousel","aria-label":"Horizontally scrollable content",style:{overscrollBehaviorX:"contain"},onWheel:e=>{if(0===e.deltaX)return;let t=2*Math.abs(e.deltaX)*(e.deltaX>0?1:-1);k.current+=t,_.current||(_.current=requestAnimationFrame(()=>{_.current=0;let e=k.current;k.current=0,h(t=>{let a=Math.max(0,Math.min(v,t+e));return a===t?t:a})}))},onKeyDown:e=>{"ArrowLeft"===e.key&&b?(e.preventDefault(),y()):"ArrowRight"===e.key&&N&&(e.preventDefault(),j())},children:(0,n.jsx)("div",{className:"flex items-stretch min-w-full transition-transform duration-300 ease-out",style:{gap:"".concat(l,"px"),"--column-width":"calc((100% - ".concat((f-1)*l,"px) / ").concat(f,")"),transform:"translateX(-".concat(x,"px)"),willChange:"transform"},children:m.map((e,t)=>(0,n.jsx)("div",{className:"flex-shrink-0",style:{width:"var(--column-width)"},children:e},t))})})]})});tA.displayName="Row";let tS=e=>{let{showEmptyState:t=!1}=e,{ref:a}=(0,l.g)(),{data:s,isLoading:r}=(0,j.b)({projectRef:a},{enabled:!t}),i=(0,N.xd)(),{mutate:o}=(0,tl.h)(),{data:c}=(0,ej.s)(),{openSidebar:d}=(0,w.rM)(),{setSelectedItem:x}=(0,b.lq)(),h=(0,u.useMemo)(()=>{var e;return null!=(e=null==s?void 0:s.filter(e=>e.level===p.R.ERROR))?e:[]},[s]),g=h.length,A=(0,u.useMemo)(()=>{if(0===g)return(0,n.jsx)("h2",{children:"Assistant found no issues"});let e=1===g?"issue":"issues",t=g.toString();return(0,n.jsxs)("h2",{children:["Assistant found ",t," ",e]})},[g]),S=(0,u.useCallback)(()=>{d(v.c.AI_ASSISTANT),a&&(null==c?void 0:c.slug)&&o({action:"home_advisor_ask_assistant_clicked",properties:{issues_count:g},groups:{project:a,organization:c.slug}})},[o,d,a,c,g]),I=(0,u.useCallback)(e=>{x(e.cache_key,"lint"),d(v.c.ADVISOR_PANEL),a&&(null==c?void 0:c.slug)&&o({action:"home_advisor_issue_card_clicked",properties:{issue_category:e.categories[0]||"UNKNOWN",issue_name:e.name,issues_count:g},groups:{project:a,organization:c.slug}})},[o,x,d,a,c,g]);return t?(0,n.jsx)(tC,{}):(0,n.jsxs)("div",{"data-sentry-component":"AdvisorSection","data-sentry-source-file":"AdvisorSection.tsx",children:[r?(0,n.jsx)(C.A,{className:"w-96 mb-6"}):(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[A,(0,n.jsx)(D.$,{type:"default",icon:(0,n.jsx)(_.M,{}),onClick:S,children:"Ask Assistant"})]}),r?(0,n.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,n.jsx)(C.A,{}),(0,n.jsx)(C.A,{className:"w-3/4"}),(0,n.jsx)(C.A,{className:"w-1/2"})]}):h.length>0?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(tA,{columns:[3,2,1],children:h.map(e=>(0,n.jsxs)(k.Zp,{className:"min-h-full flex flex-col items-stretch cursor-pointer h-64",onClick:()=>{I(e)},children:[(0,n.jsxs)(k.aR,{className:"border-b-0 shrink-0 flex flex-row gap-2 space-y-0 justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:["SECURITY"===e.categories[0]?(0,n.jsx)(m.A,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}):(0,n.jsx)(t_.A,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}),(0,n.jsx)(k.ZB,{className:"text-foreground-light",children:e.categories[0]})]}),(0,n.jsx)(y.G,{type:"text",className:"w-7 h-7",icon:(0,n.jsx)(_.M,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),d(v.c.AI_ASSISTANT),i.newChat({name:"Summarize lint",initialInput:(0,f.Gb)(e)}),a&&(null==c?void 0:c.slug)&&o({action:"home_advisor_fix_issue_clicked",properties:{issue_category:e.categories[0]||"UNKNOWN",issue_name:e.name},groups:{project:a,organization:c.slug}})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]}),(0,n.jsxs)(k.Wu,{className:"p-6 pt-16 flex flex-col justify-end flex-1 overflow-auto",children:[e.detail?e.detail.substring(0,100):e.title,e.detail&&e.detail.length>100&&"..."]})]},e.cache_key))})}):(0,n.jsx)(tC,{})]})};function tC(){return(0,n.jsx)(k.Zp,{className:"bg-transparent","data-sentry-element":"Card","data-sentry-component":"EmptyState","data-sentry-source-file":"AdvisorSection.tsx",children:(0,n.jsxs)(k.Wu,{className:"flex flex-col items-center justify-center gap-2 p-16","data-sentry-element":"CardContent","data-sentry-source-file":"AdvisorSection.tsx",children:[(0,n.jsx)(m.A,{size:20,strokeWidth:1.5,className:"text-foreground-muted","data-sentry-element":"Shield","data-sentry-source-file":"AdvisorSection.tsx"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light text-center",children:"No security or performance errors found"})]})})}var tI=a(81672),tE=a(90376),tR=a(73969),tL=a(56404),tP=a(67435),tT=a(20091),tM=a(29244),tU=a(97757);let tH=e=>{let{projectRef:t,trigger:a,side:s="bottom",align:r="end",className:l,autoFocus:i=!1,onSelect:o}=e,c=(0,eh.useRouter)(),m=(0,u.useRef)(null),[x,h]=(0,u.useState)(!1),[p,f]=(0,u.useState)(""),g=(0,tL.d7)(p,500),{data:y,isLoading:j,hasNextPage:v,fetchNextPage:b,isFetchingNextPage:N}=(0,tP.b)({projectRef:t,type:"sql",limit:tT.c3,name:0===p.length?p:g},{keepPreviousData:!0}),w=(0,u.useMemo)(()=>{var e;return null!=(e=null==y?void 0:y.pages.flatMap(e=>e.content))?e:[]},[null==y?void 0:y.pages]),[_,k]=(0,tL.BL)({root:m.current,threshold:0,rootMargin:"0px"});return(0,u.useEffect)(()=>{(null==k?void 0:k.isIntersecting)&&v&&!N&&!j&&b()},[null==k?void 0:k.isIntersecting,v,N,j,b]),(0,n.jsxs)(ev.rI,{open:x,onOpenChange:h,"data-sentry-element":"DropdownMenu","data-sentry-component":"SnippetDropdown","data-sentry-source-file":"SnippetDropdown.tsx",children:[(0,n.jsx)(ev.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"SnippetDropdown.tsx",children:a}),(0,n.jsx)(ev.SQ,{side:s,align:r,className:["w-80 p-0",l].filter(Boolean).join(" "),"data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"SnippetDropdown.tsx",children:(0,n.jsxs)(tM.uB,{shouldFilter:!1,"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"SnippetDropdown.tsx",children:[(0,n.jsx)(tM.G7,{showResetIcon:!0,autoFocus:i,placeholder:"Search snippets...",value:p,onValueChange:f,handleReset:()=>f(""),"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"SnippetDropdown.tsx"}),(0,n.jsxs)(tM.oI,{ref:m,"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"SnippetDropdown.tsx",children:[j?(0,n.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"Loading..."}):p.length>0&&0===w.length?(0,n.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"No snippets found"}):(0,n.jsx)(tM.L$,{children:(0,n.jsxs)(tU.FK,{className:w.length>7?"h-[210px]":"",children:[w.map(e=>(0,n.jsx)(tM.h_,{value:e.id,onSelect:()=>o({id:e.id,name:e.name}),children:e.name},e.id)),(0,n.jsx)("div",{ref:_,className:"h-1 -mt-1"}),v&&(0,n.jsx)("div",{className:"px-2 py-1",children:(0,n.jsx)(C.A,{className:"py-2"})})]})}),(0,n.jsx)("div",{className:"h-px bg-border-overlay -mx-1"}),(0,n.jsx)(tM.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"SnippetDropdown.tsx",children:(0,n.jsx)(tM.h_,{className:"cursor-pointer w-full",onSelect:()=>{h(!1),c.push("/project/".concat(t,"/sql/new"))},onClick:()=>h(!1),"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"SnippetDropdown.tsx",children:(0,n.jsxs)(d(),{href:"/project/".concat(t,"/sql/new"),onClick:()=>{h(!1)},className:"w-full flex items-center gap-2","data-sentry-element":"Link","data-sentry-source-file":"SnippetDropdown.tsx",children:[(0,n.jsx)(tE.A,{size:14,strokeWidth:1.5,"data-sentry-element":"Plus","data-sentry-source-file":"SnippetDropdown.tsx"}),(0,n.jsx)("p",{children:"Create a report block with SQL"})]})})})]})]})})]})};var tD=a(58356),tq=a(59615),tz=a(23402),tW=a(32144),tF=a(8579),tG=a(6436),tO=a(34983),tB=a(72341);function tY(){var e,t,a,s;let r=o()().subtract(7,"day").toISOString(),i=o()().toISOString(),{ref:c}=(0,l.g)(),{profile:d}=(0,tO.xc)(),m=(0,tB.RE)(),{data:x}=(0,ej.s)(),{mutate:h}=(0,tl.h)(),{invalidateInfraMonitoringQuery:p}=(()=>{let e=(0,tW.jE)();return{invalidateInfraMonitoringQuery:(t,a)=>{let{attribute:s,startDate:r,endDate:n,interval:l,databaseIdentifier:i}=a;e.invalidateQueries({queryKey:en.P.infraMonitoring(t,{attribute:s,startDate:r,endDate:n,interval:l,databaseIdentifier:i})})}}})(),{data:f}=(0,ed.YA)(),[g,j]=(0,u.useState)(!1),{data:v}=(0,tP.b)({projectRef:c,type:"report",name:"Home",limit:1},{keepPreviousData:!0}),b=null==v||null==(a=v.pages)||null==(t=a[0])||null==(e=t.content)?void 0:e[0],N=null==b?void 0:b.content,[w,_]=(0,u.useState)(N),[k,A]=(0,u.useState)(!1),{can:S}=(0,Y.Qp)(q.aG.CREATE,"user_content",{resource:{type:"report",owner_id:null==d?void 0:d.id},subject:{id:null==d?void 0:d.id}}),{can:C}=(0,Y.Qp)(q.aG.UPDATE,"user_content",{resource:{type:"report",visibility:null==b?void 0:b.visibility,owner_id:null==b?void 0:b.owner_id},subject:{id:null==d?void 0:d.id}}),{mutate:I}=(0,tF.v)(),E=(0,u.useCallback)(e=>{c&&b&&I({projectRef:c,payload:{...b,content:e}})},[b,c,I]),R=(0,e7.FR)((0,e7.MS)(e7.AN,{activationConstraint:{distance:8}})),L=(0,u.useCallback)(e=>e.map((e,t)=>({...e,x:t%2,y:Math.floor(t/2),w:1,h:1})),[]),P=(0,u.useCallback)(e=>{let{active:t,over:a}=e;if(!w||!t||!a||t.id===a.id)return;let s=w.layout.map(e=>String(e.id)),r=s.indexOf(String(t.id)),n=s.indexOf(String(a.id));if(-1===r||-1===n)return;let l=L((0,e9.be)(w.layout,r,n)),i={...w,layout:l};_(i),E(i)},[w,E,L]),T=(0,u.useCallback)(e=>{let t=new Set(e.map(e=>"".concat(e.y,"-").concat(e.x))),a=0;for(;;a++){let e=t.has("".concat(a,"-0")),s=t.has("".concat(a,"-1"));if(!e||!s)return{x:+!!e,y:a}}},[]),M=(0,u.useCallback)((e,t)=>({x:t.x,y:t.y,w:1,h:1,id:e.id,label:e.name,attribute:"snippet_".concat(e.id),provider:"daily-stats",chart_type:"bar",chartConfig:tz.W}),[]),U=(0,u.useCallback)(e=>{var t;if(null==w||null==(t=w.layout)?void 0:t.some(t=>String(t.id)===String(e.id)||String(t.attribute)==="snippet_".concat(e.id)))return void(0,tR.oR)("This block is already in your report");if(!w||!b){if(!c||!d)return;let t={schema_version:1,period_start:{time_period:"7d",date:""},period_end:{time_period:"today",date:""},interval:"1d",layout:[M(e,{x:0,y:0})]};_(t),I({projectRef:c,payload:{id:(0,tG.gZ)(),type:"report",name:"Home",description:"",visibility:"project",owner_id:d.id,content:t}}),c&&(null==x?void 0:x.slug)&&h({action:"home_custom_report_block_added",properties:{block_id:e.id,position:0},groups:{project:c,organization:x.slug}});return}let a=[...w.layout],{x:s,y:r}=T(a);a.push(M(e,{x:s,y:r}));let n={...w,layout:a};_(n),E(n),c&&(null==x?void 0:x.slug)&&h({action:"home_custom_report_block_added",properties:{block_id:e.id,position:a.length-1},groups:{project:c,organization:x.slug}})},[w,b,c,d,I,x,h,T,M,E]),H=e=>{let{metric:t}=e;if(!w)return;let a=w.layout.find(e=>e.attribute===t.key),s=w.layout.filter(e=>e.attribute!==t.key),r={...w,layout:s};_(r),E(r),c&&(null==x?void 0:x.slug)&&a&&h({action:"home_custom_report_block_removed",properties:{block_id:String(a.id)},groups:{project:c,organization:x.slug}})},z=(0,u.useCallback)(async e=>{var t;if(e.preventDefault(),A(!1),!c||!d||!f)return;let a=e.dataTransfer.getData("application/json");if(!a)return;let{label:s,sql:r,config:n}=JSON.parse(a);if(!s||!r)return;let l=tR.oR.loading("Creating new query: ".concat(s)),i=(0,tG.gZ)();I({projectRef:c,payload:(0,tq.fW)({id:i,name:s,sql:r,owner_id:d.id,project_id:f.id})}),tR.oR.success("Successfully created new query: ".concat(s),{id:l}),U({id:i,name:s}),h({action:"custom_report_assistant_sql_block_added",groups:{project:c,organization:null!=(t=null==x?void 0:x.slug)?t:"Unknown"}})},[c,d,f,I,U,h,x]),W=e=>{A(!0),e.preventDefault()},F=()=>{A(!1)},G=(0,u.useMemo)(()=>{var e;return null!=(e=null==w?void 0:w.layout)?e:[]},[w]);return(0,u.useEffect)(()=>{N&&_(N)},[N]),(0,n.jsxs)("div",{className:"space-y-6","data-sentry-component":"CustomReportSection","data-sentry-source-file":"CustomReportSection.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"heading-section",children:"Reports"}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[G.length>0&&(0,n.jsx)(y.G,{type:"default",icon:(0,n.jsx)(tI.A,{className:g?"animate-spin":""}),className:"w-7",disabled:g,tooltip:{content:{side:"bottom",text:"Refresh report"}},onClick:()=>{if(!c)return;j(!0);let e=null==w?void 0:w.layout.filter(e=>"infra-monitoring"===e.provider||"daily-stats"===e.provider);null==e||e.forEach(e=>{p(c,{attribute:e.attribute,startDate:r,endDate:i,interval:(null==w?void 0:w.interval)||"1d",databaseIdentifier:m.selectedDatabaseId})}),setTimeout(()=>j(!1),1e3)}}),C||S?(0,n.jsx)(tH,{projectRef:c,onSelect:U,trigger:(0,n.jsx)(D.$,{type:"default",icon:(0,n.jsx)(tE.A,{}),children:"Add block"}),side:"bottom",align:"end",autoFocus:!0}):null]})]}),(0,n.jsxs)("div",{className:"relative",children:[k&&(0,n.jsx)("div",{className:"absolute inset-0 rounded bg-brand/10 pointer-events-none z-10"}),0===G.length?(0,n.jsxs)("div",{className:"h-64 flex flex-col items-center justify-center rounded border-2 border-dashed p-16 transition-colors",onDrop:z,onDragOver:W,onDragLeave:F,children:[(0,n.jsx)("h4",{children:"Build a custom report"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light mb-4",children:"Keep track of your most important metrics"}),C||S?(0,n.jsx)(tH,{projectRef:c,onSelect:U,trigger:(0,n.jsx)(D.$,{type:"default",iconRight:(0,n.jsx)(tE.A,{size:14}),children:"Add your first block"}),side:"bottom",align:"center",autoFocus:!0}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"No charts set up yet in report"})]}):(0,n.jsx)(e7.Mp,{sensors:R,collisionDetection:e7.fp,onDragStart:()=>{},onDragEnd:P,children:(0,n.jsx)(e9.gB,{items:(null!=(s=null==w?void 0:w.layout)?s:[]).map(e=>String(e.id)),strategy:e9.kL,children:(0,n.jsx)(tA,{columns:[3,2,1],onDrop:z,onDragOver:W,onDragLeave:F,children:G.map(e=>{var t;return(0,n.jsx)(tK,{id:String(e.id),children:(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(tD.c,{item:e,startDate:r,endDate:i,interval:null!=(t=null==w?void 0:w.interval)?t:"1d",disableUpdate:!1,isRefreshing:g,onRemoveChart:H,onUpdateChart:t=>((e,t)=>{let{chart:a,chartConfig:s}=t;if(!w)return;let r=w.layout.find(t=>t.id===e);if(!r)return;let n={...r,...null!=a?a:{}};if(s){var l;n.chartConfig={...null!=(l=r.chartConfig)?l:{},...s}}let i=w.layout.map(t=>t.id===e?n:t),o={...w,layout:i};_(o),E(o)})(e.id,t)},e.id)})},e.id)})})})})]})]})}function tK(e){let{id:t,children:a}=e,{attributes:s,listeners:r,setNodeRef:l,transform:i,transition:o,isDragging:c}=(0,e9.gl)({id:t}),d={transform:i?"translate3d(".concat(Math.round(i.x),"px, ").concat(Math.round(i.y),"px, 0)"):void 0,transition:o};return(0,n.jsx)("div",{ref:l,style:d,className:c?"opacity-70 will-change-transform":"will-change-transform",...s,...null!=r?r:{},"data-sentry-component":"SortableReportBlock","data-sentry-source-file":"CustomReportSection.tsx",children:a})}var tV=a(53923),t$=a(64585),tJ=a(27311),tQ=a(73887),tX=a(71505),tZ=a(23892),t0=a(77200);let t1=e=>{let{value:t,onChange:a,items:s,className:r}=e,[l,i]=(0,u.useState)(!1),o=s.find(e=>e.key===t);return(0,n.jsxs)(eL.AM,{open:l,onOpenChange:i,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"FrameworkSelector","data-sentry-source-file":"FrameworkSelector.tsx",children:[(0,n.jsx)("div",{className:(0,J.cn)("flex",r),children:(0,n.jsx)(eL.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"FrameworkSelector.tsx",children:(0,n.jsx)(D.$,{size:"tiny",type:"default",className:"gap-0",iconRight:(0,n.jsx)(ex.A,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"FrameworkSelector.tsx",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(null==o?void 0:o.icon)?(0,n.jsx)(t0.s,{icon:o.icon}):(0,n.jsx)(tX.A,{size:12}),null==o?void 0:o.label]})})})}),(0,n.jsx)(eL.hl,{className:"p-0 max-w-48",side:"bottom",align:"start",portal:!0,onOpenAutoFocus:e=>e.preventDefault(),"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"FrameworkSelector.tsx",children:(0,n.jsxs)(tM.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"FrameworkSelector.tsx",children:[(0,n.jsx)(tM.G7,{placeholder:"Search...","data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"FrameworkSelector.tsx"}),(0,n.jsxs)(tM.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"FrameworkSelector.tsx",children:[(0,n.jsx)(tM.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"FrameworkSelector.tsx",children:"No results found."}),(0,n.jsx)(tM.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"FrameworkSelector.tsx",children:s.map(e=>(0,n.jsxs)(tM.h_,{value:e.key,onSelect:()=>{a(e.key),i(!1)},className:"flex gap-2 items-center",children:[e.icon?(0,n.jsx)(t0.s,{icon:e.icon}):(0,n.jsx)(tX.A,{size:12}),e.label,(0,n.jsx)(tZ.A,{size:15,className:(0,J.cn)("ml-auto",e.key===t?"opacity-100":"opacity-0")})]},e.key))})]})]})})]})};var t2=a(90652),t5=a.n(t2);function t6(e){var t,a,s;let{steps:r,onStepClick:l}=e,[i,o]=(0,u.useState)(null!=(a=null==(t=r[0])?void 0:t.key)?a:null);(0,u.useEffect)(()=>{if(0===r.length)return void o(null);if(!(i&&r.some(e=>e.key===i))){var e,t;o(null!=(t=null==(e=r[0])?void 0:e.key)?t:null)}},[r,i]);let c=null!=(s=r.find(e=>e.key===i))?s:r[0],m=c?r.findIndex(e=>e.key===c.key):-1,x=m>0?r[m-1]:null,h=m>-1&&m<r.length-1?r[m+1]:null;return c?(0,n.jsx)(k.Zp,{className:"overflow-hidden @container","data-sentry-element":"Card","data-sentry-component":"GettingStarted","data-sentry-source-file":"GettingStarted.tsx",children:(0,n.jsxs)("div",{className:"flex flex-col @2xl:flex-row",children:[(0,n.jsx)("aside",{className:"hidden border-r @2xl:block @2xl:w-[calc(1/3*100%-16px)]",children:(0,n.jsx)("ol",{children:r.map((e,t)=>{let a=e.key===c.key,s="complete"===e.status;return(0,n.jsx)("li",{className:"border-b last:border-b-0 truncate",children:(0,n.jsx)(D.$,{type:"text",onClick:()=>o(e.key),className:(0,J.cn)("pl-1 block justify-start w-full rounded-none h-auto text-left text-foreground-light",a&&"bg-muted text-foreground"),children:(0,n.jsxs)("div",{className:"flex items-center gap-3 text-sm w-full",children:[(0,n.jsx)("span",{className:(0,J.cn)("text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md"),children:s?(0,n.jsx)(tZ.A,{size:16,strokeWidth:1.5,className:"text-brand"}):t+1}),(0,n.jsx)("span",{className:(0,J.cn)("flex-1 block truncate",a?"text-foreground":"group-hover:text-foreground",s&&"line-through"),children:e.title}),(0,n.jsx)(eR.A,{size:16,strokeWidth:1.5,className:"text-foreground-lighter"})]})})},e.key)})})}),(0,n.jsxs)(k.Wu,{className:"flex flex-1 flex-col gap-0 p-0 overflow-y-auto border-b-0","data-sentry-element":"CardContent","data-sentry-source-file":"GettingStarted.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b px-2 py-2 @2xl:hidden",children:[(0,n.jsx)("span",{className:"text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md",children:m+1}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(D.$,{type:"outline",onClick:()=>{x&&o(x.key)},disabled:!x,className:"gap-2","aria-label":"Previous step","data-sentry-element":"Button","data-sentry-source-file":"GettingStarted.tsx",children:(0,n.jsx)(tk.A,{size:16,strokeWidth:1.5,"data-sentry-element":"ChevronLeft","data-sentry-source-file":"GettingStarted.tsx"})}),(0,n.jsx)(D.$,{type:"outline",onClick:()=>{h&&o(h.key)},disabled:!h,className:"gap-2","aria-label":"Next step","data-sentry-element":"Button","data-sentry-source-file":"GettingStarted.tsx",children:(0,n.jsx)(eR.A,{size:16,strokeWidth:1.5,"data-sentry-element":"ChevronRight","data-sentry-source-file":"GettingStarted.tsx"})})]})]}),(0,n.jsxs)("div",{className:"relative w-full flex-1 min-h-[100px] shrink-0 overflow-hidden",children:[c.image?(0,n.jsx)(t5(),{className:"w-full select-none invert dark:invert-0",src:c.image,fill:!0,objectFit:"cover",objectPosition:"top",alt:c.title}):(0,n.jsxs)("div",{className:"absolute top-0 left-0 right-0 overflow-hidden",children:[(0,n.jsx)("img",{src:"".concat(H.o2,"/img/reports/bg-grafana-dark.svg"),alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block user-select-none"}),(0,n.jsx)("img",{src:"".concat(H.o2,"/img/reports/bg-grafana-light.svg"),alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden user-select-none"})]}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-background-surface-100 to-transparent"})]}),(0,n.jsxs)("div",{className:"p-10",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-4 mb-1",children:[(0,n.jsx)("h3",{children:c.title}),(0,n.jsx)(e4.E,{variant:"complete"===c.status?"success":"default",className:"capitalize hidden @2xl:inline-flex","data-sentry-element":"Badge","data-sentry-source-file":"GettingStarted.tsx",children:c.status})]}),(0,n.jsx)("p",{className:"text-foreground-light max-w-prose mb-4",children:c.description}),(0,n.jsx)("div",{className:"mt-auto flex flex-wrap gap-2 pt-2",children:c.actions.map((e,t)=>{var a,s,r,i,o;if(e.component)return(0,n.jsx)("div",{children:e.component},"".concat(c.key,"-action-").concat(t));let u=(null==(r=e.label)?void 0:r.toLowerCase().includes("do it for me"))||(null==(i=e.label)?void 0:i.toLowerCase().includes("generate"))||(null==(o=e.label)?void 0:o.toLowerCase().includes("create policies for me"))?"ai_assist":e.href&&!e.href.startsWith("/project/")?"external_link":"primary";return e.href?(0,n.jsx)(D.$,{asChild:!0,type:null!=(a=e.variant)?a:"default",icon:e.icon,className:"text-foreground-light hover:text-foreground",children:(0,n.jsx)(d(),{href:e.href,onClick:()=>{l({stepIndex:m,stepTitle:c.title,actionType:u,wasCompleted:"complete"===c.status})},children:e.label})},"".concat(c.key,"-action-").concat(t)):(0,n.jsx)(D.$,{type:null!=(s=e.variant)?s:"default",icon:e.icon,onClick:()=>{var t;null==(t=e.onClick)||t.call(e),l({stepIndex:m,stepTitle:c.title,actionType:u,wasCompleted:"complete"===c.status})},className:"text-foreground-light hover:text-foreground",children:e.label},"".concat(c.key,"-action-").concat(t))})})]})]})]})}):null}var t3=a(31160),t4=a(29842),t8=a(23417);let t7=(0,a(86848).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var t9=a(95052);let ae=null!=(r=null==(s=tJ.i[0])?void 0:s.key)?r:"nextjs";var at=a(37631),aa=a(70452),as=a(62550),ar=a(22158);function an(e){let{value:t,onChange:a}=e,s=(0,eh.useRouter)(),{ref:r}=(0,l.g)(),{data:i}=(0,ed.YA)(),{data:o}=(0,ej.s)(),{mutate:c}=(0,tl.h)(),d=(0,N.xd)(),{openSidebar:x}=(0,w.rM)(),[h,p]=(0,u.useState)(ae),f="code"===t||"no-code"===t?t:null,[g,y]=(0,u.useState)(null),j=(()=>{let{data:e}=(0,ed.YA)(),{data:t}=(0,ej.s)(),a=null==e?void 0:e.ref,s=null==e?void 0:e.connectionString,r=(null==e?void 0:e.status)===H.BU.ACTIVE_HEALTHY,{data:n}=(0,e5.LW)({projectRef:a,connectionString:s,schema:"public"},{enabled:!!a&&r}),{data:l}=(0,e5.LW)({projectRef:a,connectionString:s,schema:"storage"},{enabled:!!a&&r}),{data:i}=(0,as.j)({projectRef:a,connectionString:s,schema:"public"},{enabled:!!a&&!!s&&r}),{data:o}=(0,at.op)({projectRef:a},{enabled:!!a&&r}),{data:c}=(0,aa.l)({projectRef:a,connectionString:s},{enabled:!!a&&!!s&&r}),{data:d}=(0,e0._)({projectRef:a},{enabled:!!a&&r}),{data:m}=(0,tP.b)({projectRef:a,type:"report",limit:1},{enabled:!!a&&r}),{data:x}=(0,tc.pj)({projectRef:a,connectionString:s},{enabled:!!a&&!!s&&r}),{data:h}=ec({projectRef:a,interval:"1day"},{enabled:!!a&&r}),{data:p}=(0,ar.O)({organizationId:null==t?void 0:t.id},{enabled:!!a&&!!(null==t?void 0:t.id)});return(0,u.useMemo)(()=>{var e,t,s,r,u,f,g,y,j,v,b;let N=(null!=(u=null==n?void 0:n.length)?u:0)>0,w=(null!=(f=null==x?void 0:x.length)?f:0)>0,_=(null!=n?n:[]).some(e=>{var t;return Number(null!=(t=null==e?void 0:e.live_rows_estimate)?t:0)>0}),k=(null!=(g=null==i?void 0:i.length)?g:0)>0;o&&o.DISABLE_SIGNUP,null==o||o.EXTERNAL_EMAIL_ENABLED;let A=!!c&&!c.is_estimate&&c.count>0,S=(null!=l?l:[]).some(e=>{var t;return"objects"===e.name&&Number(null!=(t=null==e?void 0:e.live_rows_estimate)?t:0)>0}),C=(null!=(y=null==d?void 0:d.length)?y:0)>0,I=(null!=(j=null==m||null==(s=m.pages)||null==(t=s[0])||null==(e=t.content)?void 0:e.length)?j:0)>0,E=null!=(v=null==p?void 0:p.some(e=>e.project.ref===a))&&v;return{hasTables:N,hasCliSetup:w,hasSampleData:_,hasRlsPolicies:k,hasAppConnected:null!=(b=null==h||null==(r=h.result)?void 0:r.some(e=>[e.total_auth_requests,e.total_storage_requests,e.total_rest_requests,e.total_realtime_requests].some(e=>(null!=e?e:0)>0)))&&b,hasFirstUser:A,hasStorageObjects:S,hasEdgeFunctions:C,hasReports:I,hasGitHubConnection:E}},[o,d,p,x,i,m,l,n,h,c,a])})(),b=(0,u.useCallback)((e,t)=>{x(v.c.AI_ASSISTANT),d.newChat({name:e,initialInput:t})},[d,x]),A=(0,u.useMemo)(()=>{let e,t,a=s.asPath.split("?")[0],r=tJ.i.find(e=>e.key===h);if(!r)return[{label:"Connect",href:"".concat(a,"?showConnect=true&connectTab=frameworks")}];if(r.children&&r.children.length>0){var n,l,i,o,c,d;if("nextjs"===r.key){let a=r.children.find(e=>"app"===e.key)||r.children[0];e=null==a?void 0:a.key,t=null==a||null==(l=a.children)||null==(n=l[0])?void 0:n.key}else e=null==(i=r.children[0])?void 0:i.key,t=null==(d=r.children[0])||null==(c=d.children)||null==(o=c[0])?void 0:o.key}let u=new URLSearchParams({showConnect:"true",connectTab:"frameworks",framework:r.key});return e&&u.set("using",e),t&&u.set("with",t),[{label:"Connect",href:"".concat(a,"?").concat(u.toString())}]},[s.asPath,h]),S=(0,u.useMemo)(()=>[{label:"Framework selector",component:(0,n.jsx)(t1,{value:h,onChange:p,items:tJ.i})},...A.map(e=>({label:"Connect",href:e.href,variant:"primary"}))],[A,h]),C=(0,u.useMemo)(()=>(e=>{let{ref:t,openAiChat:a,connectActions:s,statuses:r}=e,{hasTables:l,hasCliSetup:i,hasSampleData:o,hasRlsPolicies:c,hasAppConnected:d,hasFirstUser:u,hasStorageObjects:x,hasEdgeFunctions:h,hasReports:p,hasGitHubConnection:f}=r;return[{key:"install-cli",status:i?"complete":"incomplete",title:"Install the Supabase CLI",icon:(0,n.jsx)(t$.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To get started, install the Supabase CLIour command-line toolkit for managing projects locally, handling migrations, and seeding datausing the npm command below to add it to your workspace.",actions:[{label:"Install via npm",component:(0,n.jsx)(t9.N,{className:"w-full text-xs p-3 !bg",language:"bash",children:"npm install supabase --save-dev"})}]},{key:"design-db",status:l?"complete":"incomplete",title:"Design your database schema",icon:(0,n.jsx)(ts.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, create a schema file that defines the structure of your database, either following our declarative schema guide or asking the AI assistant to generate one for you.",actions:[{label:"Create schema file",href:"https://supabase.com/docs/guides/local-development/declarative-database-schemas",variant:"default"},{label:"Generate it",variant:"default",icon:(0,n.jsx)(_.M,{size:14}),onClick:()=>a("Design my database","Help me create a schema file for my database. We will be using Supabase declarative schemas which you can learn about by searching docs for declarative schema.")}]},{key:"add-data",status:o?"complete":"incomplete",title:"Seed your database with data",icon:(0,n.jsx)(t3.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now, create a seed file to populate your database with initial data, using the docs for guidance or letting the AI assistant draft realistic inserts.",actions:[{label:"Create a seed file",href:"https://supabase.com/docs/guides/local-development/seeding-your-database",variant:"default"},{label:"Generate data",variant:"default",icon:(0,n.jsx)(_.M,{size:14}),onClick:()=>a("Generate seed data","Generate SQL INSERT statements for realistic seed data that I can run via the Supabase CLI.")}]},{key:"add-rls-policies",status:c?"complete":"incomplete",title:"Secure your data with RLS policies",icon:(0,n.jsx)(m.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's secure your data by enabling Row Level Security (per-row access rules that decide who can read or write specific records) and defining policies in a migration file, either configuring them manually or letting the AI assistant draft policies for your tables.",actions:[{label:"Create a migration file",href:"/project/".concat(t,"/auth/policies"),variant:"default"},{label:"Create policies for me",variant:"default",icon:(0,n.jsx)(_.M,{size:14}),onClick:()=>a("Generate RLS policies","Generate RLS policies for my existing tables in the public schema and guide me through the process of adding them as migration files to my codebase ")}]},{key:"connect-app",status:d?"complete":"incomplete",title:"Connect your application",icon:(0,n.jsx)(t$.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; use the framework selector to preview starter code and launch the Connect flow with the client library you prefer.",actions:s},{key:"signup-first-user",status:u?"complete":"incomplete",title:"Sign up your first user",icon:(0,n.jsx)(t4.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication setup by creating the first user account, following the docs if you need a step-by-step walkthrough.",actions:[{label:"Read docs",href:"https://supabase.com/docs/guides/auth",variant:"default"}]},{key:"upload-file",status:x?"complete":"incomplete",title:"Upload a file",icon:(0,n.jsx)(t8.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Integrate file storage by creating a bucket via SQL and uploading a file using our client libraries.",actions:[{label:"Create a bucket via SQL",href:"https://supabase.com/docs/guides/storage/buckets/creating-buckets?queryGroups=language&language=sql",variant:"default"},{label:"Upload a file",href:"https://supabase.com/docs/guides/storage/uploads/standard-uploads",variant:"default"}]},{key:"create-edge-function",status:h?"complete":"incomplete",title:"Deploy an Edge Function",icon:(0,n.jsx)(t$.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Add server-side logic by creating and deploying your first Edge Functiona lightweight TypeScript or JavaScript function that runs close to your usersthen revisit the list to monitor and iterate on it.",actions:[{label:"Create and deploy via CLI",href:"https://supabase.com/docs/guides/functions/quickstart",variant:"default"},{label:"View functions",href:"/project/".concat(t,"/functions"),variant:"default"}]},{key:"monitor-progress",status:p?"complete":"incomplete",title:"Monitor your project's usage",icon:(0,n.jsx)(t7,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Track your project's activity by creating custom reports for API, database, and auth events right from the reports dashboard.",actions:[{label:"Reports",href:"/project/".concat(t,"/reports"),variant:"default"}]},{key:"connect-github",status:f?"complete":"incomplete",title:"Connect to GitHub",icon:(0,n.jsx)(tn.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Link this project to a GitHub repository to keep production in sync and spin up preview branches from pull requests.",actions:[{label:"Connect to GitHub",href:"/project/".concat(t,"/settings/integrations"),variant:"default"}]}]})({ref:r,openAiChat:b,connectActions:S,statuses:j}),[S,b,r,j]),I=(0,u.useMemo)(()=>(e=>{let{ref:t,openAiChat:a,connectActions:s,statuses:r}=e,{hasTables:l,hasSampleData:i,hasRlsPolicies:o,hasAppConnected:c,hasFirstUser:d,hasStorageObjects:u,hasEdgeFunctions:x,hasReports:h,hasGitHubConnection:p}=r;return[{key:"design-db",status:l?"complete":"incomplete",title:"Create your first table",icon:(0,n.jsx)(ts.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To kick off your new project, let's start by creating your very first database table using either the table editor or the AI assistant to shape the structure for you.",actions:[{label:"Create a table",href:"/project/".concat(t,"/editor"),variant:"default"},{label:"Do it for me",variant:"default",icon:(0,n.jsx)(_.M,{size:14}),onClick:()=>a("Design my database","I want to design my database schema. Please propose tables, relationships, and SQL to create them for my app. Ask clarifying questions if needed.")}]},{key:"add-data",status:i?"complete":"incomplete",title:"Add sample data",icon:(0,n.jsx)(t3.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, let's add some sample data that you can play with once you connect your app, either by inserting rows yourself or letting the AI assistant craft realistic examples.",actions:[{label:"Add data",href:"/project/".concat(t,"/editor"),variant:"default"},{label:"Do it for me",variant:"default",icon:(0,n.jsx)(_.M,{size:14}),onClick:()=>a("Generate sample data","Generate SQL INSERT statements to add realistic sample data to my existing tables. Use safe defaults and avoid overwriting data.")}]},{key:"add-rls-policies",status:o?"complete":"incomplete",title:"Secure your data with Row Level Security",icon:(0,n.jsx)(m.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now that you have some data, let's secure it by enabling Row Level Security (row-specific access rules that control who can view or modify records) and creating policies yourself or with help from the AI assistant.",actions:[{label:"Create a policy",href:"/project/".concat(t,"/auth/policies"),variant:"default"},{label:"Do it for me",variant:"default",icon:(0,n.jsx)(_.M,{size:14}),onClick:()=>a("Generate RLS policies","Generate RLS policies for my existing tables in the public schema. ")}]},{key:"connect-app",status:c?"complete":"incomplete",title:"Connect your application",icon:(0,n.jsx)(t$.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; use the framework selector to preview starter code and launch the Connect flow to wire up your app.",actions:s},{key:"signup-first-user",status:d?"complete":"incomplete",title:"Sign up your first user",icon:(0,n.jsx)(t4.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication by signing up your first user, referencing the docs if you need sample flows or troubleshooting tips.",actions:[{label:"Read docs",href:"https://supabase.com/docs/guides/auth",variant:"default"}]},{key:"upload-file",status:u?"complete":"incomplete",title:"Upload a file",icon:(0,n.jsx)(t8.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's add file storage to your app by creating a bucket and uploading your first file from the buckets dashboard.",actions:[{label:"Buckets",href:"/project/".concat(t,"/storage/buckets"),variant:"default"}]},{key:"create-edge-function",status:x?"complete":"incomplete",title:"Add server-side logic",icon:(0,n.jsx)(t$.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Extend your app's functionality by creating an Edge Functiona lightweight serverless function that executes close to your usersfor server-side logic directly from the functions page.",actions:[{label:"Create a function",href:"/project/".concat(t,"/functions/new"),variant:"default"}]},{key:"monitor-progress",status:h?"complete":"incomplete",title:"Monitor your project's health",icon:(0,n.jsx)(t7,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Keep an eye on your project's performance and usage by setting up custom reports from the reports dashboard.",actions:[{label:"Create a report",href:"/project/".concat(t,"/reports"),variant:"default"}]},{key:"connect-github",status:p?"complete":"incomplete",title:"Connect to GitHub",icon:(0,n.jsx)(tn.A,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Connect your project to GitHub to automatically create preview branches and sync production changes.",actions:[{label:"Connect to GitHub",href:"/project/".concat(t,"/settings/integrations"),variant:"default"}]}]})({ref:r,openAiChat:b,connectActions:S,statuses:j}),[S,b,r,j]),E="code"===f?C:"no-code"===f?I:[];return(0,n.jsxs)("section",{className:"w-full","data-sentry-component":"GettingStartedSection","data-sentry-source-file":"GettingStartedSection.tsx",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h3",{className:"heading-section",children:"Getting started"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(tQ.O,{type:"single",value:null!=f?f:void 0,onValueChange:e=>{e&&(y(f),a(e),c({action:"home_getting_started_workflow_clicked",properties:{workflow:"no-code"===e?"no_code":"code",is_switch:null!==g},groups:{project:(null==i?void 0:i.ref)||"",organization:(null==o?void 0:o.slug)||""}}))},"data-sentry-element":"ToggleGroup","data-sentry-source-file":"GettingStartedSection.tsx",children:[(0,n.jsxs)(tQ.d,{value:"no-code","aria-label":"No-code workflow",size:"sm",className:"text-xs gap-2 h-auto","data-sentry-element":"ToggleGroupItem","data-sentry-source-file":"GettingStartedSection.tsx",children:[(0,n.jsx)(tV.A,{size:16,strokeWidth:1.5,"data-sentry-element":"Table2","data-sentry-source-file":"GettingStartedSection.tsx"}),"No-code"]}),(0,n.jsxs)(tQ.d,{value:"code",size:"sm","aria-label":"Code workflow",className:"text-xs gap-2 h-auto","data-sentry-element":"ToggleGroupItem","data-sentry-source-file":"GettingStartedSection.tsx",children:[(0,n.jsx)(t$.A,{size:16,strokeWidth:1.5,"data-sentry-element":"Code","data-sentry-source-file":"GettingStartedSection.tsx"}),"Code"]})]}),(0,n.jsx)(D.$,{size:"tiny",type:"outline",onClick:()=>{if(a("hidden"),f){let e=("code"===f?C:I).filter(e=>"complete"===e.status).length,t=("code"===f?C:I).length;c({action:"home_getting_started_closed",properties:{workflow:"no-code"===f?"no_code":"code",steps_completed:e,total_steps:t},groups:{project:(null==i?void 0:i.ref)||"",organization:(null==o?void 0:o.slug)||""}})}},"data-sentry-element":"Button","data-sentry-source-file":"GettingStartedSection.tsx",children:"Dismiss"})]})]}),0===E.length?(0,n.jsxs)(k.Zp,{className:"bg-background/25 border-dashed relative",children:[(0,n.jsxs)("div",{className:"absolute -inset-16 z-0 opacity-50",children:[(0,n.jsx)("img",{src:"".concat(H.o2,"/img/reports/bg-grafana-dark.svg"),alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block"}),(0,n.jsx)("img",{src:"".concat(H.o2,"/img/reports/bg-grafana-light.svg"),alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-background-alternative to-transparent"})]}),(0,n.jsxs)(k.Wu,{className:"relative z-10 p-8 md:p-12 grid lg:grid-cols-2 gap-16 items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"heading-subSection mb-0 heading-meta text-foreground-light mb-4",children:"Choose a preferred workflow"}),(0,n.jsx)("p",{className:"text-foreground",children:"With Supabase, you have the flexibility to adopt a workflow that works for you. You can do everything via the dashboard, or manage your entire project within your own codebase."})]}),(0,n.jsxs)("div",{className:"flex items-stretch gap-4",children:[(0,n.jsxs)(D.$,{size:"medium",type:"outline",onClick:()=>{y(f),a("no-code"),c({action:"home_getting_started_workflow_clicked",properties:{workflow:"no_code",is_switch:null!==g},groups:{project:(null==i?void 0:i.ref)||"",organization:(null==o?void 0:o.slug)||""}})},className:"block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start bg-background ",children:[(0,n.jsx)(tV.A,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("div",{children:"No-code"}),(0,n.jsx)("div",{className:"text-foreground-light w-full whitespace-normal",children:"Ideal for prototyping or getting your project up and running"})]})]}),(0,n.jsxs)(D.$,{size:"medium",type:"outline",onClick:()=>{y(f),a("code"),c({action:"home_getting_started_workflow_clicked",properties:{workflow:"code",is_switch:null!==g},groups:{project:(null==i?void 0:i.ref)||"",organization:(null==o?void 0:o.slug)||""}})},className:"bg-background block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start",children:[(0,n.jsx)(t$.A,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("div",{children:"Code"}),(0,n.jsx)("div",{className:"text-foreground-light whitespace-normal",children:"Ideal for teams that want full control of their project"})]})]})]})]})]}):(0,n.jsx)(t6,{steps:E,onStepClick:e=>{let{stepIndex:t,stepTitle:a,actionType:s,wasCompleted:r}=e;f&&c({action:"home_getting_started_step_clicked",properties:{workflow:"no-code"===f?"no_code":"code",step_number:t+1,step_title:a,action_type:s,was_completed:r},groups:{project:(null==i?void 0:i.ref)||"",organization:(null==o?void 0:o.slug)||""}})}})]})}var al=a(35862),ai=a(62510),ao=a(10663);let ac=ao.Ik({timestamp:ao.ai({required_error:"Timestamp is required",invalid_type_error:"Timestamp must be a number (microseconds since epoch)"}).int("Timestamp must be an integer").positive("Timestamp must be positive"),service:ao.k5(["auth","db","functions","realtime","storage"],{required_error:"Service field is required",invalid_type_error:"Service must be one of: auth, db, functions, realtime, storage"}),time_window:ao.k5(["current","previous"],{required_error:"Time window field is required",invalid_type_error:'Time window must be either "current" or "previous"'}),ok_count:ao.ai({required_error:"ok_count is required",invalid_type_error:"ok_count must be a number"}).int("ok_count must be an integer").nonnegative("ok_count cannot be negative"),warning_count:ao.ai({required_error:"warning_count is required",invalid_type_error:"warning_count must be a number"}).int("warning_count must be an integer").nonnegative("warning_count cannot be negative"),error_count:ao.ai({required_error:"error_count is required",invalid_type_error:"error_count must be a number"}).int("error_count must be an integer").nonnegative("error_count cannot be negative")}),ad=ao.YO(ac,{required_error:"Metrics response must be an array",invalid_type_error:"Metrics response must be an array of metric rows"});async function au(e,t){let{projectRef:a,interval:s}=e;if(!a)throw Error("projectRef is required");let r=new URLSearchParams;s&&r.set("interval",s);let n=H.pe?"".concat(H.H$,"/projects/").concat(a,"/analytics/endpoints/project.metrics?").concat(r.toString()):"/api/platform/projects/".concat(a,"/analytics/endpoints/project.metrics?").concat(r.toString()),l=await (0,er.xi)(n,{abortSignal:t});if(l instanceof Error||(null==l?void 0:l.error)){var i;throw null!=(i=l.error)?i:l}let o=Array.isArray(l)?l:null==l?void 0:l.result,c=ad.safeParse(o);if(!c.success){let e=c.error.errors[0],t=e.path.length>0?" at path: ".concat(e.path.join(".")):"";throw Error("Invalid metrics response".concat(t,": ").concat(e.message,". Received: ").concat(JSON.stringify(null==o?void 0:o.slice(0,2))))}return c.data}let am=function(e){let{enabled:t=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{projectRef:s,interval:r}=e;return(0,es.I)({queryKey:en.P.projectMetrics(s,{interval:r}),queryFn:e=>{let{signal:t}=e;return au({projectRef:s,interval:r},t)},enabled:t&&void 0!==s,refetchOnWindowFocus:!1,...a})},ax=e=>e.reduce((e,t)=>e+t.ok_count+t.warning_count+t.error_count,0),ah=e=>"".concat(e>=0?"+":"").concat(e.toFixed(1),"%"),ap={free:1,pro:7,team:28,enterprise:90},af=[{key:"1hr",label:"Last 60 minutes",startValue:1,startUnit:"hour",format:"MMM D, h:mma",availableIn:["free","pro","team","enterprise"]},{key:"1day",label:"Last 24 hours",startValue:24,startUnit:"hour",format:"MMM D, ha",availableIn:["free","pro","team","enterprise"]},{key:"7day",label:"Last 7 days",startValue:7,startUnit:"day",format:"MMM D, ha",availableIn:["pro","team","enterprise"]}],ag=()=>{let e=(0,eh.useRouter)(),{ref:t}=(0,l.g)(),{data:a}=(0,ej.s)(),{mutate:s}=(0,tl.h)(),{projectAuthAll:r,projectStorageAll:i}=(0,M.x)(["project_auth:all","project_storage:all"]),{plan:c}=(0,ey.c)(),m=(null==c?void 0:c.id)==="free"?"1hr":"1day",[x,h]=(0,u.useState)(m),p=af.find(e=>e.key===x)||af[1],{datetimeFormat:f}=(0,u.useMemo)(()=>({datetimeFormat:p.format||"MMM D, ha"}),[p]),g=((e,t)=>{let{data:a,isLoading:s,error:r,refetch:n}=am({projectRef:e,interval:t});return(e=>{let{data:t,isLoading:a,error:s,onRefresh:r}=e,n={error:null!=s?s:null,isLoading:a,refresh:()=>{r()}},l={...n,eventChartData:[]},i={db:{current:[],previous:[]},functions:{current:[],previous:[]},auth:{current:[],previous:[]},storage:{current:[],previous:[]},realtime:{current:[],previous:[]}},o=e=>new Date(e/1e3).toISOString();for(let e of null!=t?t:[]){let t=i[e.service];("current"===e.time_window?t.current:t.previous).push({timestamp:o(e.timestamp),ok_count:e.ok_count,warning_count:e.warning_count,error_count:e.error_count})}let c=(e,t)=>Date.parse(e.timestamp)-Date.parse(t.timestamp);for(let e of Object.keys(i))i[e].current.sort(c),i[e].previous.sort(c);let d=e=>e?{...n,eventChartData:e}:l;return{db:{current:d(i.db.current),previous:d(i.db.previous)},functions:{current:d(i.functions.current),previous:d(i.functions.previous)},auth:{current:d(i.auth.current),previous:d(i.auth.previous)},storage:{current:d(i.storage.current),previous:d(i.storage.previous)},realtime:{current:d(i.realtime.current),previous:d(i.realtime.previous)}}})({data:a,isLoading:s,error:r,onRefresh:()=>{n()}})})(t,x),y=(0,u.useMemo)(()=>[{key:"db",title:"Database requests",href:"/project/".concat(t,"/editor"),route:"/logs/postgres-logs",enabled:!0},{key:"functions",title:"Functions requests",route:"/logs/edge-functions-logs",enabled:!0},{key:"auth",title:"Auth requests",href:"/project/".concat(t,"/auth/users"),route:"/logs/auth-logs",enabled:r},{key:"storage",title:"Storage requests",href:"/project/".concat(t,"/storage/buckets"),route:"/logs/storage-logs",enabled:i},{key:"realtime",title:"Realtime requests",route:"/logs/realtime-logs",enabled:!0}],[t,r,i]),j=(0,u.useMemo)(()=>y.map(e=>{let t=g[e.key].current,a=t.eventChartData,s=ax(a),r=a.reduce((e,t)=>e+t.warning_count,0),n=a.reduce((e,t)=>e+t.error_count,0);return{...e,stats:t,data:a,total:s,warn:r,err:n}}),[y,g]),v=j.some(e=>e.stats.isLoading),b=j.filter(e=>e.enabled),N=b.reduce((e,t)=>e+(t.total||0),0),w=b.reduce((e,t)=>e+(t.err||0),0),{successRate:_,nonSuccessRate:A}=((e,t,a)=>{if(e<=0)return{successRate:0,nonSuccessRate:0};let s=(t+a)/e*100;return{successRate:100-s,nonSuccessRate:s}})(N,b.reduce((e,t)=>e+(t.warn||0),0),w),S=((e,t)=>0===t?100*(e>0):(e-t)/t*100)(N,(0,u.useMemo)(()=>y.map(e=>{let t=g[e.key].previous.eventChartData;return{enabled:e.enabled,total:ax(t)}}),[y,g]).filter(e=>e.enabled).reduce((e,t)=>e+(t.total||0),0));return(0,n.jsxs)("div",{className:"space-y-6","data-sentry-component":"ProjectUsageSection","data-sentry-source-file":"ProjectUsageSection.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center gap-x-2",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:gap-6",children:[(0,n.jsxs)("div",{className:"flex items-start gap-2 heading-section text-foreground-light",children:[(0,n.jsx)("span",{className:"text-foreground",children:N.toLocaleString()}),(0,n.jsx)("span",{children:"Total Requests"}),(0,n.jsx)("span",{className:(0,J.cn)("text-sm",S>=0?"text-brand":"text-destructive"),children:ah(S)})]}),(0,n.jsxs)("div",{className:"flex items-start gap-2 heading-section text-foreground-light",children:[(0,n.jsxs)("span",{className:"text-foreground",children:[_.toFixed(1),"%"]}),(0,n.jsx)("span",{children:"Success Rate"}),(0,n.jsx)("span",{className:(0,J.cn)("text-sm",A>0?"text-destructive":"text-brand"),children:ah(A)})]})]}),(0,n.jsxs)(ev.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"ProjectUsageSection.tsx",children:[(0,n.jsx)(ev.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"ProjectUsageSection.tsx",children:(0,n.jsx)(D.$,{type:"default",iconRight:(0,n.jsx)(ex.A,{size:14}),"data-sentry-element":"Button","data-sentry-source-file":"ProjectUsageSection.tsx",children:(0,n.jsx)("span",{children:p.label})})}),(0,n.jsx)(ev.SQ,{side:"bottom",align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"ProjectUsageSection.tsx",children:(0,n.jsx)(ev.Hr,{value:x,onValueChange:e=>h(e),"data-sentry-element":"DropdownMenuRadioGroup","data-sentry-source-file":"ProjectUsageSection.tsx",children:af.map(e=>{var t,s;if(null==(t=e.availableIn)?void 0:t.includes((null==c?void 0:c.id)||"free"))return(0,n.jsx)(ev.Ht,{value:e.key,children:e.label},e.key);{let t=ap[null!=(s=null==c?void 0:c.id)?s:"free"];return(0,n.jsxs)(eb.m_,{children:[(0,n.jsx)(eb.k$,{asChild:!0,children:(0,n.jsx)(ev.Ht,{disabled:!0,value:e.key,className:"!pointer-events-auto",children:e.label})}),(0,n.jsxs)(eb.ZI,{side:"left",children:[(0,n.jsxs)("p",{children:[null==c?void 0:c.name," plan only includes up to ",t," day",t>1?"s":""," of log retention"]}),(0,n.jsxs)("p",{className:"text-foreground-light",children:[(0,n.jsx)(ef.g,{className:"text-foreground-light hover:text-foreground",href:"/org/".concat(null==a?void 0:a.slug,"/billing?panel=subscriptionPlan"),children:"Upgrade your plan"})," ","to increase log retention and view statistics for the"," ",e.label.toLowerCase()]})]})]},e.key)}})})})]})]}),(0,n.jsx)(tA,{columns:[3,2,1],"data-sentry-element":"Row","data-sentry-source-file":"ProjectUsageSection.tsx",children:b.map(r=>{let l,i;return(0,n.jsxs)(k.Zp,{className:"mb-0 md:mb-0 h-full flex flex-col h-64",children:[(0,n.jsxs)(k.aR,{className:"flex flex-row items-end justify-between gap-2 space-y-0 pb-0 border-b-0",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(k.ZB,{className:"text-foreground-light",children:r.href?(0,n.jsx)(d(),{href:r.href,onClick:()=>{t&&(null==a?void 0:a.slug)&&s({action:"home_project_usage_service_clicked",properties:{service_type:r.key,total_requests:r.total||0,error_count:r.err||0},groups:{project:t,organization:a.slug}})},children:r.title}):r.title})}),(0,n.jsx)("span",{className:"text-foreground text-xl",children:(r.total||0).toLocaleString()})]})}),(0,n.jsxs)("div",{className:"flex items-end gap-4 text-foreground-light",children:[(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-1.5 h-1.5 bg-warning rounded-full"}),(0,n.jsx)("span",{className:"heading-meta",children:"Warn"})]}),(0,n.jsx)("span",{className:"text-foreground text-xl",children:(r.warn||0).toLocaleString()})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-1.5 h-1.5 bg-destructive rounded-full"}),(0,n.jsx)("span",{className:"heading-meta",children:"Err"})]}),(0,n.jsx)("span",{className:"text-foreground text-xl",children:(r.err||0).toLocaleString()})]})]})]}),(0,n.jsx)(k.Wu,{className:"p-6 pt-4 flex-1 h-full overflow-hidden",children:(0,n.jsx)(eN.A,{isFullHeight:!0,active:v,children:(0,n.jsx)(ai.b,{isFullHeight:!0,data:r.data,DateTimeFormat:f,onBarClick:(l=r.route,i=r.key,r=>{if(!(null==r?void 0:r.timestamp))return;let n=o()(r.timestamp).toISOString(),c=new URLSearchParams({iso_timestamp_start:o()(n).subtract(1,"minute").toISOString(),iso_timestamp_end:o()(n).add(1,"minute").toISOString()});e.push("/project/".concat(t).concat(l,"?").concat(c.toString())),t&&(null==a?void 0:a.slug)&&s({action:"home_project_usage_chart_clicked",properties:{service_type:i,bar_timestamp:r.timestamp},groups:{project:t,organization:a.slug}})}),EmptyState:(0,n.jsx)(al.A,{size:"small",message:"No data for selected period",isFullHeight:!0})})})})]},r.key)})})]})},ay=()=>{let{enableBranching:e}=(0,l.g)(),t=(0,e3.qM)(),{data:a}=(0,ed.YA)(),{data:s}=(0,ej.s)(),{mutate:r}=(0,tl.h)(),i=o()(null==a?void 0:a.inserted_at).isBefore(o()().subtract(10,"day")),c=(0,u.useRef)(!1),d=(null==a?void 0:a.status)===H.BU.INACTIVE,m=(null==a?void 0:a.status)===H.BU.COMING_UP,[x,h]=(0,tw.M)("home-section-order-".concat((null==a?void 0:a.ref)||"default"),["getting-started","usage","advisor","custom-report"]),[p,f]=(0,tw.M)("home-getting-started-".concat((null==a?void 0:a.ref)||"default"),"empty"),g=(0,e7.FR)((0,e7.MS)(e7.AN,{activationConstraint:{distance:8}}));return(0,u.useEffect)(()=>{e&&!c.current&&(c.current=!0,t.setShowCreateBranchModal(!0))},[e,t]),(0,n.jsxs)("div",{className:"w-full h-full","data-sentry-component":"HomeV2","data-sentry-source-file":"Home.tsx",children:[(0,n.jsx)(tN.eh,{size:"large",className:(0,J.cn)(d&&"h-full"),"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Home.tsx",children:(0,n.jsx)(tN.gu,{isFullWidth:!0,className:(0,J.cn)(d?"h-full flex justify-center !p-0":"pt-16 pb-0"),"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"Home.tsx",children:(0,n.jsx)(tb,{"data-sentry-element":"TopSection","data-sentry-source-file":"Home.tsx"})})}),!d&&(0,n.jsx)(tN.eh,{size:"large",children:(0,n.jsx)(tN.gu,{isFullWidth:!0,className:"gap-16 pb-32",children:(0,n.jsx)(e7.Mp,{sensors:g,onDragEnd:e=>{let{active:t,over:n}=e;n&&t.id!==n.id&&h(e=>{let l=e.indexOf(String(t.id)),i=e.indexOf(String(n.id));return -1===l||-1===i?e:((null==a?void 0:a.ref)&&(null==s?void 0:s.slug)&&r({action:"home_section_rows_moved",properties:{section_moved:String(t.id),old_position:l,new_position:i},groups:{project:a.ref,organization:s.slug}}),(0,e9.be)(e,l,i))})},children:(0,n.jsx)(e9.gB,{items:x.filter(e=>"getting-started"!==e||"hidden"!==p),strategy:e9._G,children:x.map(e=>l.pe&&"usage"===e?(0,n.jsx)("div",{className:(0,J.cn)(m&&"opacity-60 pointer-events-none"),children:(0,n.jsx)(tt,{id:e,children:(0,n.jsx)(ag,{})})},e):"getting-started"===e&&!i&&a&&"hidden"!==p?(0,n.jsx)(tt,{id:e,children:(0,n.jsx)(an,{value:p,onChange:f})},e):"advisor"===e?(0,n.jsx)("div",{className:(0,J.cn)(m&&"opacity-60 pointer-events-none"),children:(0,n.jsx)(tt,{id:e,children:(0,n.jsx)(tS,{showEmptyState:m})})},e):"custom-report"===e?(0,n.jsx)("div",{className:(0,J.cn)(m&&"opacity-60 pointer-events-none"),children:(0,n.jsx)(tt,{id:e,children:(0,n.jsx)(tY,{})})},e):void 0)})})})})]})};var aj=a(10508),av=a(29471),ab=a(67267);let aN=()=>{let e=(0,l._P)("homeNew"),t=(0,ab.I)("homeNew");return e&&t?(0,n.jsx)(ay,{}):(0,n.jsx)(e8,{"data-sentry-element":"Home","data-sentry-component":"HomePage","data-sentry-source-file":"index.tsx"})};aN.getLayout=e=>(0,n.jsx)(aj.A,{children:(0,n.jsx)(av.S,{children:e})});let aw=aN},80038:(e,t,a)=>{"use strict";a.d(t,{m:()=>n});var s=a(75187),r=a(53239);let n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.useMemo)(()=>{var e;let[a,r]=t;if(!(null==(e=a[0])?void 0:e[r]))return{data:a,error:void 0,isError:!1};try{return{data:(0,s.mu)(...t).sort((e,a)=>new Date(e[t[1]])-new Date(a[t[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(t[0]),...t])}},81672:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},86936:(e,t,a)=>{"use strict";a.d(t,{h:()=>o});var s=a(56947),r=a(24523),n=a(9620),l=a(32510);async function i(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:s,error:n}=await (0,r.Jt)("/platform/database/{ref}/backups",{params:{path:{ref:a}},signal:t});return n&&(0,r.H4)(n),s}let o=function(e){let{projectRef:t}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,n.CG)();return(0,s.I)({queryKey:l.c.backups(t),queryFn:e=>{let{signal:a}=e;return i({projectRef:t},a)},enabled:a&&!o&&void 0!==t,...r})}},88845:(e,t,a)=>{"use strict";a.d(t,{F:()=>m});var s=a(80263),r=a(53239),n=a(7981),l=a(8e3),i=a(31626),o=a(60656),c=a(80356),d=a(68152);let u={danger:(0,s.jsx)(l.A,{strokeWidth:1.5,size:18}),success:(0,s.jsx)(i.A,{strokeWidth:1.5,size:18}),warning:(0,s.jsx)(o.A,{strokeWidth:1.5,size:18}),info:(0,s.jsx)(c.A,{strokeWidth:1.5,size:18}),neutral:(0,s.jsx)(s.Fragment,{})};function m(e){let{variant:t="neutral",className:a,title:l,withIcon:i,closable:o,children:c,icon:m,actions:x}=e,h=(0,n.A)("alert"),[p,f]=(0,r.useState)(!0),g=[h.base];g.push(h.variant[t].base),a&&g.push(a);let y=[h.description,h.variant[t].description],j=[h.close];return(0,s.jsx)(s.Fragment,{children:p&&(0,s.jsxs)("div",{className:g.join(" "),children:[i?(0,s.jsx)("div",{className:h.variant[t].icon,children:i&&u[t]}):null,m&&m,(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:[h.variant[t].header,h.header].join(" "),children:l}),(0,s.jsx)("div",{className:y.join(" "),children:c})]}),x]}),o&&(0,s.jsx)("button",{"aria-label":"Close alert",onClick:()=>f(!1),className:j.join(" "),children:(0,s.jsx)(d.A,{strokeWidth:2,size:16})})]})})}},89329:(e,t,a)=>{"use strict";a.d(t,{K:()=>y});var s=a(80263),r=a(52555),n=a.n(r),l=a(53239),i=a(86759),o=a(96698),c=a(78937),d=a(56217),u=a(85039),m=a(28243),x=a(75878),h=a(99779),p=a(6538),f=a(53931);let g=e=>{let{label:t,stat:a}=e;return(0,s.jsxs)("div",{className:"flex flex-row gap-2","data-sentry-component":"Row","data-sentry-source-file":"ComputeBadgeWrapper.tsx",children:[(0,s.jsx)("span",{className:"text-sm text-foreground-light w-16",children:t}),(0,s.jsx)("span",{className:"text-sm",children:a})]})},y=e=>{var t,a,r,y,j;let{slug:v,projectRef:b,cloudProvider:N,computeSize:w}=e,[_,k]=(0,l.useState)(!1),A=(0,d.g)(N),{data:S,isLoading:C}=(0,c.Q)({projectRef:b},{enabled:_}),I=null!=(r=null==S?void 0:S.selected_addons)?r:[],{computeInstance:E}=(0,i.EN)(I),R=null==E||null==(t=E.variant)?void 0:t.meta,L=void 0===R&&"micro"===w?u.Mc:R,P=null==S||null==(a=S.available_addons.find(e=>"Compute Instance"===e.name))?void 0:a.variants,T=null==P?void 0:P[P.length-1].identifier,M=w===(null==T?void 0:T.replace("ci_","")),{data:U,isLoading:H}=(0,o.j5)({orgSlug:v},{enabled:_}),D=(null==U?void 0:U.plan.id)!=="free"&&"nano"===w;return w?(0,s.jsxs)(m.jc,{onOpenChange:()=>k(!_),openDelay:280,"data-sentry-element":"HoverCard","data-sentry-component":"ComputeBadgeWrapper","data-sentry-source-file":"ComputeBadgeWrapper.tsx",children:[(0,s.jsx)(m.d0,{asChild:!0,className:"group",onClick:e=>e.stopPropagation(),"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"ComputeBadgeWrapper.tsx",children:(0,s.jsx)("div",{children:(0,s.jsx)(p.R,{infraComputeSize:w,"data-sentry-element":"ComputeBadge","data-sentry-source-file":"ComputeBadgeWrapper.tsx"})})}),(0,s.jsxs)(m.Et,{side:"bottom",align:"start",className:"p-0 overflow-hidden w-96",onClick:e=>e.stopPropagation(),"data-sentry-element":"HoverCardContent","data-sentry-source-file":"ComputeBadgeWrapper.tsx",children:[(0,s.jsx)("div",{className:"p-2 px-5 text-xs text-foreground-lighter",children:"Compute size"}),(0,s.jsx)(x.w,{"data-sentry-element":"Separator","data-sentry-source-file":"ComputeBadgeWrapper.tsx"}),(0,s.jsxs)("div",{className:"p-3 px-5 flex flex-row gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.R,{infraComputeSize:w,"data-sentry-element":"ComputeBadge","data-sentry-source-file":"ComputeBadgeWrapper.tsx"})}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:C||H?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(f.Ay,{className:"h-[20px] py-0 w-32"}),(0,s.jsx)(f.Ay,{className:"h-[20px] py-0 w-32"})]})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:void 0!==L?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{label:"CPU",stat:"".concat(null!=(y=L.cpu_cores)?y:"?","-core ").concat(A," ").concat(L.cpu_dedicated?"(Dedicated)":"(Shared)")}),(0,s.jsx)(g,{label:"Memory",stat:"".concat(null!=(j=L.memory_gb)?j:"-"," GB")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{label:"CPU",stat:"Shared"}),(0,s.jsx)(g,{label:"Memory",stat:"Up to 0.5 GB"})]})})})})]}),(!M||D)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.w,{}),(0,s.jsxs)("div",{className:"p-3 px-5 text-sm flex flex-col gap-2 bg-studio",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,s.jsx)("p",{className:"text-foreground",children:D?"Free upgrade to Micro available":"Unlock more compute"}),(0,s.jsx)("p",{className:"text-foreground-light",children:D?"Paid plans include a free upgrade to Micro compute.":"Scale your project up to 64 cores and 256 GB RAM."})]}),(0,s.jsx)("div",{children:(0,s.jsx)(h.$,{asChild:!0,type:"default",htmlType:"button",role:"button",children:(0,s.jsx)(n(),{href:"/project/".concat(b,"/settings/compute-and-disk"),children:"Upgrade compute"})})})]})]})]})]}):null}},90309:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]])},96459:(e,t,a)=>{"use strict";a.d(t,{A:()=>v});var s=a(80263),r=a(53239),n=a(53434),l=a.n(n),i=a(2070),o=a(62065),c=a(30519),d=a(72195),u=a(64720),m=a(86058),x=a(75419),h=a(4860),p=a(30761),f=a(14981),g=a(66e3),y=a(35862),j=a(74544);let v=e=>{var t,a,n;let{data:v,yAxisKey:b,xAxisKey:N,format:w,customDateFormat:_=p.C_.FULL,title:k,highlightedValue:A,highlightedLabel:S,displayDateInUtc:C,minimalHeader:I,valuePrecision:E,className:R="",size:L="normal",emptyStateMessage:P,onBarClick:T,showLegend:M=!1,xAxisIsDate:U=!0,XAxisProps:H,YAxisProps:D,showGrid:q=!1,syncId:z}=e,{hoveredIndex:W,isHovered:F,isCurrentChart:G,setHover:O,clearHover:B}=(0,j.Z)("default"),{Container:Y}=(0,g.dQ)(L),[K,V]=(0,r.useState)(null),$=(0,r.useMemo)(()=>v.map(e=>({...e,[b]:"string"==typeof e[b]?Number(e[b]):e[b]})),[v,b]),J=H||{interval:v.length-2,angle:0,tick:!1},Q=D||{tickFormatter:e=>(0,g.Eg)(e,E),tick:!1,width:0},X=e=>C?l()(e).utc():l()(e),Z=function(){if(!U){var e;return K?null==(e=v[K])?void 0:e[N]:S}return null!==K&&v&&void 0!==v[K]&&X(v[K][N]).format(_)||S}(),ee=null!==K?null==(t=v[K])?void 0:t[b]:A;return 0===v.length?(0,s.jsx)(y.A,{message:P,description:"It may take up to 24 hours for data to refresh",size:L,className:R,attribute:k,format:w}):(0,s.jsxs)("div",{className:["flex flex-col gap-y-3",R].join(" "),"data-sentry-component":"BarChart","data-sentry-source-file":"BarChart.tsx",children:[(0,s.jsx)(f._,{title:k,format:w,customDateFormat:_,highlightedValue:"number"==typeof ee?(0,g.Eg)(ee,E):ee,highlightedLabel:Z,minimalHeader:I,syncId:z,data:v,xAxisKey:N,yAxisKey:b,xAxisIsDate:U,displayDateInUtc:C,valuePrecision:E,attributes:[],"data-sentry-element":"ChartHeader","data-sentry-source-file":"BarChart.tsx"}),(0,s.jsx)(Y,{"data-sentry-element":"Container","data-sentry-source-file":"BarChart.tsx",children:(0,s.jsxs)(i.E,{data:$,className:"overflow-visible",onMouseMove:e=>{e.activeTooltipIndex!==K&&V(e.activeTooltipIndex),O(e.activeTooltipIndex)},onMouseLeave:()=>{V(null),B()},onClick:e=>{var t,a;let s=null==e||null==(a=e.activePayload)||null==(t=a[0])?void 0:t.payload;T&&T(s,e)},"data-sentry-element":"RechartBarChart","data-sentry-source-file":"BarChart.tsx",children:[M&&(0,s.jsx)(o.s,{}),q&&(0,s.jsx)(c.d,{stroke:p.OK.AXIS}),(0,r.createElement)(d.h,{...Q,axisLine:{stroke:p.OK.AXIS},tickLine:{stroke:p.OK.AXIS},key:b,"data-sentry-element":"YAxis","data-sentry-source-file":"BarChart.tsx"}),(0,r.createElement)(u.W,{...J,axisLine:{stroke:p.OK.AXIS},tickLine:{stroke:p.OK.AXIS},key:N,"data-sentry-element":"XAxis","data-sentry-source-file":"BarChart.tsx"}),(0,s.jsx)(m.m,{content:e=>{var t,a;return z&&F&&G&&null!==W?(0,s.jsxs)("div",{className:"bg-black/90 text-white p-2 rounded text-xs",children:[(0,s.jsx)("div",{className:"font-medium",children:l()(null==(t=v[W])?void 0:t[N]).format(_)}),(0,s.jsxs)("div",{children:[(0,g.Eg)(Number(null==(a=v[W])?void 0:a[b])||0,E),"string"==typeof w?w:""]})]}):null},"data-sentry-element":"Tooltip","data-sentry-source-file":"BarChart.tsx"}),(0,s.jsx)(x.y,{dataKey:b,fill:p.OK.GREEN_1,animationDuration:300,maxBarSize:48,"data-sentry-element":"Bar","data-sentry-source-file":"BarChart.tsx",children:null==v?void 0:v.map((e,t)=>(0,s.jsx)(h.f,{className:"transition-all duration-300 ".concat(T?"cursor-pointer":""),fill:K===t||null===K?p.OK.GREEN_1:p.OK.GREEN_2,enableBackground:12},"cell-".concat(t)))})]})}),v&&(0,s.jsxs)("div",{className:"text-foreground-lighter -mt-9 flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{children:U?X(v[0][N]).format(_):v[0][N]}),(0,s.jsx)("span",{children:U?X(null==(a=v[(null==v?void 0:v.length)-1])?void 0:a[N]).format(_):null==(n=v[(null==v?void 0:v.length)-1])?void 0:n[N]})]})]})}}},e=>{e.O(0,[5233,60858,15599,16110,44952,36538,43833,47625,81285,94942,43083,23131,505,76984,72391,74004,40545,596,10508,48340,75187,29471,51697,81733,45936,90636,46593,38792],()=>e(e.s=31316)),_N_E=e.O()}]);