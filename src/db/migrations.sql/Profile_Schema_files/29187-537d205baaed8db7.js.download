try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2739ca97-d624-4997-bfb1-9bdaa343208f",e._sentryDebugIdIdentifier="sentry-dbid-2739ca97-d624-4997-bfb1-9bdaa343208f")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29187],{8089:(e,t,r)=>{r.d(t,{T:()=>u});var n=r(53239),a=r(53434),s=r.n(a),i=r(23850),o=r(23463),l=r(71492),c=r(75187);let d=e=>(0,i.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""}),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.s3.LAST_60_MINUTES,{plan:t,isLoading:r}=(0,l.c)(),[a,u]=(0,n.useState)(!1),m=(0,n.useMemo)(()=>o.xm.map(e=>({...e,disabled:!1})),[]),[p,f]=(0,i.ZA)("its",d("")),[y,h]=(0,i.ZA)("ite",d("")),[x,j]=(0,i.ZA)("isHelper",(0,i.Cp)({parse:e=>"true"===e,serialize:e=>String(e)})),[g,v]=(0,i.ZA)("helperText",d("")),b=(0,n.useCallback)(()=>{var r;let n;if("string"==typeof e?n=o.xm.find(t=>t.text===e):e&&"object"==typeof e&&"text"in e&&(n=e),n&&(null==(r=n.availableIn)?void 0:r.includes((null==t?void 0:t.id)||"free")))return{start:n.calcFrom(),end:n.calcTo(),helper:{isHelper:!0,text:n.text}};let a=o.xm.find(e=>{var r;return e.default&&(null==(r=e.availableIn)?void 0:r.includes((null==t?void 0:t.id)||"free"))});if(a)return{start:a.calcFrom(),end:a.calcTo(),helper:{isHelper:!0,text:a.text}};let i=o.xm.find(e=>{var r;return null==(r=e.availableIn)?void 0:r.includes((null==t?void 0:t.id)||"free")});return i?{start:i.calcFrom(),end:i.calcTo(),helper:{isHelper:!0,text:i.text}}:{start:s()().subtract(1,"hour").toISOString(),end:s()().toISOString(),helper:{isHelper:!1}}},[e,null==t?void 0:t.id]),k=(0,n.useMemo)(()=>{if(p){let e=s()(p),t=s()();if(e.isValid()&&e.isAfter(t.subtract(90,"day"))&&e.isBefore(t.add(1,"day")))return p}return b().start},[p,b]),C=(0,n.useMemo)(()=>{if(y){let e=s()(y),t=s()();if(e.isValid()&&e.isAfter(t.subtract(90,"day"))&&e.isBefore(t.add(1,"day")))return y}return b().end},[y,b]),A=(0,n.useMemo)(()=>p&&y?!!x:b().helper.isHelper,[p,y,x,b]),S=(0,n.useMemo)(()=>p&&y?g||void 0:b().helper.text,[p,y,g,b]),_=(0,n.useCallback)((e,t)=>{s()(t).diff(e,"day",!0);let r=s()(t).diff(e,"hour",!0),n={"1m":r<1.1,"5m":r<3.1,"10m":r<6.1,"30m":r<25};switch(!0){case n["1m"]:return"1m";case n["5m"]:return"5m";case n["10m"]:return"10m";case n["30m"]:return"30m";default:return"1h"}},[]),w=(0,n.useMemo)(()=>({period_start:{date:k,time_period:"1d"},period_end:{date:C,time_period:"today"},interval:_(k,C)}),[k,C,_]),F=(0,n.useCallback)((e,t)=>{f(e),h(t),j(!1),v("")},[f,h,j,v]),N=(0,n.useCallback)(e=>{f(e.period_start.date),h(e.period_end.date),j(!1),v("")},[f,h,j,v]);return{selectedDateRange:w,setSelectedDateRange:N,updateDateRange:F,datePickerValue:(0,n.useMemo)(()=>({from:k,to:C,isHelper:A,text:S}),[k,C,A,S]),datePickerHelpers:m,isOrgPlanLoading:r,orgPlan:t,showUpgradePrompt:a,setShowUpgradePrompt:u,handleDatePickerChange:e=>(0,c.eu)(e.from,null==t?void 0:t.id)?(u(!0),!0):(e.from&&e.to&&(f(e.from),h(e.to),j(e.isHelper||!1),v(e.text||"")),!1)}}},10279:(e,t,r)=>{r.d(t,{E:()=>y});var n=r(80263),a=r(80814),s=r(53239),i=r(73969),o=r(8579),l=r(9620),c=r(6436),d=r(34983),u=r(6217),m=r(49151),p=r(80421),f=r(99779);let y=e=>{var t;let{visible:r,onCancel:y,afterSubmit:h}=e,x=(0,a.useRouter)(),{profile:j}=(0,d.xc)(),{data:g}=(0,l.YA)(),v=null!=(t=null==g?void 0:g.ref)?t:"default",b=(0,s.useMemo)(()=>{let{its:e,ite:t,isHelper:r,helperText:n}=x.query,a=new URLSearchParams;e&&"string"==typeof e&&a.set("its",e),t&&"string"==typeof t&&a.set("ite",t),r&&"string"==typeof r&&a.set("isHelper",r),n&&"string"==typeof n&&a.set("helperText",n);let s=a.toString();return s?"?".concat(s):""},[x.query]),{mutate:k,isLoading:C}=(0,o.v)({onSuccess:(e,t)=>{i.oR.success("Successfully created new report");let r=t.payload.id;x.push("/project/".concat(v,"/reports/").concat(r).concat(b)),h()},onError:e=>{i.oR.error("Failed to create report: ".concat(e.message))}});async function A(e){let{name:t,description:r}=e;return v?j?void k({projectRef:v,payload:{id:(0,c.gZ)(),type:"report",name:t,description:r||"",visibility:"project",owner_id:null==j?void 0:j.id,content:{schema_version:1,period_start:{time_period:"7d",date:""},period_end:{time_period:"today",date:""},interval:"1d",layout:[]}}}):console.error("Profile is required"):console.error("Project ref is required")}return(0,n.jsx)(u.A,{visible:r,onCancel:y,hideFooter:!0,header:"Create a custom report",size:"small","data-sentry-element":"Modal","data-sentry-component":"CreateReportModal","data-sentry-source-file":"CreateReportModal.tsx",children:(0,n.jsx)(m.A,{onReset:y,validateOnBlur:!0,initialValues:{name:"",description:""},validate:e=>{let t={};return e.name||(t.name="Required"),t},onSubmit:e=>A(e),"data-sentry-element":"Form","data-sentry-source-file":"CreateReportModal.tsx",children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.A.Content,{className:"space-y-4",children:[(0,n.jsx)(p.A,{label:"Name",id:"name",name:"name"}),(0,n.jsx)(p.A.TextArea,{label:"Description",id:"description",placeholder:"Describe your custom report",size:"medium",textAreaClassName:"resize-none"})]}),(0,n.jsx)(u.A.Separator,{}),(0,n.jsxs)(u.A.Content,{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(f.$,{htmlType:"reset",type:"default",onClick:y,disabled:C,children:"Cancel"}),(0,n.jsx)(f.$,{htmlType:"submit",loading:C,disabled:C,children:"Create report"})]})]})})})}},24051:(e,t,r)=>{r.d(t,{$:()=>c});var n=r(32144),a=r(80251),s=r(73969),i=r(24523),o=r(1206);async function l(e,t){let{projectRef:r,ids:n}=e,{data:a,error:s}=await (0,i.yH)("/platform/projects/{ref}/content",{headers:{Version:"2"},params:{path:{ref:r},query:{ids:n.join(",")}},signal:t});return s&&(0,i.H4)(s),a.map(e=>e.id)}let c=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.jE)();return(0,a.n)({mutationFn:e=>l(e),async onSuccess(t,r,n){let{projectRef:a}=r;await Promise.all([i.invalidateQueries({queryKey:o.M.allContentLists(a)}),i.invalidateQueries({queryKey:o.M.infiniteList(a)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,n){void 0===t?s.oR.error("Failed to delete contents: ".concat(e.message)):t(e,r,n)},...r})}},24487:(e,t,r)=>{r.d(t,{Ay:()=>m});var n=r(80263),a=r(53239),s=r(7981),i=r(80100);function o(e){let{children:t,className:r,tag:a="div",style:s}=e;return(0,n.jsx)("".concat(a),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:r=1,children:a,style:s}=e;return(0,n.jsx)("h".concat(r),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},o.Text=function(e){let{className:t,children:r,style:a,type:s,disabled:i,mark:o,code:l,keyboard:c,underline:d,strikethrough:u,strong:m,small:p}=e;return l?(0,n.jsx)("code",{style:a,children:r}):o?(0,n.jsx)("mark",{style:a,children:r}):c?(0,n.jsx)("kbd",{style:a,children:r}):m?(0,n.jsx)("strong",{style:a,children:r}):(0,n.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:r})},o.Link=function(e){let{children:t,target:r="_blank",href:a,className:s,onClick:i,style:o}=e;return(0,n.jsx)("a",{onClick:i,href:a,target:r,rel:"noopener noreferrer",style:o,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let l=(0,a.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,n.jsx)(l.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:r,ulClassName:a,style:s,type:i="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:r,style:s,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(c,{type:i,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("ul",{className:a,children:t})})})}u.Item=function(e){let{children:t,icon:r,active:a,rounded:o,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,p=(0,s.A)("menu"),{type:f}=d(),y=[p.item.base];y.push(p.item.variants[f].base),a?y.push(p.item.variants[f].active):y.push(p.item.variants[f].normal);let h=[p.item.content.base];a?h.push(p.item.content.active):h.push(p.item.content.normal);let x=[p.item.icon.base];return a?x.push(p.item.icon.active):x.push(p.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,i.cn)("outline-none",y),style:m,onClick:l,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[r&&(0,n.jsx)("div",{className:"".concat(x.join(" ")," min-w-fit"),children:r}),(0,n.jsx)("span",{className:h.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:r,title:a}=e,i=(0,s.A)("menu"),{type:o}=d();return(0,n.jsxs)("div",{className:[i.group.base,i.group.variants[o]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[r&&(0,n.jsx)("span",{className:i.group.icon,children:r}),(0,n.jsx)("span",{className:i.group.content,children:a}),t]})},u.Misc=function(e){let{children:t}=e;return(0,n.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(o.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("span",{children:t})})})};let m=u},34179:(e,t,r)=>{r.d(t,{Cr:()=>m,yK:()=>p,B7:()=>u,pD:()=>d,e_:()=>y,cp:()=>f});var n=r(53434),a=r.n(n),s=r(51797),i=r(68224),o=r(75187),l=r(84353),c=r(90350);let d=e=>Object.fromEntries(new URLSearchParams(e)),u=(e,t)=>Object.entries(e).reduce((e,r)=>{let[n,{sql:a,queryType:o}]=r;return"db"===o?{...e,[n]:()=>(0,s.A)({sql:a})}:{...e,[n]:()=>(0,i.A)(t)}},{});function m(e){let t=new Set;return e.forEach(e=>{void 0!==e.status_code&&null!==e.status_code&&t.add(String(e.status_code))}),Array.from(t).sort()}function p(e){return e.map(e=>({attribute:e,label:"".concat(e," ").concat(function(e){if(!(e in c.h))return{code:e,name:"UNKNOWN",message:"Unknown status code",label:"Unknown"};let t=c.h[e],r=c.h["".concat(e,"_MESSAGE")],n=c.h["".concat(e,"_NAME")];return{code:e,name:n,label:t,message:r}}(parseInt(e,10)).label),color:l.j_[e]||l.j_.default}))}function f(e,t){return Object.values(e.reduce((e,r)=>{let n=(0,o.l8)(r.timestamp)?(0,o.RT)(r.timestamp):a().utc(r.timestamp).toISOString();e[n]||(e[n]={timestamp:n},t.forEach(t=>{e[n][t]=0}));let s=String(r.status_code);return s in e[n]&&(e[n][s]=r.count),e},{}))}function y(e,t,r){return Object.values(e.reduce((e,n)=>{let s=(0,o.l8)(n.timestamp)?(0,o.RT)(n.timestamp):a().utc(n.timestamp).toISOString();e[s]||(e[s]={timestamp:s},r.forEach(t=>{e[s][t]=0}));let i=String(n[t]);return i in e[s]&&(e[s][i]=n.count),e},{}))}},42459:(e,t,r)=>{r.d(t,{c:()=>c});var n=r(80263),a=r(52555),s=r.n(a),i=r(80100),o=r(99779),l=r(44725);let c=e=>{let{urlBack:t,fullHeight:r=!0}=e;return(0,n.jsx)("div",{className:(0,i.cn)("w-full flex items-center justify-center",r&&"h-full"),"data-sentry-component":"UnknownInterface","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(l.Z,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for","data-sentry-element":"Admonition","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(o.$,{asChild:!0,type:"default",className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(s(),{href:t,"data-sentry-element":"Link","data-sentry-source-file":"UnknownInterface.tsx",children:"Head back"})})})})}},49151:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(80263),a=r(53239),s=r(57459),i=r(7760);function o(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function l(e){let{validate:t,...r}=e,[l,c]=(0,a.useReducer)(o,null),d=(0,s.Wx)({validateOnBlur:!0,...r,validationSchema:r.validationSchema,initialValues:r.initialValues,onSubmit:r.onSubmit,validate:t||function(){return l}});return(0,n.jsx)("form",{id:r.id,name:r.name,onSubmit:d.handleSubmit,className:r.className,style:r.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,n.jsx)(i.h,{values:d.values,errors:d.errors,formContextOnChange:d.handleChange,handleBlur:d.handleBlur,touched:d.touched,fieldLevelValidation:function(e,t){c({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:r.children({errors:d.errors,touched:d.touched,isSubmitting:d.isSubmitting,isValidating:d.isValidating,submitCount:d.submitCount,initialValues:d.initialValues,values:d.values,handleReset:d.handleReset,resetForm:d.resetForm,setFieldValue:d.setFieldValue})})})}},69213:(e,t,r)=>{r.d(t,{A:()=>q});var n=r(80263),a=r(22891),s=r(42459),i=r(2657),o=r(9497),l=r(29471),c=r(60045),d=r(90376),u=r(52555),m=r.n(u),p=r(80814),f=r(53239),y=r(73969),h=r(10279),x=r(8579),j=r(6217),g=r(49151),v=r(80421),b=r(99779);let k=e=>{let{selectedReport:t,initialValues:r,onCancel:s}=e,{ref:i}=(0,a.g)(),{mutate:o,isLoading:l}=(0,x.v)({onSuccess:()=>{y.oR.success("Successfully updated report"),s()},onError:e=>{y.oR.error("Failed to update report: ".concat(e.message))}});return(0,n.jsx)(j.A,{visible:void 0!==t,onCancel:s,hideFooter:!0,header:"Update custom report",size:"small","data-sentry-element":"Modal","data-sentry-component":"UpdateCustomReportModal","data-sentry-source-file":"UpdateModal.tsx",children:(0,n.jsx)(g.A,{onReset:s,validateOnBlur:!0,initialValues:r,validate:function(e){let t={};return e.name||(t.name="This field is required"),t},onSubmit:e=>{if(!i)return console.error("Project ref is required");t&&t.id&&t.project_id&&o({projectRef:i,payload:{...t,owner_id:t.owner_id,project_id:t.project_id,id:t.id,name:e.name,description:e.description||""}})},"data-sentry-element":"Form","data-sentry-source-file":"UpdateModal.tsx",children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.A.Content,{children:(0,n.jsx)(v.A,{label:"Name",id:"name",name:"name"})}),(0,n.jsx)(j.A.Content,{children:(0,n.jsx)(v.A.TextArea,{label:"Description",id:"description",placeholder:"Describe your custom report",size:"medium",textAreaClassName:"resize-none"})}),(0,n.jsx)(j.A.Separator,{}),(0,n.jsxs)(j.A.Content,{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(b.$,{htmlType:"reset",type:"default",onClick:s,disabled:l,children:"Cancel"}),(0,n.jsx)(b.$,{htmlType:"submit",loading:l,disabled:l,children:"Save custom report"})]})]})})})};var C=r(23729),A=r(53931),S=r(24051),_=r(82702),w=r(80090),F=r(34983),N=r(24487),M=r(80100),R=r(68421),T=r(76174),E=r(74415),D=r(33922),I=r(21162);let P=e=>{let{item:t,pageKey:r,onSelectEdit:a,onSelectDelete:s}=e,{profile:i}=(0,F.xc)(),{can:o}=(0,w.Qp)(c.aG.UPDATE,"user_content",{resource:{type:"report",visibility:t.report.visibility,owner_id:t.report.owner_id},subject:{id:null==i?void 0:i.id}});return(0,n.jsxs)(m(),{className:(0,M.cn)("pr-2 h-7 pl-3 mt-1 text-foreground-light group-hover:text-foreground/80 text-sm","flex items-center justify-between rounded-md group relative",t.key===r?"bg-surface-300 text-foreground":"hover:bg-surface-200"),href:t.url,"data-sentry-element":"Link","data-sentry-component":"ReportMenuItem","data-sentry-source-file":"ReportMenuItem.tsx",children:[(0,n.jsx)("div",{children:t.name}),o&&(0,n.jsxs)(I.rI,{children:[(0,n.jsx)(I.ty,{asChild:!0,children:(0,n.jsx)(b.$,{type:"text",className:"px-1 opacity-50 hover:opacity-100",icon:(0,n.jsx)(T.A,{size:12,strokeWidth:2})})}),(0,n.jsxs)(I.SQ,{align:"start",className:"w-32 *:gap-x-2",children:[(0,n.jsxs)(I._2,{onClick:()=>{t.id&&a()},children:[(0,n.jsx)(E.A,{size:12}),(0,n.jsx)("div",{children:"Rename report"})]}),(0,n.jsx)(I.mB,{}),(0,n.jsxs)(I._2,{onClick:()=>{t.id&&s()},children:[(0,n.jsx)(D.A,{size:12}),(0,n.jsx)("div",{children:"Delete report"})]})]})]})]},t.key+"-menukey")},B=()=>{let e=(0,p.useRouter)(),{profile:t}=(0,F.xc)(),{ref:r,id:s}=(0,a.g)(),o=s||e.pathname.split("/")[4],l=(0,a._P)("authreportv2"),u=(0,a._P)("edgefunctionreport"),x=(0,a._P)("realtimeReport"),j=(0,a._P)("storagereport"),g=(0,a._P)("postgrestreport"),v=(0,i.x)("project_storage:all"),{can:b}=(0,w.Qp)(c.aG.CREATE,"user_content",{resource:{type:"report",owner_id:null==t?void 0:t.id},subject:{id:null==t?void 0:t.id}}),T=(0,f.useMemo)(()=>{let{its:t,ite:r,isHelper:n,helperText:a}=e.query,s=new URLSearchParams;t&&"string"==typeof t&&s.set("its",t),r&&"string"==typeof r&&s.set("ite",r),n&&"string"==typeof n&&s.set("isHelper",n),a&&"string"==typeof a&&s.set("helperText",a);let i=s.toString();return i?"?".concat(i):""},[e.query]),{data:E,isLoading:D}=(0,_.D)({projectRef:r,type:"report"}),{mutate:I,isLoading:B}=(0,S.$)({onSuccess:()=>{L(!1),y.oR.success("Successfully deleted report"),e.push("/project/".concat(r,"/reports"))},onError:e=>{y.oR.error("Failed to delete report: ".concat(e.message))}}),[q,L]=(0,f.useState)(!1),[U,V]=(0,f.useState)(!1),[O,H]=(0,f.useState)(),[z,G]=(0,f.useState)(),$=function(){if(!E)return[];let e=null==E?void 0:E.content.filter(e=>"report"===e.type);return(null==e?void 0:e.sort((e,t)=>e.name<t.name?-1:+(e.name>t.name))).map((e,t)=>({id:e.id,name:e.name,description:e.description||"",key:e.id||t+"-report",url:"/project/".concat(r,"/reports/").concat(e.id).concat(T),hasDropdownActions:!0,report:e}))}(),K=[{title:"Built-in reports",key:"builtin-reports",items:[{name:"API Gateway",key:"api-overview",url:"/project/".concat(r,"/reports/api-overview").concat(T)},...l?[{name:"Auth",key:"auth",url:"/project/".concat(r,"/reports/auth").concat(T)}]:[],{name:"Database",key:"database",url:"/project/".concat(r,"/reports/database").concat(T)},...u?[{name:"Edge Functions",key:"edge-functions",url:"/project/".concat(r,"/reports/edge-functions").concat(T)}]:[],{name:"Query Performance",key:"query-performance",url:"/project/".concat(r,"/reports/query-performance").concat(T)},...g?[{name:"PostgREST",key:"postgrest",url:"/project/".concat(r,"/reports/postgrest").concat(T)}]:[],...x?[{name:"Realtime",key:"realtime",url:"/project/".concat(r,"/reports/realtime").concat(T)}]:[],...j&&v?[{name:"Storage",key:"storage",url:"/project/".concat(r,"/reports/storage").concat(T)}]:[]]}];return(0,n.jsx)(N.Ay,{type:"pills",className:"mt-6","data-sentry-element":"Menu","data-sentry-component":"ReportsMenu","data-sentry-source-file":"ReportsMenu.tsx",children:D?(0,n.jsxs)("div",{className:"px-5 my-4 space-y-2",children:[(0,n.jsx)(A.Ay,{}),(0,n.jsx)(A.Ay,{className:"w-3/4"}),(0,n.jsx)(A.Ay,{className:"w-1/2"})]}):(0,n.jsxs)("div",{className:"flex flex-col px-2 gap-y-6",children:[(0,n.jsx)("div",{className:"px-2",children:(0,n.jsx)(C.G,{block:!0,type:"default",icon:(0,n.jsx)(d.A,{}),disabled:!b,className:"justify-start flex-grow",onClick:()=>{V(!0)},tooltip:{content:{side:"bottom",text:b?void 0:"You need additional permissions to create custom reports"}},children:"New custom report"})}),$.length>0?(0,n.jsxs)("div",{children:[(0,n.jsx)(N.Ay.Group,{title:(0,n.jsx)("span",{className:"uppercase font-mono",children:"Your custom reports"})}),$.map(e=>(0,n.jsx)(P,{item:e,pageKey:o,onSelectEdit:()=>{G(e.report)},onSelectDelete:()=>{H(e.report),L(!0)}},e.id))]}):null,K.map(e=>(0,n.jsx)("div",{children:e.items?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Ay.Group,{title:(0,n.jsx)("span",{className:"uppercase font-mono",children:e.title})}),(0,n.jsx)("div",{className:"flex flex-col",children:e.items.map(e=>(0,n.jsx)("li",{className:(0,M.cn)("pr-2 mt-1 text-foreground-light group-hover:text-foreground/80 text-sm","flex items-center justify-between rounded-md group relative",e.key===o?"bg-surface-300 text-foreground":"hover:bg-surface-200"),children:(0,n.jsx)(m(),{href:e.url,className:"flex-grow h-7 flex justify-between items-center pl-3",children:(0,n.jsx)("span",{children:e.name})})},e.key))},e.key)]}):null},e.key+"-menu-group")),(0,n.jsx)(k,{onCancel:()=>G(void 0),selectedReport:z,initialValues:{name:(null==z?void 0:z.name)||"",description:(null==z?void 0:z.description)||""}}),(0,n.jsx)(R.A,{title:"Delete custom report",confirmLabel:"Delete report",confirmLabelLoading:"Deleting report",size:"medium",loading:B,visible:q,onCancel:()=>L(!1),onConfirm:()=>void 0===r?console.error("Project ref is required"):(null==O?void 0:O.id)===void 0?console.error("Report ID is required"):void I({projectRef:r,ids:[O.id]}),children:(0,n.jsx)("div",{className:"text-sm text-foreground-light grid gap-4",children:(0,n.jsx)("div",{className:"grid gap-1",children:(0,n.jsxs)("p",{children:["Are you sure you want to delete '",null==O?void 0:O.name,"'?"]})})})}),(0,n.jsx)(h.E,{visible:U,onCancel:()=>V(!1),afterSubmit:()=>V(!1)})]})})},q=(0,o.r)(e=>{let{title:t,children:r}=e,{ref:o}=(0,a.g)(),{reportsAll:c}=(0,i.x)(["reports:all"]);return c?(0,n.jsx)(l.k,{title:t,product:"Reports",productMenu:(0,n.jsx)(B,{}),isBlocking:!1,children:r}):(0,n.jsx)(s.c,{urlBack:"/project/".concat(o)})})},82702:(e,t,r)=>{r.d(t,{D:()=>o});var n=r(56947),a=r(24523),s=r(1206);async function i(e,t){let{projectRef:r,type:n,name:s,limit:i=10}=e;if(void 0===r)throw Error("projectRef is required for getContent");let{data:o,error:l}=await (0,a.Jt)("/platform/projects/{ref}/content",{params:{path:{ref:r},query:{type:n,name:s,limit:i.toString()}},signal:t});return l&&(0,a.H4)(l),{cursor:o.cursor,content:o.data}}let o=function(e){let{projectRef:t,type:r,name:a,limit:o}=e,{enabled:l=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)({queryKey:s.M.list(t,{type:r,name:a,limit:o}),queryFn:e=>{let{signal:n}=e;return i({projectRef:t,type:r,name:a,limit:o},n)},enabled:l&&void 0!==t,...c})}},84353:(e,t,r)=>{r.d(t,{Wy:()=>i,j_:()=>s,vF:()=>a}),r(39406);var n=r(24523);function a(e){switch(e){case"1m":case"5m":case"10m":case"30m":return"minute";case"1h":default:return"hour";case"1d":return"day"}}let s={400:{light:"#FFD54F",dark:"#FFF176"},401:{light:"#FF8A65",dark:"#FFAB91"},403:{light:"#FFB74D",dark:"#FFCC80"},404:{light:"#90A4AE",dark:"#B0BEC5"},409:{light:"#BA68C8",dark:"#CE93D8"},410:{light:"#A1887F",dark:"#BCAAA4"},422:{light:"#FF9800",dark:"#FFB74D"},429:{light:"#E65100",dark:"#F57C00"},500:{light:"#B71C1C",dark:"#D32F2F"},502:{light:"#9575CD",dark:"#B39DDB"},503:{light:"#0097A7",dark:"#4DD0E1"},504:{light:"#C0CA33",dark:"#D4E157"},default:{light:"#757575",dark:"#9E9E9E"}};async function i(e,t,r,a){let{data:s,error:i}=await (0,n.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:{sql:t,iso_timestamp_start:r,iso_timestamp_end:a}}});if(i)throw i;return s}}}]);